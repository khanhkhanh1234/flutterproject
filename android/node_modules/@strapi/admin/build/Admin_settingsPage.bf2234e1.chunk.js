"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5895],{50020:(ue,O,a)=>{a.r(O),a.d(O,{SettingsPage:()=>en,default:()=>xn});var e=a(32735),C=a(88425),r=a(5141),ne=a(11856),$=a(5636),Me=a(99357),Ce=a(775),fe=a(7602),we=a(84968),K=a(16540),I=a(9808),P=a(78330),U=a(95602),le=a(90662),X=a(44526),ee=a(14983),Ve=a(82372),$e=a.n(Ve),ze=a(88677),Ee=a.n(ze),z=a(60216),y=a.n(z),ce=a(69898),Ge=a(20763),se=a(59290),q=a.n(se),ae=a(23101),lt=a.n(ae),Le=a(49415);const Xe={currentStep:void 0},je=(p=Xe,c)=>(0,Le.default)(p,l=>{switch(c.type){case"GO_TO":{l.currentStep=c.to;break}default:return l}});var pe=a(4122);const Ze={localImage:void 0},Qe=(p=Ze,c)=>(0,Le.default)(p,l=>{switch(c.type){case"SET_LOCAL_IMAGE":{l.localImage=c.value;break}default:return l}}),j=({onChangeLogo:p,customLogo:c,goTo:l,Component:h,modalTitle:u,next:T,prev:M,currentStep:A})=>{const[{localImage:v},R]=(0,e.useReducer)(Qe,Ze),{formatMessage:Se}=(0,$.useIntl)(),re=vt=>{R({type:"SET_LOCAL_IMAGE",value:vt})},et=()=>{l(null)};return A?e.createElement(pe.ModalLayout,{labelledBy:"modal",onClose:et},e.createElement(pe.ModalHeader,null,e.createElement(U.Typography,{fontWeight:"bold",as:"h2",id:"modal"},Se(u))),e.createElement(h,{setLocalImage:re,goTo:l,next:T,prev:M,onClose:et,asset:v||c,onChangeLogo:p})):null};j.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},j.propTypes={Component:y().elementType,currentStep:y().string,customLogo:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}),goTo:y().func.isRequired,modalTitle:y().shape({id:y().string,defaultMessage:y().string}),next:y().string,onChangeLogo:y().func.isRequired,prev:y().string};const W=j,F=750,Z=100,de=["image/jpeg","image/png","image/svg+xml"];var k=a(81700),Y=a(27635),me=a(19615),V=a(19192),be=a(78752),Ne=a(20001),at=a(22795),He=a.n(at),st=(p,c,l)=>new Promise((h,u)=>{var T=v=>{try{A(l.next(v))}catch(R){u(R)}},M=v=>{try{A(l.throw(v))}catch(R){u(R)}},A=v=>v.done?h(v.value):Promise.resolve(v.value).then(T,M);A((l=l.apply(p,c)).next())});const Je={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},D={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},H=p=>new Promise(c=>{const l=new FileReader;l.onload=()=>{const h=new Image;h.onload=function(){c({width:h.width,height:h.height})},h.src=l.result},l.readAsDataURL(p)}),f=(p,c)=>({ext:p.name.split(".").pop(),size:p.size/1e3,name:p.name,url:URL.createObjectURL(p),rawFile:p,width:c.width,height:c.height}),oe=p=>st(void 0,null,function*(){let c;if(!de.includes(p.type))throw c=new Error("File format"),c.displayMessage=Je,c;const h=yield H(p);if(!(h.width<=F&&h.height<=F))throw c=new Error("File sizing"),c.displayMessage=D,c;const T=f(p,h);if(!(T.size<=Z))throw c=new Error("File sizing"),c.displayMessage=D,c;return T});var Te=(p,c,l)=>new Promise((h,u)=>{var T=v=>{try{A(l.next(v))}catch(R){u(R)}},M=v=>{try{A(l.throw(v))}catch(R){u(R)}},A=v=>v.done?h(v.value):Promise.resolve(v.value).then(T,M);A((l=l.apply(p,c)).next())});const tt=(0,me.default)(Ne.FieldInput)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Ue=({setLocalImage:p,goTo:c,next:l,onClose:h})=>{const{formatMessage:u}=(0,$.useIntl)(),[T,M]=(0,e.useState)(!1),[A,v]=(0,e.useState)(void 0),R=(0,e.useRef)(null),Se=()=>M(!0),re=()=>M(!1),et=ot=>{ot.preventDefault(),R.current.click()},vt=()=>Te(void 0,null,function*(){re();const ot=R.current.files[0];if(!!ot)try{const ct=yield oe(ot);p(ct),c(l)}catch(ct){if(ct.displayMessage)v(u(ct.displayMessage,{size:Z,dimension:F})),R.current.focus();else throw ct}}),it=()=>T?"primary500":A?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(I.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Ne.Field,{name:"logo-upload",error:A},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(le.Stack,{spacing:2},e.createElement(V.Flex,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:T?"primary100":"neutral100",borderColor:it(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:Se,onDragLeave:re},e.createElement(be.Icon,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:He(),"aria-hidden":!0}),e.createElement(I.Box,{paddingTop:3,paddingBottom:5},e.createElement(U.Typography,{variant:"delta",as:"span"},u({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(tt,{accept:de,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:vt,ref:R,id:"logo-upload"}),e.createElement(X.Button,{type:"button",onClick:et},u({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(I.Box,{paddingTop:6},e.createElement(U.Typography,{variant:"pi",textColor:"neutral600"},u({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:Z,dimension:F})))),e.createElement(Ne.FieldError,null)))))),e.createElement(pe.ModalFooter,{startActions:e.createElement(X.Button,{onClick:h,variant:"tertiary"},u({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};Ue.defaultProps={next:null},Ue.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const _=Ue;var ge=a(37178),Ae=a(43653),Rt=a.n(Ae),wt=(p,c,l)=>new Promise((h,u)=>{var T=v=>{try{A(l.next(v))}catch(R){u(R)}},M=v=>{try{A(l.throw(v))}catch(R){u(R)}},A=v=>v.done?h(v.value):Promise.resolve(v.value).then(T,M);A((l=l.apply(p,c)).next())});const jt=p=>wt(void 0,null,function*(){try{const c=yield Rt().get(p,{responseType:"blob",timeout:8e3});return new File([c.data],c.config.url,{type:c.headers["content-type"]})}catch(c){throw c.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},c}});var Nt=(p,c,l)=>new Promise((h,u)=>{var T=v=>{try{A(l.next(v))}catch(R){u(R)}},M=v=>{try{A(l.throw(v))}catch(R){u(R)}},A=v=>v.done?h(v.value):Promise.resolve(v.value).then(T,M);A((l=l.apply(p,c)).next())});const rt=({goTo:p,next:c,onClose:l,setLocalImage:h})=>{const{formatMessage:u}=(0,$.useIntl)(),[T,M]=(0,e.useState)(""),[A,v]=(0,e.useState)(null),R=re=>{M(re.target.value)},Se=()=>Nt(void 0,null,function*(){try{const re=yield jt(T),et=yield oe(re);h(et),p(c)}catch(re){if(re.displayMessage)v(u(re.displayMessage,{size:Z,dimension:F}));else throw re}});return e.createElement("form",{onSubmit:re=>{re.preventDefault(),Se()}},e.createElement(I.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(ge.TextInput,{label:u({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:A,onChange:R,value:T,name:"logo-url"})),e.createElement(pe.ModalFooter,{startActions:e.createElement(X.Button,{onClick:l,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(X.Button,{type:"submit"},u({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};rt.defaultProps={next:null},rt.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const Ot=rt,ut=({setLocalImage:p,goTo:c,next:l,onClose:h})=>{const{formatMessage:u}=(0,$.useIntl)();return e.createElement(k.TabGroup,{label:u({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(I.Box,{paddingLeft:8,paddingRight:8},e.createElement(k.Tabs,null,e.createElement(k.Tab,null,u({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(k.Tab,null,u({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Y.Divider,null)),e.createElement(k.TabPanels,null,e.createElement(k.TabPanel,null,e.createElement(_,{onClose:h,setLocalImage:p,goTo:c,next:l})),e.createElement(k.TabPanel,null,e.createElement(Ot,{onClose:h,setLocalImage:p,goTo:c,next:l}))))};ut.defaultProps={next:null},ut.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const Vn=ut;var qe=a(31998);const on=({asset:p})=>{const{formatMessage:c}=(0,$.useIntl)();return e.createElement(qe.Card,null,e.createElement(qe.CardHeader,null,e.createElement(qe.CardAsset,{size:"S",src:p.url})),e.createElement(qe.CardBody,null,e.createElement(qe.CardContent,null,e.createElement(qe.CardTitle,null,p.name),e.createElement(qe.CardSubtitle,null,`${p.ext.toUpperCase()} - ${p.width}\u2715${p.height}`)),e.createElement(qe.CardBadge,null,c({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};on.propTypes={asset:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}).isRequired};const Wt=on,Dt=({onClose:p,asset:c,prev:l,next:h,goTo:u,setLocalImage:T,onChangeLogo:M})=>{const{formatMessage:A}=(0,$.useIntl)(),v=()=>{T(void 0),u(l)},R=()=>{M(c),u(h)};return e.createElement(e.Fragment,null,e.createElement(I.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(V.Flex,{justifyContent:"space-between",paddingBottom:6},e.createElement(V.Flex,{direction:"column",alignItems:"flex-start"},e.createElement(U.Typography,{variant:"pi",fontWeight:"bold"},A({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(U.Typography,{variant:"pi",textColor:"neutral500"},A({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(X.Button,{onClick:v,variant:"secondary"},A({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(I.Box,{maxWidth:(0,C.pxToRem)(180)},e.createElement(Wt,{asset:c}))),e.createElement(pe.ModalFooter,{startActions:e.createElement(X.Button,{onClick:p,variant:"tertiary"},A({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(X.Button,{onClick:R},A({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Dt.defaultProps={next:null,prev:null},Dt.propTypes={goTo:y().func.isRequired,asset:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}).isRequired,next:y().string,onClose:y().func.isRequired,onChangeLogo:y().func.isRequired,prev:y().string,setLocalImage:y().func.isRequired};const sn={upload:{Component:Vn,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Dt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},bt=({customLogo:p,defaultLogo:c,onChangeLogo:l,onResetMenuLogo:h})=>{const[{currentStep:u},T]=(0,e.useReducer)(je,Xe),{Component:M,next:A,prev:v,modalTitle:R}=sn[u]||{},{formatMessage:Se}=(0,$.useIntl)(),re=et=>{T({type:"GO_TO",to:et})};return e.createElement(e.Fragment,null,e.createElement(ce.CarouselInput,{label:Se({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"}),selectedSlide:0,hint:Se({id:"Settings.application.customization.carousel-hint",defaultMessage:"Change the admin panel logo (Max dimension: {dimension}x{dimension}, Max file size: {size}KB)"},{size:Z,dimension:F}),previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:(p==null?void 0:p.name)||"logo.png",actions:e.createElement(ce.CarouselActions,null,e.createElement(Ge.IconButton,{onClick:()=>re(p?"pending":"upload"),label:Se({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(q(),null)}),p&&e.createElement(Ge.IconButton,{onClick:h,label:Se({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(lt(),null)}))},e.createElement(ce.CarouselSlide,{label:Se({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(I.Box,{maxHeight:"40%",maxWidth:"40%",as:"img",src:(p==null?void 0:p.url)||c,alt:Se({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(W,{Component:M,currentStep:u,onChangeLogo:l,customLogo:p,goTo:re,next:A,prev:v,modalTitle:R}))};bt.defaultProps={customLogo:null},bt.propTypes={customLogo:y().shape({url:y().string,name:y().string}),defaultLogo:y().string.isRequired,onChangeLogo:y().func.isRequired,onResetMenuLogo:y().func.isRequired};const rn=bt,ft={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}}},$t=(p=ft,c)=>(0,Le.default)(p,l=>{switch(c.type){case"SET_CUSTOM_MENU_LOGO":{l.menuLogo.display=c.value,l.menuLogo.submit.rawFile=c.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{l.menuLogo.display=null,l.menuLogo.submit={rawFile:null,isReset:!0};break}default:return l}});var pt=a(86349),Gn=a.n(pt);const Zn=(p,c)=>Gn()(p,{menuLogo:{display:c.menuLogo}}),nt=(0,e.forwardRef)(({projectSettingsStored:p},c)=>{const{formatMessage:l}=(0,$.useIntl)(),{trackUsage:h}=(0,C.useTracking)(),{logos:{menu:u}}=(0,Ce.um)(),[{menuLogo:T},M]=(0,e.useReducer)($t,ft,()=>Zn(ft,p)),A=R=>{M({type:"SET_CUSTOM_MENU_LOGO",value:R})},v=()=>{h("didClickResetLogo"),M({type:"RESET_CUSTOM_MENU_LOGO"})};return(0,e.useImperativeHandle)(c,()=>({getValues:()=>({menuLogo:T.submit})})),e.createElement(I.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(U.Typography,{variant:"delta",as:"h3"},l({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(P.Grid,{paddingTop:4},e.createElement(P.GridItem,{col:6,s:12},e.createElement(rn,{onChangeLogo:A,customLogo:T.display,defaultLogo:u.default,onResetMenuLogo:v}))))});nt.defaultProps={projectSettingsStored:null},nt.propTypes={projectSettingsStored:y().shape({menuLogo:y().shape({url:y().string,name:y().string})})};const Hn=nt;var kt=a(17247),cn=a(48344),dn=a.n(cn),Kn=Object.defineProperty,ht=Object.defineProperties,Xn=Object.getOwnPropertyDescriptors,mt=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable,xt=(p,c,l)=>c in p?Kn(p,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[c]=l,un=(p,c)=>{for(var l in c||(c={}))Vt.call(c,l)&&xt(p,l,c[l]);if(mt)for(var l of mt(c))zt.call(c,l)&&xt(p,l,c[l]);return p},Gt=(p,c)=>ht(p,Xn(c));const Mt=p=>dn()(p,(c,l,h)=>{l&&l.url?c[h]=Gt(un({},l),{url:(0,C.prefixFileUrlWithBackendUrl)(l.url)}):c[h]=l},{});var Zt=(p,c,l)=>new Promise((h,u)=>{var T=v=>{try{A(l.next(v))}catch(R){u(R)}},M=v=>{try{A(l.throw(v))}catch(R){u(R)}},A=v=>v.done?h(v.value):Promise.resolve(v.value).then(T,M);A((l=l.apply(p,c)).next())});const Ht=()=>Zt(void 0,null,function*(){const{data:p}=yield kt.be.get("/admin/project-settings");return Mt(p)}),mn=p=>Zt(void 0,null,function*(){const{data:c}=yield kt.be.post("/admin/project-settings",p);return Mt(c)}),gn=p=>{const c=new FormData;return Object.entries(p).forEach(([l,h])=>{h&&h.rawFile instanceof File&&c.append(l,h.rawFile),h&&h.isReset&&c.append(l,null)}),c};var Kt=(p,c,l)=>new Promise((h,u)=>{var T=v=>{try{A(l.next(v))}catch(R){u(R)}},M=v=>{try{A(l.throw(v))}catch(R){u(R)}},A=v=>v.done?h(v.value):Promise.resolve(v.value).then(T,M);A((l=l.apply(p,c)).next())});const fn=[{action:"admin::project-settings.update",subject:null}],yn=()=>{const p=(0,e.useRef)(),c=(0,C.useNotification)(),{trackUsage:l}=(0,C.useTracking)(),{formatMessage:h}=(0,$.useIntl)(),u=(0,we.useQueryClient)();(0,C.useFocusWhenNavigate)();const T=(0,C.useAppInfos)(),{shouldUpdateStrapi:M,latestStrapiReleaseTag:A,strapiVersion:v}=T,{updateProjectSettings:R}=(0,Ce.um)(),{data:Se}=(0,we.useQuery)("project-settings",Ht),re=T.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee",et=(0,we.useMutation)(it=>mn(it),{onSuccess(it){return Kt(this,arguments,function*({menuLogo:ot}){yield u.invalidateQueries("project-settings",{refetchActive:!0}),R({menuLogo:ot==null?void 0:ot.url})})}}),vt=()=>{const it=p.current.getValues(),ot=gn(it);et.mutate(ot,{onSuccess(){const{menuLogo:ct}=it;ct.rawFile&&l("didChangeLogo")},onError(){c({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}})};return e.createElement(ne.Layout,null,e.createElement(C.SettingsPageTitle,{name:"Application"}),e.createElement(K.Main,null,e.createElement(ne.HeaderLayout,{title:h({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:h({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:e.createElement(X.Button,{onClick:vt,startIcon:e.createElement(Ee(),null)},h({id:"global.save",defaultMessage:"Save"}))}),e.createElement(ne.ContentLayout,null,e.createElement(le.Stack,{spacing:6},e.createElement(I.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(le.Stack,{spacing:5},e.createElement(U.Typography,{variant:"delta",as:"h3"},h({id:"global.details",defaultMessage:"Details"})),e.createElement(P.Grid,{paddingTop:1},e.createElement(P.GridItem,{col:6,s:12},e.createElement(U.Typography,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(U.Typography,{as:"p"},"v",v),e.createElement(ee.Link,{href:T.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:e.createElement($e(),null)},h({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(P.GridItem,{col:6,s:12},e.createElement(U.Typography,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(U.Typography,{as:"p"},h({id:re,defaultMessage:`${T.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(P.Grid,{paddingTop:1},e.createElement(P.GridItem,{col:6,s:12},M&&e.createElement(ee.Link,{href:`https://github.com/strapi/strapi/releases/tag/${A}`,isExternal:!0,endIcon:e.createElement($e(),null)},h({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(P.GridItem,{col:6,s:12},e.createElement(ee.Link,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement($e(),null)},h({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(I.Box,{paddingTop:1},e.createElement(U.Typography,{variant:"sigma",textColor:"neutral600"},h({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(U.Typography,{as:"p"},T.nodeVersion)))),Se&&e.createElement(C.CheckPermissions,{permissions:fn},e.createElement(Hn,{ref:p,projectSettingsStored:Se}))))))};var St=a(3704),vn=a.n(St);const Xt=p=>vn()(p,l=>l.links).map(l=>(0,fe.ot)(l.Component,l.to,l.exact||!1)),Cn=p=>p.filter(c=>!c.links.every(l=>l.isDisplayed===!1));var Yt=a(21930),_e=a(18950),En=a(72975),he=a.n(En),Lt=function(){return window&&window.strapi&&window.strapi.isEE?a(20178).Z:a(16329).Z}(),bn=function(){return window&&window.strapi&&window.strapi.isEE?a(51899).Z:a(45677).Z}(),Sn=[{Component:function(){return{default:bn}},to:"/settings/roles",exact:!0},{Component:function(){return{default:Lt}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:Lt}},to:"/settings/roles/new",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(2544).then(a.bind(a,33778));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/roles/:id",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(5199).then(a.bind(a,31904));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/users",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4263).then(a.bind(a,40874));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/users/:id",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(4715),a.e(5162)]).then(a.bind(a,33238));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks/create",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(4715),a.e(5162)]).then(a.bind(a,59021));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks/:id",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(4121).then(a.bind(a,70791));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/webhooks",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,a.e(8056).then(a.bind(a,83782));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(7379),a.e(4318),a.e(4299)]).then(a.bind(a,3330));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens/create",exact:!0},{Component:function(){return(0,_e.Z)(he().mark(function c(){var l;return he().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.all([a.e(7379),a.e(4318),a.e(92)]).then(a.bind(a,97841));case 2:return l=u.sent,u.abrupt("return",l);case 4:case"end":return u.stop()}},c)}))()},to:"/settings/api-tokens/:id",exact:!0}];const Qn=Sn;var Pn=function(){return window&&window.strapi&&window.strapi.isEE?a(63775).Z:a(75936).Z}();const Tn=[].concat((0,Yt.Z)(Pn),(0,Yt.Z)(Qn));var yt=a(89420),Qt=Object.defineProperty,An=Object.defineProperties,Rn=Object.getOwnPropertyDescriptors,It=Object.getOwnPropertySymbols,On=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable,Jt=(p,c,l)=>c in p?Qt(p,c,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[c]=l,Pt=(p,c)=>{for(var l in c||(c={}))On.call(c,l)&&Jt(p,l,c[l]);if(It)for(var l of It(c))Dn.call(c,l)&&Jt(p,l,c[l]);return p},qt=(p,c)=>An(p,Rn(c));const Ft=({menu:p})=>{const{formatMessage:c}=(0,$.useIntl)(),h=Cn(p).map(T=>qt(Pt({},T),{title:T.intlLabel,links:T.links.map(M=>qt(Pt({},M),{title:M.intlLabel,name:M.id}))})),u=c({id:"global.settings",defaultMessage:"Settings"});return e.createElement(yt.SubNav,{ariaLabel:u},e.createElement(yt.SubNavHeader,{label:u}),e.createElement(yt.SubNavSections,null,h.map(T=>e.createElement(yt.SubNavSection,{key:T.id,label:c(T.intlLabel)},T.links.map(M=>e.createElement(yt.SubNavLink,{as:r.NavLink,withBullet:M.hasNotification,to:M.to,key:M.id},c(M.intlLabel)))))))};Ft.propTypes={menu:y().array.isRequired};const _t=Ft;function en(){const{settingId:p}=(0,r.useParams)(),{settings:c}=(0,C.useStrapiApp)(),{formatMessage:l}=(0,$.useIntl)(),{isLoading:h,menu:u}=(0,Ce.Te)(),T=(0,e.useMemo)(()=>(0,fe.WW)(Tn.map(({to:v,Component:R,exact:Se})=>(0,fe.ot)(R,v,Se))),[]),M=Xt(c);if(h)return e.createElement(C.LoadingIndicatorPage,null);if(!p)return e.createElement(r.Redirect,{to:"/settings/application-infos"});const A=l({id:"global.settings",defaultMessage:"Settings"});return e.createElement(ne.Layout,{sideNav:e.createElement(_t,{menu:u})},e.createElement(Me.Helmet,{title:A}),e.createElement(r.Switch,null,e.createElement(r.Route,{path:"/settings/application-infos",component:yn,exact:!0}),T,M))}const xn=(0,e.memo)(en)},16329:(ue,O,a)=>{a.d(O,{Z:()=>ne});var e=a(32735),C=a(5141);const ne=()=>e.createElement(C.Redirect,{to:"/404"})},49466:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!0},35123:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!0},18318:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!0},52124:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!0},61526:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!0},37511:(ue,O,a)=>{a.d(O,{Z:()=>ts});var e=a(32735),C=a(60216),r=a.n(C),ne=a(88425),$=a(81700),Me=a(23973),Ce=a.n(Me),fe=a(86834),we=a.n(fe),K=a(5636),I=a(9808),P=a(19615),U=a(98978),le=a.n(U),X=a(92577),ee=a(67793),Ve=a.n(ee),$e=a(31476),ze=a.n($e),Ee=a(35980),z=a(19192),y=a(33795),ce=a.n(y),Ge=a(9086),se=a.n(Ge),q=a(775),ae=a(42258),lt=a.n(ae),Le=a(44526);const Xe=P.default.div`
  position: relative;

  ${({hasConditions:o,disabled:t,theme:n})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${t?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,Ye=({onClick:o,className:t,hasConditions:n,variant:s})=>{const{formatMessage:i}=(0,K.useIntl)();return e.createElement(Xe,{hasConditions:n,className:t},e.createElement(Le.Button,{variant:s,startIcon:e.createElement(lt(),null),onClick:o},i({id:"global.settings",defaultMessage:"Settings"})))};Ye.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Ye.propTypes={onClick:r().func.isRequired,className:r().string,hasConditions:r().bool,variant:r().string};const je=(0,P.default)(Ye)``;var pe=a(4122),Ze=a(71657),G=a(95602),Qe=a(49415),j=a(81346),W=a.n(j),F=a(23940),Z=a.n(F),de=a(25716),k=Object.defineProperty,Y=Object.getOwnPropertySymbols,me=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,be=(o,t,n)=>t in o?k(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Ne=(o,t)=>{for(var n in t||(t={}))me.call(t,n)&&be(o,n,t[n]);if(Y)for(var n of Y(t))V.call(t,n)&&be(o,n,t[n]);return o};const at=o=>Object.values(o).map(t=>Object.entries(t).filter(([,n])=>n).map(([n])=>n)).flat(),He=o=>o.reduce((t,[n,s])=>(t.push({label:Z()(n),children:s.map(i=>({label:i.displayName,value:i.id}))}),t),[]),st=(o,t)=>o.map(([,n])=>n).flat().reduce((n,s)=>Ne({[s.id]:t.includes(s.id)},n),{});var Je=function(){return window&&window.strapi&&window.strapi.isEE?a(56899).Z:a(49466).Z}(),D=function(t){var n=t.arrayOfOptionsGroupedByCategory,s=t.isFormDisabled,i=t.isGrey,d=t.label,m=t.name,g=t.onChange,E=t.value,b=(0,K.useIntl)(),S=b.formatMessage,x=function(Q){g(m,st(n,Q))};return e.createElement(z.Flex,{as:"li",background:i?"neutral100":"neutral0",paddingBottom:3,paddingTop:3},e.createElement(z.Flex,{paddingLeft:6,style:{width:180}},e.createElement(G.Typography,{variant:"sigma",textColor:"neutral600"},S({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(G.Typography,{variant:"sigma",title:d,textColor:"primary600",ellipsis:!0},S({id:"Settings.roles.form.permissions.".concat(d.toLowerCase()),defaultMessage:d})),e.createElement(G.Typography,{variant:"sigma",textColor:"neutral600"},"\xA0",S({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(I.Box,{style:{maxWidth:430,width:"100%"}},e.createElement(de.MultiSelectNested,{id:m,customizeContent:function(Q){return"".concat(Q.length," currently selected")},onChange:x,value:at(E),options:He(n),disabled:s||Je})))};D.propTypes={arrayOfOptionsGroupedByCategory:r().array.isRequired,isFormDisabled:r().bool.isRequired,isGrey:r().bool.isRequired,label:r().string.isRequired,name:r().string.isRequired,value:r().object.isRequired,onChange:r().func.isRequired};const H=D;var f=a(92891);const oe=(o,t)=>o.reduce((n,s)=>(n[s.id]=(0,f.get)(t,s.id,!1),n),{}),Te=(o,t)=>o.reduce((n,s)=>{const[i,d]=s,m=oe(d,t);return n[i]=m,n},{}),Ue=(o,t,n)=>o.reduce((s,i)=>{const d=(0,f.get)(t,[...i.pathToConditionsObject,"conditions"],{}),m=Te(n,d);return s[i.pathToConditionsObject.join("..")]=m,s},{});var _=Object.defineProperty,ge=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,wt=(o,t,n)=>t in o?_(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,nn=(o,t)=>{for(var n in t||(t={}))Ae.call(t,n)&&wt(o,n,t[n]);if(ge)for(var n of ge(t))Rt.call(t,n)&&wt(o,n,t[n]);return o};const jt=({actions:o,headerBreadCrumbs:t,isFormDisabled:n,onClosed:s,onToggle:i})=>{const{formatMessage:d}=(0,K.useIntl)(),{availableConditions:m,modifiedData:g,onChangeConditions:E}=(0,q.$_)(),b=(0,e.useMemo)(()=>Object.entries(W()(m,"category")),[m]),S=o.filter(({isDisplayed:L,hasSomeActionsSelected:N,hasAllActionsSelected:te})=>L&&(N||te)),x=(0,e.useMemo)(()=>Ue(S,g,b),[S,g,b]),[B,Q]=(0,e.useState)(x),w=(L,N)=>{Q((0,Qe.default)(te=>{te[L]||(te[L]={}),te[L].default||(te[L].default={}),te[L].default=N}))},J=()=>{const L=Object.entries(B).reduce((N,te)=>{const[ye,Ke]=te,De=Object.values(Ke).reduce((Re,Ie)=>nn(nn({},Re),Ie),{});return N[ye]=De,N},{});E(L),i()};return e.createElement(pe.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:s},e.createElement(pe.ModalHeader,null,e.createElement(Ze.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:t.join(", ")},t.map(L=>e.createElement(Ze.Crumb,{key:L},Z()(d({id:L,defaultMessage:L})))))),e.createElement(pe.ModalBody,null,S.length===0&&e.createElement(G.Typography,null,d({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,S.map(({actionId:L,label:N,pathToConditionsObject:te},ye)=>{const Ke=te.join("..");return e.createElement(H,{key:L,arrayOfOptionsGroupedByCategory:b,label:N,isFormDisabled:n,isGrey:ye%2===0,name:Ke,onChange:w,value:ce()(B,Ke,{})})}))),e.createElement(pe.ModalFooter,{startActions:e.createElement(Le.Button,{variant:"tertiary",onClick:i},d({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(Le.Button,{onClick:J},d({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};jt.propTypes={actions:r().arrayOf(r().shape({actionId:r().string.isRequired,checkboxName:r().string,hasSomeActionsSelected:r().bool.isRequired,hasAllActionsSelected:r().bool,isDisplayed:r().bool.isRequired,label:r().string})).isRequired,headerBreadCrumbs:r().arrayOf(r().string).isRequired,isFormDisabled:r().bool.isRequired,onClosed:r().func.isRequired,onToggle:r().func.isRequired};const Nt=jt,rt=`${120/16}rem`,Ot=`${200/16}rem`,ut=`${53/16}rem`,qe=P.default.div`
  width: ${rt};
`,Wt=(0,P.default)(z.Flex)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;var Dt=Object.defineProperty,an=Object.getOwnPropertySymbols,zn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,bt=(o,t,n)=>t in o?Dt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,rn=(o,t)=>{for(var n in t||(t={}))zn.call(t,n)&&bt(o,n,t[n]);if(an)for(var n of an(t))sn.call(t,n)&&bt(o,n,t[n]);return o};const ft=({children:o,isCollapsable:t,isActive:n,isFormDisabled:s,label:i,onChange:d,onClick:m,checkboxName:g,someChecked:E,value:b})=>{const{formatMessage:S}=(0,K.useIntl)();return e.createElement(z.Flex,{alignItems:"center",paddingLeft:6,style:{width:Ot,flexShrink:0}},e.createElement(I.Box,{paddingRight:2},e.createElement(Ee.BaseCheckbox,{name:g,"aria-label":S({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:s,onValueChange:x=>d({target:{name:g,value:x}}),indeterminate:E,value:b})),e.createElement(Wt,rn({title:i,alignItems:"center",isCollapsable:t},t&&{onClick:m,"aria-expanded":n,onKeyDown:({key:x})=>(x==="Enter"||x===" ")&&m(),tabIndex:0,role:"button"}),e.createElement(G.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},Z()(i)),o))};ft.defaultProps={children:null,checkboxName:"",onChange(){},value:!1,someChecked:!1,isCollapsable:!1},ft.propTypes={checkboxName:r().string,children:r().node,label:r().string.isRequired,isCollapsable:r().bool,isFormDisabled:r().bool.isRequired,onChange:r().func,onClick:r().func.isRequired,someChecked:r().bool,value:r().bool,isActive:r().bool.isRequired};const ln=(0,e.memo)(ft),$t=o=>(0,f.isObject)(o)?(0,f.flattenDeep)(Object.values(o).map(t=>(0,f.isObject)(t)?$t(t):t)):[],pt=$t,Ut=o=>o?Object.keys(o).reduce((t,n)=>(n!=="conditions"&&(t[n]=o[n]),t),{}):null,nt=o=>{const t=Ut(o),n=pt(t);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const s=n.every(d=>d),i=n.some(d=>d)&&!s;return{hasAllActionsSelected:s,hasSomeActionsSelected:i}},kt=(o,t,n)=>o.map(({actionId:s,isDisplayed:i,applyToProperties:d,label:m})=>{if(!i)return{actionId:s,hasSomeActionsSelected:!1,isDisplayed:i};const g=[...n.split(".."),s],E=(0,f.isEmpty)(d)?[...g,"properties","enabled"]:g,b=E.join(".."),S=(0,f.get)(t,[...g,"conditions"],null),x=pt(S).some(J=>J);if((0,f.isEmpty)(d)){const J=(0,f.get)(t,E,!1);return{actionId:s,checkboxName:b,hasAllActionsSelected:J,hasConditions:x,hasSomeActionsSelected:J,isDisplayed:i,isParentCheckbox:!1,label:m,pathToConditionsObject:g}}const B=(0,f.get)(t,E,null),{hasAllActionsSelected:Q,hasSomeActionsSelected:w}=nt(B);return{actionId:s,checkboxName:b,hasAllActionsSelected:Q,hasConditions:x,hasSomeActionsSelected:w,isDisplayed:i,isParentCheckbox:!0,label:m,pathToConditionsObject:g}});var cn=a(60672),dn=a.n(cn);const ht=(0,P.default)(dn())`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,mt=o=>`
  ${G.Typography} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${ht} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;var Vt=function(){return window&&window.strapi&&window.strapi.isEE?a(68464).Z:a(35123).Z}(),zt=function o(t,n){return`
  `.concat(xt,` {
    background-color: `).concat(t.colors.primary100,`;
    color: `).concat(t.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(pn,` {
    display: flex;
  }
  `).concat(je,` {
    display: block;
  }
  &:hover {
   `).concat(mt(t),`
  }

  &:focus-within {
    `).concat(function(s){var i=s.theme,d=s.isActive;return o(i,d)},`
  }
  
`)},xt=P.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],ut,function(o){var t=o.isGrey,n=o.theme;return t?n.colors.neutral100:n.colors.neutral0}),un=P.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],je,function(o){var t=o.isActive,n=o.theme;return t&&zt(n,t)},function(o){var t=o.theme,n=o.isActive;return zt(t,n)}),Gt=(0,P.default)(z.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],rt),pn=(0,P.default)(I.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(o){var t=o.theme;return t.colors.primary600}),Mt=P.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(o){var t=o.theme;return t.colors.primary600}),Zt=(0,P.default)(I.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),Ht=function(t){var n=t.availableActions,s=t.isActive,i=t.isGrey,d=t.isFormDisabled,m=t.label,g=t.onClickToggle,E=t.pathToData,b=(0,e.useState)(!1),S=(0,X.Z)(b,2),x=S[0],B=S[1],Q=(0,K.useIntl)(),w=Q.formatMessage,J=(0,q.$_)(),L=J.modifiedData,N=J.onChangeParentCheckbox,te=J.onChangeSimpleCheckbox,ye=function(){B(function(Pe){return!Pe})},Ke=function(){B(!1)},De=ce()(L,E.split(".."),{}),Re=(0,e.useMemo)(function(){return Object.keys(De).reduce(function(ie,Pe){return ie[Pe]=se()(De[Pe],"conditions"),ie},{})},[De]),Ie=nt(Re),xe=Ie.hasAllActionsSelected,Ct=Ie.hasSomeActionsSelected,ve=(0,e.useMemo)(function(){return kt(n,L,E)},[n,L,E]),Fe=ve.some(function(ie){var Pe=ie.hasConditions;return Pe});return e.createElement(un,{isActive:s},e.createElement(xt,{isGrey:i},e.createElement(ln,{isCollapsable:!0,isFormDisabled:d,label:m,checkboxName:E,onChange:N,onClick:g,someChecked:Ct,value:xe,isActive:s},e.createElement(pn,{paddingLeft:2},s?e.createElement(ze(),null):e.createElement(Ve(),null))),e.createElement(z.Flex,{style:{flex:1}},ve.map(function(ie){var Pe=ie.actionId,Oe=ie.hasConditions,Be=ie.hasAllActionsSelected,We=ie.hasSomeActionsSelected,gt=ie.isDisplayed,ke=ie.isParentCheckbox,dt=ie.checkboxName,Tt=ie.label;return gt?ke?e.createElement(Gt,{key:Pe,justifyContent:"center",alignItems:"center"},Oe&&e.createElement(Mt,null),e.createElement(Ee.BaseCheckbox,{disabled:d||Vt,name:dt,"aria-label":w({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(Tt," ").concat(m)}),onValueChange:function(Et){N({target:{name:dt,value:Et}})},indeterminate:We,value:Be})):e.createElement(Gt,{key:Pe,justifyContent:"center",alignItems:"center"},Oe&&e.createElement(Mt,null),e.createElement(Ee.BaseCheckbox,{disabled:d||Vt,indeterminate:Oe,name:dt,onValueChange:function(Et){te({target:{name:dt,value:Et}})},value:Be})):e.createElement(qe,{key:Pe})})),x&&e.createElement(Nt,{headerBreadCrumbs:[m,"Settings.permissions.conditions.conditions"],actions:ve,isFormDisabled:d,onClosed:Ke,onToggle:ye})),e.createElement(Zt,null,e.createElement(je,{onClick:ye,hasConditions:Fe})))};Ht.propTypes={availableActions:r().array.isRequired,isActive:r().bool.isRequired,isGrey:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggle:r().func.isRequired,pathToData:r().string.isRequired};const mn=Ht,gn=(o,t)=>o.map(n=>{const s=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(t)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:s}}),Kt=(0,P.default)(z.Flex)`
  width: ${rt};
  flex-shrink: 0;
`,fn=(0,P.default)(z.Flex)`
  width: ${Ot};
  height: ${ut};
  flex-shrink: 0;
`,hn=({headers:o,label:t})=>{const{formatMessage:n}=(0,K.useIntl)(),s=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:t});return e.createElement(z.Flex,null,e.createElement(fn,{alignItems:"center",paddingLeft:6},e.createElement(G.Typography,{variant:"sigma",textColor:"neutral500"},s)),o.map(i=>i.isActionRelatedToCurrentProperty?e.createElement(Kt,{justifyContent:"center",key:i.label},e.createElement(G.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):e.createElement(Kt,{key:i.label})))};hn.propTypes={headers:r().arrayOf(r().shape({label:r().string.isRequired,isActionRelatedToCurrentProperty:r().bool.isRequired})).isRequired,label:r().string.isRequired};const yn=hn;var St=a(21930);const vn=P.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`,Xt=()=>e.createElement(vn,null,"*");var Yn=Object.defineProperty,Cn=Object.defineProperties,Yt=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,Lt=(o,t,n)=>t in o?Yn(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,bn=(o,t)=>{for(var n in t||(t={}))En.call(t,n)&&Lt(o,n,t[n]);if(_e)for(var n of _e(t))he.call(t,n)&&Lt(o,n,t[n]);return o},Sn=(o,t)=>Cn(o,Yt(t));const Pn=(o,t)=>o.map(n=>{const s=Array.isArray(n.subjects)&&n.subjects.indexOf(t)!==-1;return Sn(bn({},n),{isDisplayed:s})});var Tn=a(20011),yt=Object.defineProperty,Qt=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,It=(o,t,n)=>t in o?yt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,On=(o,t)=>{for(var n in t||(t={}))An.call(t,n)&&It(o,n,t[n]);if(Qt)for(var n of Qt(t))Rn.call(t,n)&&It(o,n,t[n]);return o};const Dn=(0,P.default)(I.Box)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,Jt=P.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:t})=>o.colors[t]};
  }
`,Pt=o=>e.createElement(Dn,null,e.createElement(Jt,On({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));Pt.defaultProps={fill:"primary200"},Pt.propTypes={fill:r().string};const qt=(0,e.memo)(Pt);var Ft=function(){return window&&window.strapi&&window.strapi.isEE?a(19665).Z:a(52124).Z}(),_t=(0,P.default)(z.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],rt),en=(0,P.default)(z.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],ut),xn=(0,P.default)(I.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),p=(0,P.default)(I.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(o){var t=o.isVisible,n=o.theme;return t?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),c=(0,P.default)(z.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(o){var t=o.theme;return t.spaces[4]},function(o){var t=o.level;return 145-t*36},function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(ht,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(mt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&mt(n)}),l=P.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(o){var t=o.theme;return t.spaces[2]},function(o){var t=o.theme;return t.spaces[2]},4/16,function(o){var t=o.theme;return t.colors.primary200}),h=function o(t){var n=t.childrenForm,s=t.isFormDisabled,i=t.recursiveLevel,d=t.pathToDataFromActionRow,m=t.propertyActions,g=t.parentName,E=t.propertyName,b=(0,K.useIntl)(),S=b.formatMessage,x=(0,q.$_)(),B=x.modifiedData,Q=x.onChangeParentCheckbox,w=x.onChangeSimpleCheckbox,J=(0,e.useState)(null),L=(0,X.Z)(J,2),N=L[0],te=L[1],ye=function(Re){te(function(Ie){return Ie===Re?null:Re})},Ke=(0,e.useMemo)(function(){return N?n.find(function(De){var Re=De.value;return Re===N}):null},[N,n]);return e.createElement(xn,null,e.createElement(l,null),n.map(function(De,Re){var Ie=De.label,xe=De.value,Ct=De.required,ve=De.children,Fe=Re+1<n.length,ie=Array.isArray(ve),Pe=N===xe;return e.createElement(p,{key:xe,isVisible:Fe},e.createElement(en,null,e.createElement(qt,{color:"primary200"}),e.createElement(z.Flex,{style:{flex:1}},e.createElement(c,{level:i,isActive:Pe,isCollapsable:ie},e.createElement(Wt,(0,Tn.Z)({alignItems:"center",isCollapsable:ie},ie&&{onClick:function(){return ye(xe)},"aria-expanded":Pe,onKeyDown:function(Be){var We=Be.key;return(We==="Enter"||We===" ")&&ye(xe)},tabIndex:0,role:"button"},{title:Ie}),e.createElement(G.Typography,{ellipsis:!0},Z()(Ie)),Ct&&e.createElement(Xt,null),e.createElement(ht,{$isActive:Pe}))),e.createElement(z.Flex,{style:{flex:1}},m.map(function(Oe){var Be=Oe.actionId,We=Oe.label,gt=Oe.isActionRelatedToCurrentProperty;if(!gt)return e.createElement(qe,{key:Be});var ke=[].concat((0,St.Z)(d.split("..")),[Be,"properties",E],(0,St.Z)(g.split("..")),[xe]),dt=ce()(B,ke,!1);if(!ve)return e.createElement(_t,{key:We,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{disabled:s||Ft,name:ke.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Ie," ").concat(We)}),onValueChange:function(Bt){w({target:{name:ke.join(".."),value:Bt}})},value:dt}));var Tt=nt(dt),At=Tt.hasAllActionsSelected,Et=Tt.hasSomeActionsSelected;return e.createElement(_t,{key:We,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{key:We,disabled:s||Ft,name:ke.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Ie," ").concat(We)}),onValueChange:function(Bt){Q({target:{name:ke.join(".."),value:Bt}})},value:At,indeterminate:Et}))})))),Ke&&Pe&&e.createElement(I.Box,{paddingBottom:2},e.createElement(o,{isFormDisabled:s,parentName:"".concat(g,"..").concat(xe),pathToDataFromActionRow:d,propertyActions:m,propertyName:E,recursiveLevel:i+1,childrenForm:Ke.children})))}))};h.propTypes={childrenForm:r().array.isRequired,isFormDisabled:r().bool.isRequired,parentName:r().string.isRequired,pathToDataFromActionRow:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,recursiveLevel:r().number.isRequired};const u=(0,e.memo)(h),T=o=>o.reduce((n,s)=>(s.isActionRelatedToCurrentProperty&&n.push(s.actionId),n),[]),A=(o,t,n,s,i)=>{const m=T(o).reduce((g,E)=>{const b=[...n.split(".."),E,"properties",s,i],S=(0,f.get)(t,b,!1);return g[E]=S,g},{});return nt(m)};var v=function(){return window&&window.strapi&&window.strapi.isEE?a(32741).Z:a(18318).Z}(),R=(0,P.default)(z.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],rt),Se=(0,P.default)(z.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],ut,function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(ht,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(mt(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&mt(n)}),re=function(t){var n=t.childrenForm,s=t.label,i=t.isFormDisabled,d=t.name,m=t.required,g=t.pathToData,E=t.propertyActions,b=t.propertyName,S=t.isOdd,x=(0,K.useIntl)(),B=x.formatMessage,Q=(0,e.useState)(null),w=(0,X.Z)(Q,2),J=w[0],L=w[1],N=(0,q.$_)(),te=N.modifiedData,ye=N.onChangeCollectionTypeLeftActionRowCheckbox,Ke=N.onChangeParentCheckbox,De=N.onChangeSimpleCheckbox,Re=J===d,Ie=(0,e.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),xe=Ie.length>0,Ct=(0,e.useCallback)(function(){xe&&L(function(Oe){return Oe===d?null:d})},[xe,d]),ve=function(Be){var We=Be.target.value;ye(g,b,d,We)},Fe=(0,e.useMemo)(function(){return A(E,te,g,b,d)},[E,te,g,b,d]),ie=Fe.hasAllActionsSelected,Pe=Fe.hasSomeActionsSelected;return e.createElement(e.Fragment,null,e.createElement(Se,{alignItems:"center",isCollapsable:xe,isActive:Re,background:S?"neutral100":"neutral0"},e.createElement(z.Flex,null,e.createElement(ln,{onChange:ve,onClick:Ct,isCollapsable:xe,isFormDisabled:i,label:s,someChecked:Pe,value:ie,isActive:Re},m&&e.createElement(Xt,null),e.createElement(ht,{$isActive:Re})),e.createElement(z.Flex,null,E.map(function(Oe){var Be=Oe.label,We=Oe.isActionRelatedToCurrentProperty,gt=Oe.actionId;if(!We)return e.createElement(qe,{key:Be});var ke=[].concat((0,St.Z)(g.split("..")),[gt,"properties",b,d]);if(!xe){var dt=ce()(te,ke,!1);return e.createElement(R,{key:gt,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{disabled:i||v,name:ke.join(".."),"aria-label":B({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(Be)}),onValueChange:function(kn){De({target:{name:ke.join(".."),value:kn}})},value:dt}))}var Tt=ce()(te,ke,{}),At=nt(Tt),Et=At.hasAllActionsSelected,Un=At.hasSomeActionsSelected;return e.createElement(R,{key:Be,justifyContent:"center",alignItems:"center"},e.createElement(Ee.BaseCheckbox,{disabled:i||v,name:ke.join(".."),onValueChange:function(kn){Ke({target:{name:ke.join(".."),value:kn}})},"aria-label":B({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(d," ").concat(Be)}),value:Et,indeterminate:Un}))})))),Re&&e.createElement(u,{childrenForm:Ie,isFormDisabled:i,parentName:d,pathToDataFromActionRow:g,propertyName:b,propertyActions:E,recursiveLevel:0}))};re.defaultProps={childrenForm:[],required:!1},re.propTypes={childrenForm:r().array,label:r().string.isRequired,isFormDisabled:r().bool.isRequired,name:r().string.isRequired,pathToData:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,required:r().bool,isOdd:r().bool.isRequired};const et=(0,e.memo)(re),vt=P.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,it=({availableActions:o,childrenForm:t,isFormDisabled:n,label:s,pathToData:i,propertyName:d})=>{const m=(0,e.useMemo)(()=>gn(o,d),[o,d]);return e.createElement(vt,null,e.createElement(yn,{label:s,headers:m}),e.createElement(I.Box,null,t.map(({children:g,label:E,value:b,required:S},x)=>e.createElement(et,{childrenForm:g,key:b,label:E,isFormDisabled:n,name:b,required:S,propertyActions:m,pathToData:i,propertyName:d,isOdd:x%2===0}))))};it.propTypes={childrenForm:r().array.isRequired,availableActions:r().array.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,pathToData:r().string.isRequired,propertyName:r().string.isRequired};const ot=it,ct=P.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:t})=>t&&`border: 1px solid ${o.colors.primary600};`}
`,Jn=({allActions:o,contentTypeName:t,label:n,index:s,isActive:i,isFormDisabled:d,onClickToggleCollapse:m,pathToData:g,properties:E})=>{const b=(0,e.useCallback)(()=>{m(t)},[t,m]),S=(0,e.useMemo)(()=>Pn(o,t),[o,t]);return e.createElement(ct,{isActive:i},e.createElement(mn,{availableActions:S,isActive:i,isGrey:s%2===0,isFormDisabled:d,label:n,onClickToggle:b,pathToData:g}),i&&E.map(({label:x,value:B,children:Q})=>e.createElement(ot,{availableActions:S,childrenForm:Q,isFormDisabled:d,label:x,pathToData:g,propertyName:B,key:B})))};Jn.propTypes={allActions:r().array.isRequired,contentTypeName:r().string.isRequired,index:r().number.isRequired,isActive:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggleCollapse:r().func.isRequired,pathToData:r().string.isRequired,properties:r().array.isRequired};const Uo=Jn,Mn=({actions:o,isFormDisabled:t,pathToData:n,subjects:s})=>{const[i,d]=(0,e.useState)(null),m=g=>{d(i===g?null:g)};return s.map(({uid:g,label:E,properties:b},S)=>e.createElement(Uo,{allActions:o,key:g,contentTypeName:g,label:E,isActive:i===g,isFormDisabled:t,index:S,onClickToggleCollapse:m,pathToData:`${n}..${g}`,properties:b}))};Mn.defaultProps={actions:[],subjects:[]},Mn.propTypes={actions:r().array.isRequired,isFormDisabled:r().bool.isRequired,pathToData:r().string.isRequired,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))};const ko=(0,e.memo)(Mn);var qn=a(90662);const Vo=o=>o.filter(({subjects:t})=>t&&t.length);var zo=Object.defineProperty,_n=Object.getOwnPropertySymbols,Go=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable,eo=(o,t,n)=>t in o?zo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,to=(o,t)=>{for(var n in t||(t={}))Go.call(t,n)&&eo(o,n,t[n]);if(_n)for(var n of _n(t))Zo.call(t,n)&&eo(o,n,t[n]);return o};const Ho=o=>o.map(({actionId:t})=>t),Ko=(o,t)=>o.reduce((n,s)=>(Object.keys(t).forEach(i=>{const d=(0,f.get)(t,[i,s],{}),m={[i]:Ut(d)};n[s]?n[s]=to(to({},n[s]),m):n[s]=m}),n),{}),Xo=(o,t)=>{const n=Ho(o),s=Ko(n,t);return Object.keys(s).reduce((d,m)=>(d[m]=nt(s[m]),d),{})};var Yo=function(){return window&&window.strapi&&window.strapi.isEE?a(36950).Z:a(61526).Z}(),Qo=(0,P.default)(qn.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],rt),Ln=function(t){var n=t.actions,s=t.isFormDisabled,i=t.kind,d=(0,K.useIntl)(),m=d.formatMessage,g=(0,q.$_)(),E=g.modifiedData,b=g.onChangeCollectionTypeGlobalActionCheckbox,S=(0,e.useMemo)(function(){return Vo(n)},[n]),x=(0,e.useMemo)(function(){return Xo(S,E[i])},[E,S,i]);return e.createElement(I.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:Ot}},e.createElement(qn.Stack,{horizontal:!0,spacing:0},S.map(function(B){var Q=B.label,w=B.actionId;return e.createElement(Qo,{key:w,spacing:3},e.createElement(G.Typography,{variant:"sigma",textColor:"neutral500"},m({id:"Settings.roles.form.permissions.".concat(Q.toLowerCase()),defaultMessage:Q})),e.createElement(Ee.BaseCheckbox,{disabled:s||Yo,onValueChange:function(L){b(i,w,L)},name:w,"aria-label":m({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:m({id:"Settings.roles.form.permissions.".concat(Q.toLowerCase()),defaultMessage:Q})}),value:ce()(x,[w,"hasAllActionsSelected"],!1),indeterminate:ce()(x,[w,"hasSomeActionsSelected"],!1)}))})))};Ln.defaultProps={actions:[]},Ln.propTypes={actions:r().arrayOf(r().shape({label:r().string.isRequired,actionId:r().string.isRequired,subjects:r().array.isRequired})),isFormDisabled:r().bool.isRequired,kind:r().string.isRequired};const Jo=(0,e.memo)(Ln),qo=(0,P.default)(I.Box)`
  overflow-x: auto;
`,no=({isFormDisabled:o,kind:t,layout:{actions:n,subjects:s}})=>{const i=le()([...s],"label");return e.createElement(qo,{background:"neutral0"},e.createElement(Jo,{actions:n,kind:t,isFormDisabled:o}),e.createElement(ko,{actions:n,isFormDisabled:o,pathToData:t,subjects:i}))};no.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().shape({actions:r().array,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))}).isRequired};const oo=(0,e.memo)(no);var _o=a(66694);const ao=({children:o,value:t})=>e.createElement(_o.$l.Provider,{value:t},o);ao.propTypes={children:r().node.isRequired,value:r().exact({availableConditions:r().array.isRequired,modifiedData:r().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:r().func.isRequired,onChangeConditions:r().func.isRequired,onChangeSimpleCheckbox:r().func.isRequired,onChangeParentCheckbox:r().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:r().func.isRequired}).isRequired};const ea=ao;var In=a(12001),so=a(78330),ro=a(52111),ta=Object.defineProperty,na=Object.defineProperties,oa=Object.getOwnPropertyDescriptors,io=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,lo=(o,t,n)=>t in o?ta(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,ra=(o,t)=>{for(var n in t||(t={}))aa.call(t,n)&&lo(o,n,t[n]);if(io)for(var n of io(t))sa.call(t,n)&&lo(o,n,t[n]);return o},ia=(o,t)=>na(o,oa(t));const la=(o,t,n)=>o.map(s=>{const i=[...n,s.action,"properties","enabled"],d=(0,f.get)(t,i,!1),m=(0,f.get)(t,[...n,s.action,"conditions"],{}),g=pt(m).some(E=>E);return ia(ra({},s),{isDisplayed:d,checkboxName:i.join(".."),hasSomeActionsSelected:d,value:d,hasConditions:g,label:s.displayName,actionId:s.action,pathToConditionsObject:[...n,s.action]})}),ca=o=>{const t=Object.entries(o).reduce((s,i)=>{const[d,{conditions:m}]=i;return s[d]=m,s},{});return pt(t).some(s=>s)};var Fn=function(){return window&&window.strapi&&window.strapi.isEE?a(96556).Z:a(16437).Z}(),da=P.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(o){var t=o.theme;return t.colors.neutral150}),ua=P.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(o){var t=o.hasConditions,n=o.disabled,s=o.theme;return t&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?s.colors.neutral100:s.colors.primary600,`;
    }
  `)}),co=function(t){var n=t.categoryName,s=t.isFormDisabled,i=t.subCategoryName,d=t.actions,m=t.pathToData,g=(0,e.useState)(!1),E=(0,X.Z)(g,2),b=E[0],S=E[1],x=(0,q.$_)(),B=x.modifiedData,Q=x.onChangeParentCheckbox,w=x.onChangeSimpleCheckbox,J=(0,K.useIntl)(),L=J.formatMessage,N=ce()(B,m,{}),te=(0,e.useMemo)(function(){return Object.keys(N).reduce(function(ve,Fe){return ve[Fe]=Ut(N[Fe]),ve},{})},[N]),ye=nt(te),Ke=ye.hasAllActionsSelected,De=ye.hasSomeActionsSelected,Re=function(){S(function(Fe){return!Fe})},Ie=function(){S(!1)},xe=la(d,B,m),Ct=ca(ce()(B,(0,St.Z)(m),{}));return e.createElement(e.Fragment,null,e.createElement(I.Box,null,e.createElement(z.Flex,{justifyContent:"space-between",alignItems:"center"},e.createElement(I.Box,{paddingRight:4},e.createElement(G.Typography,{variant:"sigma",textColor:"neutral600"},i)),e.createElement(da,null),e.createElement(I.Box,{paddingLeft:4},e.createElement(ro.Checkbox,{name:m.join(".."),disabled:s||Fn,onValueChange:function(Fe){Q({target:{name:m.join(".."),value:Fe}})},indeterminate:De,value:Ke},L({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(z.Flex,{paddingTop:6,paddingBottom:6},e.createElement(so.Grid,{gap:2,style:{flex:1}},xe.map(function(ve){var Fe=ve.checkboxName,ie=ve.value,Pe=ve.action,Oe=ve.displayName,Be=ve.hasConditions;return e.createElement(so.GridItem,{col:3,key:Pe},e.createElement(ua,{disabled:s||Fn,hasConditions:Be},e.createElement(ro.Checkbox,{name:Fe,disabled:s||Fn,onValueChange:function(gt){w({target:{name:Fe,value:gt}})},value:ie},Oe)))})),e.createElement(je,{hasConditions:Ct,onClick:Re}))),b&&e.createElement(Nt,{headerBreadCrumbs:[n,i],actions:xe,isFormDisabled:s,onClosed:Ie,onToggle:Re}))};co.propTypes={actions:r().array.isRequired,categoryName:r().string.isRequired,isFormDisabled:r().bool.isRequired,subCategoryName:r().string.isRequired,pathToData:r().array.isRequired};const pa=co,Bn=({childrenForm:o,kind:t,name:n,isOpen:s,isFormDisabled:i,isWhite:d,onOpenCategory:m,pathToData:g})=>{const{formatMessage:E}=(0,K.useIntl)(),b=()=>{m(n)},S=(0,e.useMemo)(()=>n.split("::").pop(),[n]);return e.createElement(In.Accordion,{expanded:s,onToggle:b,id:`accordion-${n}`,variant:d?"primary":"secondary"},e.createElement(In.AccordionToggle,{title:Z()(S),description:`${E({id:"Settings.permissions.category"},{category:S})} ${t==="plugins"?"plugin":t}`}),e.createElement(In.AccordionContent,null,e.createElement(I.Box,{padding:6},o.map(({actions:x,subCategoryName:B,subCategoryId:Q})=>e.createElement(pa,{key:B,actions:x,categoryName:S,isFormDisabled:i,subCategoryName:B,pathToData:[...g,Q]})))))};Bn.defaultProps={},Bn.propTypes={childrenForm:r().array.isRequired,isOpen:r().bool.isRequired,isFormDisabled:r().bool.isRequired,isWhite:r().bool.isRequired,kind:r().string.isRequired,name:r().string.isRequired,onOpenCategory:r().func.isRequired,pathToData:r().array.isRequired};const ma=Bn,uo=({isFormDisabled:o,kind:t,layout:n})=>{const[s,i]=(0,e.useState)(null),d=m=>{i(m===s?null:m)};return e.createElement(I.Box,{padding:6,background:"neutral0"},n.map(({category:m,categoryId:g,childrenForm:E},b)=>e.createElement(ma,{key:m,childrenForm:E,kind:t,isFormDisabled:o,isOpen:s===m,isWhite:b%2===1,name:m,onOpenCategory:d,pathToData:[t,g]})))};uo.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().arrayOf(r().shape({category:r().string.isRequired,categoryId:r().string.isRequired,childrenForm:r().arrayOf(r().shape({actions:r().array.isRequired})).isRequired}).isRequired).isRequired};const po=uo,mo=(o,t,n)=>o.find(s=>s.action===t&&s.subject===n);var ga=Object.defineProperty,fa=Object.defineProperties,ha=Object.getOwnPropertyDescriptors,go=Object.getOwnPropertySymbols,ya=Object.prototype.hasOwnProperty,va=Object.prototype.propertyIsEnumerable,fo=(o,t,n)=>t in o?ga(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,ho=(o,t)=>{for(var n in t||(t={}))ya.call(t,n)&&fo(o,n,t[n]);if(go)for(var n of go(t))va.call(t,n)&&fo(o,n,t[n]);return o},yo=(o,t)=>fa(o,ha(t));const vo=(o,t=[])=>o.reduce((n,s)=>(n[s.id]=t.indexOf(s.id)!==-1,n),{}),Co=({children:o},t,n="")=>o.reduce((s,i)=>{if(i.children)return yo(ho({},s),{[i.value]:Co(i,t,`${n}${i.value}.`)});const d=t.indexOf(`${n}${i.value}`)!==-1;return s[i.value]=d,s},{}),Ca=(o,t,n)=>o.reduce((s,i)=>{const d=t.properties.find(({value:m})=>m===i);if(d){const m=(0,f.get)(n,["properties",d.value],[]),g=Co(d,m);s.properties[i]=g}return s},{properties:{}}),Ea=(o,t)=>t.reduce((n,s)=>{const i=o.find(({uid:d})=>d===s)||null;return i&&(n[s]=i),n},{}),Eo=({subjects:o},t,n,s=[])=>t.reduce((i,d)=>{const m=d.subjects,g=Ea(o,m);if((0,f.isEmpty)(g))return i;const E=Object.keys(g).reduce((b,S)=>{const{actionId:x,applyToProperties:B}=d,J=g[S].properties.map(({value:ye})=>ye).every(ye=>(B||[]).indexOf(ye)===-1),L=mo(s,x,S),N=vo(n,(0,f.get)(L,"conditions",[]));if((0,f.isEmpty)(B)||J)return(0,f.set)(b,[S,x],{properties:{enabled:L!==void 0},conditions:N}),b;const te=Ca(B,g[S],L);return(0,f.set)(b,[S,x],yo(ho({},te),{conditions:N})),b},{});return(0,f.merge)(i,E)},{}),ba=(o,t,n)=>o.reduce((s,i)=>{const d=mo(n,i.action,null);return s[i.action]={properties:{enabled:d!==void 0},conditions:vo(t,(0,f.get)(d,"conditions",[]))},s},{}),Sa=(o,t,n)=>o.reduce((s,i)=>(s[i.subCategoryId]=ba(i.actions,t,n),s),{}),bo=(o,t,n=[])=>o.reduce((s,{categoryId:i,childrenForm:d})=>{const m=Sa(d,t,n);return s[i]=m,s},{}),So=o=>o.split(" ").join("-"),Po=(o,t)=>(0,f.chain)(o).groupBy(t).map((n,s)=>({category:s,categoryId:So(s),childrenForm:(0,f.chain)(n).groupBy("subCategory").map((i,d)=>({subCategoryName:d,subCategoryId:So(d),actions:i})).value()})).value(),Pa=(o,t)=>{const{conditions:n,sections:{collectionTypes:s,singleTypes:i,plugins:d,settings:m}}=o,g={collectionTypes:s,singleTypes:i,plugins:Po(d,"plugin"),settings:Po(m,"category")},E={collectionTypes:Eo(s,s.actions||[],n,t),singleTypes:Eo(i,i.actions||[],n,t),plugins:bo(g.plugins,n,t),settings:bo(g.settings,n,t)};return{initialData:E,modifiedData:E,layouts:g}};var Ta=Object.defineProperty,Aa=Object.defineProperties,Ra=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,Oa=Object.prototype.hasOwnProperty,Da=Object.prototype.propertyIsEnumerable,Ao=(o,t,n)=>t in o?Ta(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,wn=(o,t)=>{for(var n in t||(t={}))Oa.call(t,n)&&Ao(o,n,t[n]);if(To)for(var n of To(t))Da.call(t,n)&&Ao(o,n,t[n]);return o},jn=(o,t)=>Aa(o,Ra(t));const Ro=o=>Object.keys(o).reduce((t,n)=>{const s=o[n];if((0,f.isObject)(s)&&!(0,f.has)(s,"conditions"))return jn(wn({},t),{[n]:Ro(s)});if((0,f.isObject)(s)&&(0,f.has)(s,"conditions")&&!pt((0,f.omit)(s,"conditions")).some(d=>d)){const d=Object.keys(s.conditions).reduce((m,g)=>(m[g]=!1,m),{});return jn(wn({},t),{[n]:jn(wn({},s),{conditions:d})})}return t[n]=s,t},{}),Nn=Ro;var xa=Object.defineProperty,Ma=Object.defineProperties,La=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,Do=(o,t,n)=>t in o?xa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Ba=(o,t)=>{for(var n in t||(t={}))Ia.call(t,n)&&Do(o,n,t[n]);if(Oo)for(var n of Oo(t))Fa.call(t,n)&&Do(o,n,t[n]);return o},wa=(o,t)=>Ma(o,La(t));const xo=(o,t)=>Object.keys(o).reduce((n,s)=>{const i=o[s];return s==="conditions"?(n[s]=i,n):(0,f.isObject)(i)?wa(Ba({},n),{[s]:xo(i,t)}):(n[s]=t,n)},{}),tn=xo;var ja=Object.defineProperty,Na=Object.defineProperties,Wa=Object.getOwnPropertyDescriptors,Mo=Object.getOwnPropertySymbols,$a=Object.prototype.hasOwnProperty,Ua=Object.prototype.propertyIsEnumerable,Lo=(o,t,n)=>t in o?ja(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,ka=(o,t)=>{for(var n in t||(t={}))$a.call(t,n)&&Lo(o,n,t[n]);if(Mo)for(var n of Mo(t))Ua.call(t,n)&&Lo(o,n,t[n]);return o},Va=(o,t)=>Na(o,Wa(t));const za={initialData:{},modifiedData:{},layouts:{}},Ga=(o,t)=>(0,Qe.default)(o,n=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:s,actionId:i,value:d}=t,m=["modifiedData",s];Object.keys((0,f.get)(o,m)).forEach(g=>{const E=(0,f.get)(o,[...m,g,i],void 0);if(E){let b=tn(E,d);if(!d&&b.conditions){const S=tn(b.conditions,!1);b=Va(ka({},b),{conditions:S})}(0,f.set)(n,[...m,g,i],b)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:s,propertyName:i,rowName:d,value:m}=t;let g=(0,f.cloneDeep)(o.modifiedData);const E=s.split(".."),b=(0,f.get)(g,E,{});Object.keys(b).forEach(S=>{if((0,f.has)(b[S],`properties.${i}`)){const x=(0,f.get)(b,[S,"properties",i,d]),B=[...E,S,"properties",i,d];if(!(0,f.isObject)(x))(0,f.set)(g,B,m);else{const Q=tn(x,m);(0,f.set)(g,B,Q)}}}),m||(g=Nn(g)),(0,f.set)(n,"modifiedData",g);break}case"ON_CHANGE_CONDITIONS":{Object.entries(t.conditions).forEach(s=>{const[i,d]=s;(0,f.set)(n,["modifiedData",...i.split(".."),"conditions"],d)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let s=(0,f.cloneDeep)(o.modifiedData);(0,f.set)(s,[...t.keys.split("..")],t.value),t.value||(s=Nn(s)),(0,f.set)(n,"modifiedData",s);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:s,value:i}=t,d=[...s.split("..")];let m=(0,f.cloneDeep)(o.modifiedData);const g=(0,f.get)(m,d,{}),E=tn(g,i);(0,f.set)(m,d,E),i||(m=Nn(m)),(0,f.set)(n,["modifiedData"],m);break}case"RESET_FORM":{n.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=o.modifiedData;break}default:return n}}),Wn=o=>Object.entries(o).filter(([,t])=>t).map(([t])=>t),Za=o=>{const[t,{conditions:n}]=o;return{action:t,subject:null,conditions:Wn(n),properties:{}}},Ha=o=>Object.values(o).reduce((t,n)=>{const s=Object.entries(n).reduce((i,d)=>{const[,{properties:{enabled:m}}]=d;if(!m)return i;const g=Za(d);return i.push(g),i},[]);return[...t,...s]},[]),Io=o=>Object.values(o).reduce((t,n)=>{const s=Ha(n);return[...t,...s]},[]),Fo=(o,t="")=>Object.entries(o).reduce((n,s)=>{const[i,d]=s;return(0,f.isObject)(d)?[...n,...Fo(d,`${t}${i}.`)]:(d&&!(0,f.isObject)(d)&&n.push(`${t}${i}`),n)},[]),Ka=(o,t,{conditions:n,properties:s})=>Object.entries(s).reduce((i,d)=>{const[m,g]=d;return i.properties[m]=Fo(g),i},{action:o,subject:t,conditions:Wn(n),properties:{}}),Xa=(o,t,{conditions:n})=>({action:o,subject:t,properties:{},conditions:Wn(n)}),Ya=(o,t)=>Object.entries(t).reduce((s,i)=>{const[d,m]=i;if(!pt(m).some(b=>b))return s;if(!(0,f.has)(m,"properties.enabled")){const b=Ka(d,o,m);return[...s,b]}if(!m.properties.enabled)return s;const E=Xa(d,o,m);return s.push(E),s},[]),Bo=o=>Object.entries(o).reduce((n,s)=>{const[i,d]=s,m=Ya(i,d);return[...n,...m]},[]),Qa=o=>{const t=Io(o.plugins),n=Io(o.settings),s=Bo(o.collectionTypes),i=Bo(o.singleTypes);return[...t,...n,...s,...i]},Ja=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var qa=Object.defineProperty,wo=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable,jo=(o,t,n)=>t in o?qa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,No=(o,t)=>{for(var n in t||(t={}))_a.call(t,n)&&jo(o,n,t[n]);if(wo)for(var n of wo(t))es.call(t,n)&&jo(o,n,t[n]);return o};const $n=(0,e.forwardRef)(({layout:o,isFormDisabled:t,permissions:n},s)=>{const[{initialData:i,layouts:d,modifiedData:m},g]=(0,e.useReducer)(Ga,za,()=>Pa(o,n)),{formatMessage:E}=(0,K.useIntl)();(0,e.useImperativeHandle)(s,()=>({getPermissions(){const w=(0,ne.difference)(i.collectionTypes,m.collectionTypes),J=(0,ne.difference)(i.singleTypes,m.singleTypes),L=No(No({},w),J);let N;return we()(L)?N=!1:N=Object.values(L).some(te=>Object.values(te).some(ye=>Ce()(ye,"conditions"))),{permissionsToSend:Qa(m),didUpdateConditions:N}},resetForm(){g({type:"RESET_FORM"})},setFormAfterSubmit(){g({type:"SET_FORM_AFTER_SUBMIT"})}}));const b=(w,J,L,N)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:w,propertyName:J,rowName:L,value:N})},S=(w,J,L)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:w,actionId:J,value:L})},x=w=>{g({type:"ON_CHANGE_CONDITIONS",conditions:w})},B=(0,e.useCallback)(({target:{name:w,value:J}})=>{g({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:w,value:J})},[]),Q=(0,e.useCallback)(({target:{name:w,value:J}})=>{g({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:w,value:J})},[]);return e.createElement(ea,{value:{availableConditions:o.conditions,modifiedData:m,onChangeConditions:x,onChangeSimpleCheckbox:B,onChangeParentCheckbox:Q,onChangeCollectionTypeLeftActionRowCheckbox:b,onChangeCollectionTypeGlobalActionCheckbox:S}},e.createElement($.TabGroup,{id:"tabs",label:E({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement($.Tabs,null,Ja.map(w=>e.createElement($.Tab,{key:w.id},E({id:w.labelId,defaultMessage:w.defaultMessage})))),e.createElement($.TabPanels,{style:{position:"relative"}},e.createElement($.TabPanel,null,e.createElement(oo,{layout:d.collectionTypes,kind:"collectionTypes",isFormDisabled:t})),e.createElement($.TabPanel,null,e.createElement(oo,{layout:d.singleTypes,kind:"singleTypes",isFormDisabled:t})),e.createElement($.TabPanel,null,e.createElement(po,{layout:d.plugins,kind:"plugins",isFormDisabled:t})),e.createElement($.TabPanel,null,e.createElement(po,{layout:d.settings,kind:"settings",isFormDisabled:t})))))});$n.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},$n.propTypes={layout:r().object,isFormDisabled:r().bool.isRequired,permissions:r().array};const ts=(0,e.memo)($n)},16437:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!0},78522:(ue,O,a)=>{a.d(O,{Z:()=>e});const e=()=>"todo empty role"},80779:(ue,O,a)=>{a.d(O,{Z:()=>Ge});var e=a(32735),C=a(60216),r=a.n(C),ne=a(9808),$=a.n(ne),Me=a(19192),Ce=a.n(Me),fe=a(53214),we=a.n(fe),K=a(95602),I=a.n(K),P=a(20763),U=a.n(P),le=a(88425),X=a.n(le),ee=a(5636),Ve=Object.defineProperty,$e=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,z=(se,q,ae)=>q in se?Ve(se,q,{enumerable:!0,configurable:!0,writable:!0,value:ae}):se[q]=ae,y=(se,q)=>{for(var ae in q||(q={}))ze.call(q,ae)&&z(se,ae,q[ae]);if($e)for(var ae of $e(q))Ee.call(q,ae)&&z(se,ae,q[ae]);return se};const ce=({id:se,name:q,description:ae,usersCount:lt,icons:Le,rowIndex:Xe})=>{const{formatMessage:Ye}=(0,ee.useIntl)(),je=Ye({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:lt});return e.createElement(fe.Tr,y({"aria-rowindex":Xe,key:se},(0,le.onRowClick)({fn:Le[1].onClick})),e.createElement(fe.Td,{maxWidth:(0,le.pxToRem)(130)},e.createElement(K.Typography,{ellipsis:!0,textColor:"neutral800"},q)),e.createElement(fe.Td,{maxWidth:(0,le.pxToRem)(250)},e.createElement(K.Typography,{ellipsis:!0,textColor:"neutral800"},ae)),e.createElement(fe.Td,null,e.createElement(K.Typography,{textColor:"neutral800"},je)),e.createElement(fe.Td,null,e.createElement(Me.Flex,y({justifyContent:"flex-end"},le.stopPropagation),Le.map((pe,Ze)=>pe?e.createElement(ne.Box,{key:pe.label,paddingLeft:Ze===0?0:1},e.createElement(P.IconButton,{onClick:pe.onClick,label:pe.label,noBorder:!0,icon:pe.icon})):null))))};ce.propTypes={id:r().number.isRequired,name:r().string.isRequired,description:r().string.isRequired,usersCount:r().number.isRequired,icons:r().array.isRequired,rowIndex:r().number.isRequired};const Ge=ce},45677:(ue,O,a)=>{a.d(O,{Z:()=>Je});var e=a(32735),C=a(88425),r=a(83983),ne=a(58469),$=a(59290),Me=a.n($),Ce=a(76470),fe=a.n(Ce),we=a(95717),K=a.n(we),I=a(68192),P=a.n(I),U=a(44526),le=a(11856),X=a(53214),ee=a(95602),Ve=a(16540),$e=a(28004),ze=a(5636),Ee=a(5141),z=a(80779),y=a(78522),ce=a(60216),Ge=a.n(ce),se=a(19615),q=a(64410),ae=a(54742),lt=a(20763),Le=a(61541),Xe=a(9808),Ye=a(19192),je=a(90662),pe=a(82372),Ze=a.n(pe),G=a(94009),Qe=a.n(G);const j=a.p+"6d21938306785f176538.png",W=a.p+"617f9c948fa79e6d73bd.png",F=se.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:D})=>(0,C.setHexOpacity)(D.colors.neutral800,.2)};
  padding: 0 ${({theme:D})=>D.spaces[8]};
`,Z=(0,se.default)(Ye.Flex)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,de=(0,se.default)(je.Stack)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,k=(0,se.default)(Xe.Box)`
  position: absolute;
  right: ${({theme:D})=>D.spaces[4]};
  top: ${({theme:D})=>D.spaces[4]};
`,Y=({onClose:D,isOpen:H})=>{(0,C.useLockScroll)(H);const{formatMessage:f}=(0,ze.useIntl)();return H?e.createElement(q.Portal,null,e.createElement(F,{onClick:D},e.createElement(ae.FocusTrap,{onEscape:D},e.createElement(Z,{onClick:oe=>oe.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:j,alt:"air-balloon"}),e.createElement(k,null,e.createElement(lt.IconButton,{onClick:D,"aria-label":"Close",icon:e.createElement(Qe(),null)})),e.createElement(de,{spacing:6},e.createElement(ee.Typography,{fontWeight:"bold",textColor:"primary600"},f({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement(je.Stack,{spacing:2},e.createElement(ee.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},f({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(ee.Typography,null,f({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(Le.LinkButton,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(Ze(),null)},f({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:W,alt:"upgrade-arrow"}))))):null};Y.propTypes={onClose:Ge().func.isRequired,isOpen:Ge().bool.isRequired};const me=Y;var V=a(775);const be=()=>{const{roles:D,isLoading:H}=(0,V.bF)(),f=(0,C.useQuery)(),oe=decodeURIComponent(f.get("_q")||""),Te=(0,ne.ZP)(D,oe,{keys:["name","description"]});return{isLoading:H,sortedRoles:Te}},Ne=()=>{const{formatMessage:D}=(0,ze.useIntl)(),[H,f]=(0,e.useState)(!1),{trackUsage:oe}=(0,C.useTracking)(),{push:Te}=(0,Ee.useHistory)(),tt=(0,e.useCallback)(Ae=>{Te(`/settings/roles/${Ae}`)},[Te]),Ue=(0,e.useCallback)(()=>{f(Ae=>!Ae)},[]),_=(0,e.useCallback)(()=>{oe("didShowRBACUpgradeModal"),f(!0)},[oe]),ge=(0,e.useCallback)(Ae=>[{onClick:Ue,label:D({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(P(),null)},{onClick:()=>tt(Ae.id),label:D({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(K(),null)},{onClick:Ue,label:D({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(fe(),null)}],[D,Ue,tt]);return{isModalOpen:H,handleToggleModalForCreatingRole:_,handleToggle:Ue,getIcons:ge}},He=()=>{const{formatMessage:D}=(0,ze.useIntl)();(0,C.useFocusWhenNavigate)();const{sortedRoles:H,isLoading:f}=be(),{isModalOpen:oe,handleToggle:Te,handleToggleModalForCreatingRole:tt,getIcons:Ue}=Ne(),_=H.length+1,ge=5;return e.createElement(Ve.Main,null,e.createElement(C.SettingsPageTitle,{name:"Roles"}),e.createElement(le.HeaderLayout,{primaryAction:e.createElement(U.Button,{onClick:tt,startIcon:e.createElement(Me(),null),size:"S"},D({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:D({id:"global.roles",defaultMessage:"roles"}),subtitle:D({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(le.ContentLayout,null,e.createElement(X.Table,{colCount:ge,rowCount:_,footer:e.createElement(X.TFooter,{onClick:tt,icon:e.createElement(Me(),null)},D({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(X.Thead,null,e.createElement(X.Tr,null,e.createElement(X.Th,null,e.createElement(ee.Typography,{variant:"sigma",textColor:"neutral600"},D({id:"global.name",defaultMessage:"Name"}))),e.createElement(X.Th,null,e.createElement(ee.Typography,{variant:"sigma",textColor:"neutral600"},D({id:"global.description",defaultMessage:"Description"}))),e.createElement(X.Th,null,e.createElement(ee.Typography,{variant:"sigma",textColor:"neutral600"},D({id:"global.users",defaultMessage:"Users"}))),e.createElement(X.Th,null,e.createElement($e.VisuallyHidden,null,D({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(X.Tbody,null,H==null?void 0:H.map((Ae,Rt)=>e.createElement(z.Z,{key:Ae.id,id:Ae.id,name:Ae.name,description:Ae.description,usersCount:Ae.usersCount,icons:Ue(Ae),rowIndex:Rt+2})))),!_&&!f&&e.createElement(y.Z,null)),e.createElement(me,{isOpen:oe,onClose:Te}))},Je=()=>e.createElement(C.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(He,null))},75936:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=[]},20178:(ue,O,a)=>{a.d(O,{Z:()=>Ze});var e=a(32735),C=a(64213),r=a(88425),ne=a(9808),$=a(44526),Me=a(11856),Ce=a(78330),fe=a(16540),we=a(19192),K=a(90662),I=a(95602),P=a(37178),U=a(90353),le=a(98599),X=a.n(le),ee=a(83281),Ve=a(33795),$e=a.n(Ve),ze=a(86834),Ee=a.n(ze),z=a(5636),y=a(5141),ce=a(19615),Ge=a(37511),se=a(775),q=a(83983),ae=a(5173);const Le=ae.Ry().shape({name:ae.Z_().required(r.translatedErrors.required),description:ae.Z_().required(r.translatedErrors.required)});var Xe=a(98399),Ye=(G,Qe,j)=>new Promise((W,F)=>{var Z=Y=>{try{k(j.next(Y))}catch(me){F(me)}},de=Y=>{try{k(j.throw(Y))}catch(me){F(me)}},k=Y=>Y.done?W(Y.value):Promise.resolve(Y.value).then(Z,de);k((j=j.apply(G,Qe)).next())});const je=ce.default.div`
  border: 1px solid ${({theme:G})=>G.colors.primary200};
  background: ${({theme:G})=>G.colors.primary100};
  padding: ${({theme:G})=>`${G.spaces[2]} ${G.spaces[4]}`};
  color: ${({theme:G})=>G.colors.primary600};
  border-radius: ${({theme:G})=>G.borderRadius};
  font-size: ${12/16}rem;
  font-weight: bold;
`,pe=()=>{const G=(0,r.useNotification)(),{lockApp:Qe,unlockApp:j}=(0,r.useOverlayBlocker)(),{formatMessage:W}=(0,z.useIntl)(),[F,Z]=(0,e.useState)(!1),{replace:de}=(0,y.useHistory)(),k=(0,e.useRef)(),{trackUsage:Y}=(0,r.useTracking)(),me=(0,y.useRouteMatch)("/settings/roles/duplicate/:id"),V=$e()(me,"params.id",null),{isLoading:be,data:Ne}=(0,se.U_)(),{permissions:at,isLoading:He}=(0,se.Dq)(V),st=D=>{Qe(),Z(!0),Y(V?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,r.request)("/admin/roles",{method:"POST",body:D})).then(H=>Ye(void 0,null,function*(){const{permissionsToSend:f}=k.current.getPermissions();return Y(V?"didDuplicateRole":"didCreateNewRole"),H.data.id&&!Ee()(f)&&(yield(0,r.request)(`/admin/roles/${H.data.id}/permissions`,{method:"PUT",body:{permissions:f}})),H})).then(H=>{Z(!1),G({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),de(`/settings/roles/${H.data.id}`)}).catch(H=>{Xe.error(H),Z(!1),G({type:"warning",message:{id:"notification.error"}})}).finally(()=>{j()})},Je=`${W({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,C.format)(new Date,"PPP")}`;return e.createElement(fe.Main,null,e.createElement(r.SettingsPageTitle,{name:"Roles"}),e.createElement(ee.Formik,{initialValues:{name:"",description:Je},onSubmit:st,validationSchema:Le,validateOnChange:!1},({handleSubmit:D,values:H,errors:f,handleReset:oe,handleChange:Te})=>e.createElement(r.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(Me.HeaderLayout,{primaryAction:e.createElement(K.Stack,{horizontal:!0,spacing:2},e.createElement($.Button,{variant:"secondary",onClick:()=>{oe(),k.current.resetForm()},size:"L"},W({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement($.Button,{onClick:D,loading:F,size:"L"},W({id:"global.save",defaultMessage:"Save"}))),title:W({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:W({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(r.Link,{startIcon:e.createElement(X(),null),to:"/settings/roles"},W({id:"global.back",defaultMessage:"Back"}))}),e.createElement(Me.ContentLayout,null,e.createElement(K.Stack,{spacing:6},e.createElement(ne.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(K.Stack,{spacing:4},e.createElement(we.Flex,{justifyContent:"space-between"},e.createElement(ne.Box,null,e.createElement(ne.Box,null,e.createElement(I.Typography,{fontWeight:"bold"},W({id:"global.details",defaultMessage:"Details"}))),e.createElement(ne.Box,null,e.createElement(I.Typography,{variant:"pi",textColor:"neutral600"},W({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement(je,null,W({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(Ce.Grid,{gap:4},e.createElement(Ce.GridItem,{col:6},e.createElement(P.TextInput,{name:"name",error:f.name&&W({id:f.name}),label:W({id:"global.name",defaultMessage:"Name"}),onChange:Te,value:H.name})),e.createElement(Ce.GridItem,{col:6},e.createElement(U.Textarea,{label:W({id:"global.description",defaultMessage:"Description"}),name:"description",error:f.description&&W({id:f.description}),onChange:Te},H.description))))),!be&&!He?e.createElement(ne.Box,{shadow:"filterShadow",hasRadius:!0},e.createElement(Ge.Z,{isFormDisabled:!1,ref:k,permissions:at,layout:Ne})):e.createElement(ne.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(r.LoadingIndicatorPage,null))))))))};function Ze(){return e.createElement(r.CheckPagePermissions,{permissions:q.Z.settings.roles.create},e.createElement(pe,null))}},56899:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!1},68464:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!1},32741:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!1},19665:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!1},36950:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!1},96556:(ue,O,a)=>{a.d(O,{Z:()=>C});const C=!1},51899:(ue,O,a)=>{a.d(O,{Z:()=>Qe});var e=a(32735),C=a(88425),r=a(83983),ne=a(59290),$=a.n(ne),Me=a(76470),Ce=a.n(Me),fe=a(68192),we=a.n(fe),K=a(95717),I=a.n(K),P=a(44526),U=a(11856),le=a(28004),X=a(16540),ee=a(53214),Ve=a(95602),$e=a(92891),ze=a(58469),Ee=a(5636),z=a(5141),y=a(17247),ce=a(775),Ge=a(78522),se=a(80779),q=a(49415);const ae={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},Le=(j,W)=>(0,q.default)(j,F=>{switch(W.type){case"ON_REMOVE_ROLES":{F.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{F.shouldRefetchData=!0,F.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{F.shouldRefetchData=!1,F.roleToDelete=null,F.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{F.roleToDelete=W.id;break}default:return F}});var Xe=(j,W,F)=>new Promise((Z,de)=>{var k=V=>{try{me(F.next(V))}catch(be){de(be)}},Y=V=>{try{me(F.throw(V))}catch(be){de(be)}},me=V=>V.done?Z(V.value):Promise.resolve(V.value).then(k,Y);me((F=F.apply(j,W)).next())});const Ye=()=>{(0,C.useFocusWhenNavigate)();const{isLoading:j,allowedActions:{canCreate:W,canDelete:F,canRead:Z,canUpdate:de}}=(0,C.useRBAC)(r.Z.settings.roles),{getData:k,roles:Y,isLoading:me}=(0,ce.bF)(!1),[{query:V}]=(0,C.useQueryParams)(),be=(V==null?void 0:V._q)||"",Ne=(0,ze.ZP)(Y,be,{keys:["name","description"]});return(0,e.useEffect)(()=>{!j&&Z&&k()},[j,Z,k]),{isLoadingForPermissions:j,canCreate:W,canDelete:F,canRead:Z,canUpdate:de,isLoading:me,getData:k,sortedRoles:Ne,roles:Y}},je=({getData:j,canCreate:W,canDelete:F,canUpdate:Z})=>{const{formatMessage:de}=(0,Ee.useIntl)(),k=(0,C.useNotification)(),[Y,me]=(0,e.useState)(!1),{push:V}=(0,z.useHistory)(),[{selectedRoles:be,showModalConfirmButtonLoading:Ne,roleToDelete:at},He]=(0,e.useReducer)(Le,ae),st=()=>Xe(void 0,null,function*(){try{He({type:"ON_REMOVE_ROLES"}),yield y.be.post("/admin/roles/batch-delete",{ids:[at]}),yield j(),He({type:"RESET_DATA_TO_DELETE"})}catch(_){const ge=(0,$e.get)(_,["response","payload","data","ids"],null);if(ge&&Array.isArray(ge)){const Ae=ge.join(`
`);k({type:"warning",message:Ae})}else k({type:"warning",message:{id:"notification.error"}})}f()}),Je=(0,e.useCallback)(_=>{V(`/settings/roles/duplicate/${_}`)},[V]),D=()=>V("/settings/roles/new"),H=(0,e.useCallback)(_=>{He({type:"SET_ROLE_TO_DELETE",id:_}),f()},[]),f=()=>me(_=>!_),oe=(0,e.useCallback)(_=>{V(`/settings/roles/${_}`)},[V]),Te=(0,e.useCallback)((_,ge)=>{_.preventDefault(),_.stopPropagation(),ge.usersCount?k({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):H(ge.id)},[k,H]),tt=(0,e.useCallback)((_,ge)=>{_.preventDefault(),_.stopPropagation(),Je(ge.id)},[Je]),Ue=(0,e.useCallback)(_=>[...W?[{onClick:ge=>tt(ge,_),label:de({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(we(),null)}]:[],...Z?[{onClick:()=>oe(_.id),label:de({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(I(),null)}]:[],...F?[{onClick:ge=>Te(ge,_),label:de({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(Ce(),null)}]:[]],[de,Te,tt,oe,W,Z,F]);return{handleNewRoleClick:D,getIcons:Ue,selectedRoles:be,isWarningDeleteAllOpened:Y,showModalConfirmButtonLoading:Ne,handleToggleModal:f,handleDeleteData:st}},Ze=()=>{const{formatMessage:j}=(0,Ee.useIntl)(),{isLoadingForPermissions:W,canCreate:F,canRead:Z,canDelete:de,canUpdate:k,isLoading:Y,getData:me,sortedRoles:V}=Ye(),{handleNewRoleClick:be,getIcons:Ne,isWarningDeleteAllOpened:at,showModalConfirmButtonLoading:He,handleToggleModal:st,handleDeleteData:Je}=je({getData:me,canCreate:F,canDelete:de,canUpdate:k}),D=V.length+1,H=6;if(W)return e.createElement(X.Main,null,e.createElement(C.LoadingIndicatorPage,null));const f=j({id:"global.roles",defaultMessage:"roles"});return e.createElement(X.Main,null,e.createElement(C.SettingsPageTitle,{name:"Roles"}),e.createElement(U.HeaderLayout,{primaryAction:F?e.createElement(P.Button,{onClick:be,startIcon:e.createElement($(),null),size:"S"},j({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:f,subtitle:j({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),Z&&e.createElement(U.ActionLayout,{startActions:e.createElement(C.SearchURLQuery,{label:j({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:f})})}),Z&&e.createElement(U.ContentLayout,null,e.createElement(ee.Table,{colCount:H,rowCount:D,footer:F?e.createElement(ee.TFooter,{onClick:be,icon:e.createElement($(),null)},j({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(ee.Thead,null,e.createElement(ee.Tr,{"aria-rowindex":1},e.createElement(ee.Th,null,e.createElement(Ve.Typography,{variant:"sigma",textColor:"neutral600"},j({id:"global.name",defaultMessage:"Name"}))),e.createElement(ee.Th,null,e.createElement(Ve.Typography,{variant:"sigma",textColor:"neutral600"},j({id:"global.description",defaultMessage:"Description"}))),e.createElement(ee.Th,null,e.createElement(Ve.Typography,{variant:"sigma",textColor:"neutral600"},j({id:"global.users",defaultMessage:"Users"}))),e.createElement(ee.Th,null,e.createElement(le.VisuallyHidden,null,j({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(ee.Tbody,null,V==null?void 0:V.map((oe,Te)=>e.createElement(se.Z,{key:oe.id,id:oe.id,name:oe.name,description:oe.description,usersCount:oe.usersCount,icons:Ne(oe),rowIndex:Te+2})))),!D&&!Y&&e.createElement(Ge.Z,null)),e.createElement(C.ConfirmDialog,{isOpen:at,onConfirm:Je,isConfirmButtonLoading:He,onToggleDialog:st}))},Qe=()=>e.createElement(C.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(Ze,null))},63775:(ue,O,a)=>{a.d(O,{Z:()=>ne});var e=($,Me,Ce)=>new Promise((fe,we)=>{var K=U=>{try{P(Ce.next(U))}catch(le){we(le)}},I=U=>{try{P(Ce.throw(U))}catch(le){we(le)}},P=U=>U.done?fe(U.value):Promise.resolve(U.value).then(K,I);P((Ce=Ce.apply($,Me)).next())});const ne=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component(){return e(this,null,function*(){return yield a.e(302).then(a.bind(a,49851))})},to:"/settings/single-sign-on",exact:!0}]:[]]}}]);
