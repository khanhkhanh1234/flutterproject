(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[994],{37475:(Lc,dt)=>{var p=function(){var r={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(g,X,ie,W,Ce,ce,Se){var ge=ce.length-1;switch(Ce){case 1:this.$=g.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(g);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=ce[ge-1];case 13:this.$={};break;case 14:this.$=ce[ge-1];break;case 15:this.$=[ce[ge-2],ce[ge]];break;case 16:this.$={},this.$[ce[ge][0]]=ce[ge][1];break;case 17:this.$=ce[ge-2],ce[ge-2][ce[ge][0]]=ce[ge][1];break;case 18:this.$=[];break;case 19:this.$=ce[ge-1];break;case 20:this.$=[ce[ge]];break;case 21:this.$=ce[ge-2],ce[ge-2].push(ce[ge]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(g,X){throw new Error(g)},parse:function(g){var X=this,ie=[0],W=[null],Ce=[],ce=this.table,Se="",ge=0,O=0,Fe=0,xe=2,a=1;this.lexer.setInput(g),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var Ot=this.lexer.yylloc;Ce.push(Ot),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function Vt(B){ie.length=ie.length-2*B,W.length=W.length-B,Ce.length=Ce.length-B}function qt(){var B;return B=X.lexer.lex()||1,typeof B!="number"&&(B=X.symbols_[B]||B),B}for(var Oe,rt,we,Ie,po,Pt,_e={},ot,Re,x,I;;){we=ie[ie.length-1],this.defaultActions[we]?Ie=this.defaultActions[we]:(Oe==null&&(Oe=qt()),Ie=ce[we]&&ce[we][Oe]);e:if(typeof Ie=="undefined"||!Ie.length||!Ie[0]){if(!Fe){I=[];for(ot in ce[we])this.terminals_[ot]&&ot>2&&I.push("'"+this.terminals_[ot]+"'");var U="";this.lexer.showPosition?U="Parse error on line "+(ge+1)+`:
`+this.lexer.showPosition()+`
Expecting `+I.join(", ")+", got '"+this.terminals_[Oe]+"'":U="Parse error on line "+(ge+1)+": Unexpected "+(Oe==1?"end of input":"'"+(this.terminals_[Oe]||Oe)+"'"),this.parseError(U,{text:this.lexer.match,token:this.terminals_[Oe]||Oe,line:this.lexer.yylineno,loc:Ot,expected:I})}if(Fe==3){if(Oe==a)throw new Error(U||"Parsing halted.");O=this.lexer.yyleng,Se=this.lexer.yytext,ge=this.lexer.yylineno,Ot=this.lexer.yylloc,Oe=qt()}for(;!(xe.toString()in ce[we]);){if(we==0)throw new Error(U||"Parsing halted.");Vt(1),we=ie[ie.length-1]}rt=Oe,Oe=xe,we=ie[ie.length-1],Ie=ce[we]&&ce[we][xe],Fe=3}if(Ie[0]instanceof Array&&Ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+Oe);switch(Ie[0]){case 1:ie.push(Oe),W.push(this.lexer.yytext),Ce.push(this.lexer.yylloc),ie.push(Ie[1]),Oe=null,rt?(Oe=rt,rt=null):(O=this.lexer.yyleng,Se=this.lexer.yytext,ge=this.lexer.yylineno,Ot=this.lexer.yylloc,Fe>0&&Fe--);break;case 2:if(Re=this.productions_[Ie[1]][1],_e.$=W[W.length-Re],_e._$={first_line:Ce[Ce.length-(Re||1)].first_line,last_line:Ce[Ce.length-1].last_line,first_column:Ce[Ce.length-(Re||1)].first_column,last_column:Ce[Ce.length-1].last_column},Pt=this.performAction.call(_e,Se,O,ge,this.yy,Ie[1],W,Ce),typeof Pt!="undefined")return Pt;Re&&(ie=ie.slice(0,-1*Re*2),W=W.slice(0,-1*Re),Ce=Ce.slice(0,-1*Re)),ie.push(this.productions_[Ie[1]][0]),W.push(_e.$),Ce.push(_e._$),x=ce[ie[ie.length-2]][ie[ie.length-1]],ie.push(x);break;case 3:return!0}}return!0}},pt=function(){var ee={EOF:1,parseError:function(X,ie){if(this.yy.parseError)this.yy.parseError(X,ie);else throw new Error(X)},setInput:function(g){return this._input=g,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.match+=g,this.matched+=g;var X=g.match(/\n/);return X&&this.yylineno++,this._input=this._input.slice(1),g},unput:function(g){return this._input=g+this._input,this},more:function(){return this._more=!0,this},less:function(g){this._input=this.match.slice(g)+this._input},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),X=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+X+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,X,ie,W,Ce,ce;this._more||(this.yytext="",this.match="");for(var Se=this._currentRules(),ge=0;ge<Se.length&&(ie=this._input.match(this.rules[Se[ge]]),!(ie&&(!X||ie[0].length>X[0].length)&&(X=ie,W=ge,!this.options.flex)));ge++);if(X)return ce=X[0].match(/\n.*/g),ce&&(this.yylineno+=ce.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ce?ce[ce.length-1].length-1:this.yylloc.last_column+X[0].length},this.yytext+=X[0],this.match+=X[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(X[0].length),this.matched+=X[0],g=this.performAction.call(this,this.yy,this,Se[W],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),g||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var X=this.next();return typeof X!="undefined"?X:this.lex()},begin:function(X){this.conditionStack.push(X)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(X){this.begin(X)}};return ee.options={},ee.performAction=function(X,ie,W,Ce){var ce=Ce;switch(W){case 0:break;case 1:return 6;case 2:return ie.yytext=ie.yytext.substr(1,ie.yyleng-2),4;break;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},ee.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],ee.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},ee}();return r.lexer=pt,r}();dt.parser=p,dt.parse=function(){return p.parse.apply(p,arguments)},dt.main=function(pt){if(!pt[1])throw new Error("Usage: "+pt[0]+" FILE")}},66495:(Lc,dt,p)=>{"use strict";p.r(dt),p.d(dt,{App:()=>Ic,default:()=>CO});var r=p(32735),pt=p(99357),ee=p(5141),g=p(88425),X=p(11856),ie=p(16540),W=p(5636),Ce=p(98978),ce=p.n(Ce),Se=p(83983);const O=e=>`content-manager.${e}`;var Fe=p(74506),xe=p(60216),a=p.n(xe);const Vt=(0,r.createContext)();var qt=Object.defineProperty,Oe=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ie=(e,t,n)=>t in e?qt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,po=(e,t)=>{for(var n in t||(t={}))rt.call(t,n)&&Ie(e,n,t[n]);if(Oe)for(var n of Oe(t))we.call(t,n)&&Ie(e,n,t[n]);return e},Pt=(e,t)=>{var n={};for(var o in e)rt.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Oe)for(var o of Oe(e))t.indexOf(o)<0&&we.call(e,o)&&(n[o]=e[o]);return n};function _e(e){var t=e,{attributes:n,buttonData:o,children:s,goTo:l,layout:i,metadatas:c,moveItem:u,moveRow:d,onAddData:f,relationsLayout:y,removeField:m,selectedItemName:h,setEditFieldToSelect:b}=t,E=Pt(t,["attributes","buttonData","children","goTo","layout","metadatas","moveItem","moveRow","onAddData","relationsLayout","removeField","selectedItemName","setEditFieldToSelect"]);return r.createElement(Vt.Provider,{value:po({attributes:n,buttonData:o,goTo:l,layout:i,metadatas:c,moveItem:u,moveRow:d,onAddData:f,relationsLayout:y,removeField:m,selectedItemName:h,setEditFieldToSelect:b},E)},s)}_e.defaultProps={attributes:{},buttonData:[],goTo(){},layout:[],metadatas:{},moveItem(){},moveRow(){},onAddData(){},relationsLayout:[],removeField(){},selectedItemName:null,setEditFieldToSelect(){}},_e.propTypes={attributes:a().object,buttonData:a().array,children:a().node.isRequired,goTo:a().func,layout:a().array,metadatas:a().object,moveItem:a().func,moveRow:a().func,onAddData:a().func,relationsLayout:a().array,removeField:a().func,selectedItemName:a().string,setEditFieldToSelect:a().func};const ot=_e,Re={COMPONENT:"component",EDIT_FIELD:"editField",EDIT_RELATION:"editRelation",FIELD:"field",RELATION:"relation"};var x=p(19615),I=p(9808),U=p(19192),B=p(95602),Te=p(20763),Sc=p(76470),We=p.n(Sc),xc=p(64198),mt=p.n(xc),Fc=p(60672),mo=p.n(Fc);const Ac=(0,x.default)(I.Box)`
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
`,kc=(0,x.default)(I.Box)`
  height: ${32/16}rem;
  width: ${32/16}rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,jc=x.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`,fo=({displayedValue:e})=>r.createElement(Ac,{paddingLeft:3,paddingRight:3,paddingTop:3,paddingBottom:3,hasRadius:!0,background:"neutral0",width:(0,g.pxToRem)(300)},r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(jc,{type:"button"},r.createElement(U.Flex,null,r.createElement(kc,{background:"neutral200"},r.createElement(mo(),null)),r.createElement(I.Box,{paddingLeft:6,maxWidth:(0,g.pxToRem)(150)},r.createElement(B.Typography,{textColor:"neutral700",ellipsis:!0},e)))),r.createElement(I.Box,{paddingLeft:3},r.createElement(U.Flex,null,r.createElement(Te.IconButton,{icon:r.createElement(We(),null)}),r.createElement(I.Box,{paddingLeft:2},r.createElement(Te.IconButton,{icon:r.createElement(mt(),null)}))))));fo.propTypes={displayedValue:a().string.isRequired};const $c=fo;var ue=p(90662),Bc=p(95717),ft=p.n(Bc),Nc=p(94009),Tn=p.n(Nc);const go=e=>e.length>20?`${e.substring(0,20)}...`:e,Mn=(0,x.default)(U.Flex)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,yo=(0,x.default)(Mn)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Vc=(0,x.default)(U.Flex)`
  display: inline-flex;
  max-height: ${32/16}rem;
  opacity: ${({transparent:e})=>e?0:1};
  background-color: ${({theme:e,isSibling:t})=>t?e.colors.neutral100:e.colors.primary100};
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }

  ${B.Typography} {
    color: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
  }

  ${yo} {
    border-right: 1px solid
      ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};
  }
`,wn=({labelField:e,transparent:t,isSibling:n})=>{const o=go(e);return r.createElement(Vc,{hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n},r.createElement(ue.Stack,{horizontal:!0,spacing:3},r.createElement(yo,{alignItems:"center"},r.createElement(mt(),null)),r.createElement(B.Typography,{fontWeight:"bold"},o)),r.createElement(U.Flex,{paddingLeft:3},r.createElement(Mn,{alignItems:"center"},r.createElement(ft(),null)),r.createElement(Mn,{alignItems:"center"},r.createElement(Tn(),null))))};wn.defaultProps={isSibling:!1,transparent:!1},wn.propTypes={isSibling:a().bool,labelField:a().string.isRequired,transparent:a().bool};const In=wn,qc={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function zc(e,t,n){if(!e||!t)return{display:"none"};const{x:o,y:s}=n,l=`translate(${o}px, ${s}px)`;return{transform:l,WebkitTransform:l}}const Wc=()=>{const{itemType:e,isDragging:t,item:n,initialOffset:o,currentOffset:s,mouseOffset:l}=(0,Fe.useDragLayer)(i=>({item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging(),mouseOffset:i.getClientOffset()}));return t?r.createElement(ot,null,r.createElement("div",{style:qc},r.createElement("div",{style:zc(o,s,l),className:"col-md-2"},[Re.EDIT_RELATION,Re.EDIT_FIELD,Re.FIELD].includes(e)&&r.createElement(In,{labelField:n.labelField}),e===Re.COMPONENT&&r.createElement($c,{displayedValue:n.displayedValue})))):null},ho=(0,r.createContext)();var Uc=p(18522),J=p(92891);const bo=(0,r.createContext)(),kO=(0,r.createContext)(),jO=null;var he=p(4409);const vo=e=>e["content-manager_editViewLayoutManager"].currentLayout;var _c=Object.defineProperty,Hc=Object.defineProperties,Zc=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,Gc=Object.prototype.hasOwnProperty,Qc=Object.prototype.propertyIsEnumerable,Co=(e,t,n)=>t in e?_c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yc=(e,t)=>{for(var n in t||(t={}))Gc.call(t,n)&&Co(e,n,t[n]);if(Eo)for(var n of Eo(t))Qc.call(t,n)&&Co(e,n,t[n]);return e},Kc=(e,t)=>Hc(e,Zc(t));const Ye=()=>{const e=(0,he.useSelector)(vo),t=(0,r.useCallback)(n=>(0,J.get)(e,["components",n],{}),[e]);return Kc(Yc({},e),{getComponentLayout:t})};var Jc=p(43653),$e=p.n(Jc),fe=p(17247),Xc=p(99381),ze=p.n(Xc);const zt=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const o=ze()(e),s=o.splice(t,1);return o.splice(n,0,s[0]),o}return e},Oo=e=>{const t=e.type;return t==="relation"?!(0,J.toLower)(e.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(t)&&!!t},Po=(e,t)=>Object.keys(e).reduce((n,o)=>{const s=(0,J.get)(e,[o],{}),{default:l,component:i,type:c,required:u,min:d,repeatable:f}=s;if(c==="json"&&(n[o]=null),c==="json"&&u===!0&&(n[o]={}),l!==void 0&&(n[o]=l),c==="component"){const y=(0,J.get)(t,[i,"attributes"],{}),m=Po(y,t);if(u===!0&&(n[o]=f===!0?[]:m),d&&f===!0&&u){n[o]=[];for(let h=0;h<d;h+=1)n[o].push(m)}}return c==="dynamiczone"&&u===!0&&(n[o]=[]),n},{}),Wt=Po;var eu=Object.defineProperty,tu=Object.defineProperties,nu=Object.getOwnPropertyDescriptors,Ut=Object.getOwnPropertySymbols,Ro=Object.prototype.hasOwnProperty,To=Object.prototype.propertyIsEnumerable,Mo=(e,t,n)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dn=(e,t)=>{for(var n in t||(t={}))Ro.call(t,n)&&Mo(e,n,t[n]);if(Ut)for(var n of Ut(t))To.call(t,n)&&Mo(e,n,t[n]);return e},Ln=(e,t)=>tu(e,nu(t)),ru=(e,t)=>{var n={};for(var o in e)Ro.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Ut)for(var o of Ut(e))t.indexOf(o)<0&&To.call(e,o)&&(n[o]=e[o]);return n};const _t=e=>{var t=e,{layouts:n,metadatas:o}=t,s=ru(t,["layouts","metadatas"]);const l=n.list.map(u=>u.name?u.name:u),i=Object.keys(o).reduce((u,d)=>{const f=(0,J.get)(o,[d],{});let y=f.edit;return y.mainField&&(y=Ln(Dn({},y),{mainField:f.edit.mainField.name})),Ln(Dn({},u),{[d]:{edit:y,list:(0,J.omit)(f.list,["mainField"])}})},{}),c=n.edit.map(u=>u.map(({name:d,size:f})=>({name:d,size:f})));return Ln(Dn({},s),{layouts:{edit:c,list:l},metadatas:i})};var ou=Object.defineProperty,au=Object.defineProperties,su=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,Io=(e,t,n)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cu=(e,t)=>{for(var n in t||(t={}))iu.call(t,n)&&Io(e,n,t[n]);if(wo)for(var n of wo(t))lu.call(t,n)&&Io(e,n,t[n]);return e},uu=(e,t)=>au(e,su(t));const du=(e,t)=>e.map(n=>uu(cu({},n),{subject:t})),Do=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,o)=>(n[o]=du(t[o],e),n),{})},Lo=e=>e.split(".").filter(t=>(0,J.isNaN)(parseInt(t,10))),So=e=>e.length===0?-1:Math.max.apply(Math,e.map(t=>t.__temp_key__)),ye=e=>`/content-manager/${e}`;var pu=Object.defineProperty,xo=Object.getOwnPropertySymbols,mu=Object.prototype.hasOwnProperty,fu=Object.prototype.propertyIsEnumerable,Fo=(e,t,n)=>t in e?pu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ht=(e,t)=>{for(var n in t||(t={}))mu.call(t,n)&&Fo(e,n,t[n]);if(xo)for(var n of xo(t))fu.call(t,n)&&Fo(e,n,t[n]);return e};const Ao=(e,t,n)=>{const o=c=>t.find(u=>u.uid===c),s=Object.assign({},e),l=e[n].uid,i=o(l);return(0,J.set)(s,[n],Ht(Ht({},e[n]),i)),Object.keys(e.components).forEach(c=>{const u=o(c);(0,J.set)(s,["components",c],Ht(Ht({},e.components[c]),u))}),s};var gu=Object.defineProperty,yu=Object.defineProperties,hu=Object.getOwnPropertyDescriptors,ko=Object.getOwnPropertySymbols,bu=Object.prototype.hasOwnProperty,vu=Object.prototype.propertyIsEnumerable,jo=(e,t,n)=>t in e?gu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$o=(e,t)=>{for(var n in t||(t={}))bu.call(t,n)&&jo(e,n,t[n]);if(ko)for(var n of ko(t))vu.call(t,n)&&jo(e,n,t[n]);return e},Bo=(e,t)=>yu(e,hu(t));const Rt=(e,t)=>e&&Object.keys(e).reduce((n,o)=>{const s=n[o];return s===null?n:Array.isArray(s)?Array.isArray(n)?(n[o]=Rt(s,t),n):Bo($o({},n),{[o]:s.map(l=>Rt(l,t))}):typeof s=="object"?Array.isArray(n)?(n[o]=Rt(s,t),n):Bo($o({},n),{[o]:Rt(s,t)}):(o===t&&delete n[o],n)},e),Eu=Rt,No=(e,t,n)=>{const o=(s,l)=>Object.keys(s).reduce((i,c)=>{const u=(0,g.getType)(l,c),d=(0,J.get)(s,c),f=(0,g.getOtherInfos)(l,[c,"component"]),y=(0,g.getOtherInfos)(l,[c,"repeatable"]);return u==="dynamiczone"?(i[c]=d.map(m=>o(m,n[m.__component])),i):u==="component"?(y?i[c]=d&&d.map(m=>o(m,n[f])):i[c]=d&&o(d,n[f]),i):(u!=="password"&&(i[c]=d),i)},{});return o(e,t)};var Cu=Object.defineProperty,Ou=Object.defineProperties,Pu=Object.getOwnPropertyDescriptors,Vo=Object.getOwnPropertySymbols,Ru=Object.prototype.hasOwnProperty,Tu=Object.prototype.propertyIsEnumerable,qo=(e,t,n)=>t in e?Cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tt=(e,t)=>{for(var n in t||(t={}))Ru.call(t,n)&&qo(e,n,t[n]);if(Vo)for(var n of Vo(t))Tu.call(t,n)&&qo(e,n,t[n]);return e},Mt=(e,t)=>Ou(e,Pu(t));const zo=(e,t)=>t.find(n=>n.uid===e),Mu=(e,t)=>{const n=wu(e,t),o=Wo(n.contentType,t),s=Iu(n.contentType,n.components);return(0,J.set)(n,["contentType","layouts","edit"],o),(0,J.set)(n,["contentType","layouts","list"],s),Object.keys(n.components).forEach(l=>{const i=Wo(n.components[l],t);(0,J.set)(n,["components",l,"layouts","edit"],i)}),n},wu=(e,t)=>{const n=Ao((0,J.cloneDeep)(e),t,"contentType"),{components:o,contentType:s}=n,l=i=>Object.keys(i.metadatas).reduce((c,u)=>{const d=(0,J.get)(i,["attributes",u],{});let f=i.metadatas[u];if(d.type==="relation"){const y=zo(d.targetModel,t),m=f.edit.mainField,h={name:m,schema:(0,J.get)(y,["attributes",m])};f={list:Mt(Tt({},f.list),{mainField:h}),edit:Mt(Tt({},f.edit),{mainField:h})}}return c[u]=f,c},{});return(0,J.set)(n,["contentType","metadatas"],l(s)),Object.keys(o).forEach(i=>{const c=o[i],u=l(c);(0,J.set)(n,["components",i,"metadatas"],u)}),n},Wo=(e,t)=>e.layouts.edit.reduce((n,o)=>{const s=o.map(l=>{const i=(0,J.get)(e,["attributes",l.name],{}),c=Mt(Tt({},l),{fieldSchema:i,metadatas:(0,J.get)(e,["metadatas",l.name,"edit"],{})});if(i.type==="relation"){const d=zo(i.targetModel,t).pluginOptions||{};(0,J.set)(c,"targetModelPluginOptions",d),(0,J.set)(c,"queryInfos",{shouldDisplayRelationLink:Du(e,l.name,t)})}return c});return n.push(s),n},[]),Iu=(e,t)=>e.layouts.list.reduce((o,s)=>{const l=(0,J.get)(e,["attributes",s],{}),i=(0,J.get)(e,["metadatas",s,"list"],{}),c=l.type;if(c==="relation")return o.push({key:`__${s}_key__`,name:s,fieldSchema:l,metadatas:i}),o;if(c==="component"){const u=t[l.component],d=u.settings.mainField,f=u.attributes[d];return o.push({key:`__${s}_key__`,name:s,fieldSchema:l,metadatas:Mt(Tt({},i),{mainField:Mt(Tt({},f),{name:d})})}),o}return o.push({key:`__${s}_key__`,name:s,fieldSchema:l,metadatas:i}),o},[]),Du=(e,t,n)=>{const o=(0,J.get)(e,["attributes",t,"targetModel"],"");return Lu(n).includes(o)},Lu=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),Uo=Mu;var Zt=p(49415),Su=Object.defineProperty,xu=Object.defineProperties,Fu=Object.getOwnPropertyDescriptors,_o=Object.getOwnPropertySymbols,Au=Object.prototype.hasOwnProperty,ku=Object.prototype.propertyIsEnumerable,Ho=(e,t,n)=>t in e?Su(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gt=(e,t)=>{for(var n in t||(t={}))Au.call(t,n)&&Ho(e,n,t[n]);if(_o)for(var n of _o(t))ku.call(t,n)&&Ho(e,n,t[n]);return e},Zo=(e,t)=>xu(e,Fu(t));const ju={error:null,isLoading:!0,layout:{},layouts:{}},$u=(e,t)=>(0,Zt.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const o=t.data.contentType.uid;n.layout=t.data,n.layouts[o]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const o=e.layout;n.layout=Zo(Gt({},o),{contentType:Gt({uid:o.contentType.uid},t.newLayout.contentType)}),n.layouts[o.contentType.uid]=Zo(Gt({},o),{contentType:Gt({uid:o.contentType.uid},t.newLayout.contentType)});break}default:return n}});var Sn=p(12463),Bu=p(34947);const wt=()=>e=>e["content-manager_app"]||Bu.E,QO=()=>createSelector(wt(),e=>e),YO=()=>createSelector(wt(),e=>e.models),Nu=()=>(0,Sn.P1)(wt(),e=>({collectionTypeLinks:e.collectionTypeLinks,singleTypeLinks:e.singleTypeLinks})),xn=()=>(0,Sn.P1)(wt(),({components:e,models:t})=>({schemas:[...e,...t]})),KO=null;var Vu=p(98399),qu=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Go=e=>{const[{error:t,isLoading:n,layout:o,layouts:s},l]=(0,r.useReducer)($u,ju),i=(0,r.useMemo)(xn,[]),{schemas:c}=(0,he.useSelector)(y=>i(y),he.shallowEqual),u=(0,r.useRef)(!0),d=(0,r.useCallback)((y,m)=>qu(void 0,null,function*(){if(s[y]){l({type:"SET_LAYOUT_FROM_STATE",uid:y});return}l({type:"GET_DATA"});try{const h=ye(`content-types/${y}/configuration`),{data:{data:b}}=yield fe.be.get(h,{cancelToken:m.token});l({type:"GET_DATA_SUCCEEDED",data:Uo(b,c)})}catch(h){if($e().isCancel(h))return;u.current&&Vu.error(h),u.current&&l({type:"GET_DATA_ERROR",error:h})}}),[s,c]);(0,r.useEffect)(()=>()=>{u.current=!1},[]),(0,r.useEffect)(()=>{const m=$e().CancelToken.source();return d(e,m),()=>{m.cancel("Operation canceled by the user.")}},[e,d]);const f=(0,r.useCallback)(y=>{l({type:"UPDATE_LAYOUT",newLayout:Uo(y,c)})},[c]);return{error:t,isLoading:n,layout:o,updateLayout:f}},zu=e=>e["content-manager_app"].collectionTypeLinks;var He=p(77997),Wu=p(33795),M=p.n(Wu),Uu=p(85973),Qo=p.n(Uu),_u=Object.defineProperty,Hu=Object.defineProperties,Zu=Object.getOwnPropertyDescriptors,Yo=Object.getOwnPropertySymbols,Gu=Object.prototype.hasOwnProperty,Qu=Object.prototype.propertyIsEnumerable,Ko=(e,t,n)=>t in e?_u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yu=(e,t)=>{for(var n in t||(t={}))Gu.call(t,n)&&Ko(e,n,t[n]);if(Yo)for(var n of Yo(t))Qu.call(t,n)&&Ko(e,n,t[n]);return e},Ku=(e,t)=>Hu(e,Zu(t));const Jo=(e,t)=>Object.keys(e).reduce((n,o)=>{const s=e[o],l=M()(t,[o],s);return Qo()(s)?Ku(Yu({},n),{[o]:Jo(s,l)}):(n[o]=l,n)},{}),Ju=(e,t,n)=>{const o=e.find(({to:f})=>f.includes(t));if(!o)return"/";const{to:s,search:l}=o,i=(0,He.parse)(l),c=(0,He.parse)(n.substring(1)),u=Jo(i,c);return`${s}?${(0,He.stringify)(u,{encode:!1})}`},Xo=e=>{const[{rawQuery:t}]=(0,g.useQueryParams)(),n=(0,he.useSelector)(zu);return Ju(n,e,t)},at=()=>(0,r.useContext)(Vt),ea=()=>{const{search:e}=(0,ee.useLocation)(),t=e?(0,He.parse)(e.substring(1)):{};return t.plugins?(0,He.stringify)({plugins:t.plugins},{encode:!1}):""};var ta=p(89334);const Xu=(e,t,n)=>({type:ta.m,permissions:e,__meta__:{plugins:t,containerName:n}}),ed=()=>({type:ta.Q}),td=e=>e["content-manager_rbacManager"].permissions,nd=e=>e.rbacProvider.collectionTypesRelatedPermissions,na=(e,t,n="listView")=>{const o=(0,he.useSelector)(nd),s=(0,he.useSelector)(td),l=(0,he.useDispatch)(),i=o[t];return(0,r.useEffect)(()=>i?(l(Xu(i,e?e.plugins:null,n)),()=>{l(ed())}):()=>{},[i,l,e,n]),s},aP=()=>useContext(WysiwygContext),sP=null,rd=e=>{const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current};var Qt=p(70836),ra=p(4460);const od=()=>({type:ra.c}),ad=(e,t)=>({type:ra.O,layout:e,query:t});var sd=p(8266),Ze=p.n(sd),de=p(78330),id=p(70404),ld=p.n(id),cd=p(66694);const ud=()=>(0,r.useContext)(cd.ux),oa=e=>{const{getAdminInjectedComponents:t}=ud(),[n,o,s]=e.split(".");return t(n,o,s)};var dd=Object.defineProperty,Yt=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,ia=(e,t,n)=>t in e?dd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pd=(e,t)=>{for(var n in t||(t={}))aa.call(t,n)&&ia(e,n,t[n]);if(Yt)for(var n of Yt(t))sa.call(t,n)&&ia(e,n,t[n]);return e},md=(e,t)=>{var n={};for(var o in e)aa.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Yt)for(var o of Yt(e))t.indexOf(o)<0&&sa.call(e,o)&&(n[o]=e[o]);return n};const la=e=>{var t=e,{area:n}=t,o=md(t,["area"]);return oa(n).map(l=>r.createElement(l.Component,pd({key:l.name},o)))};la.propTypes={area:a().string.isRequired};const Kt=la;var fd=Object.defineProperty,ca=Object.getOwnPropertySymbols,gd=Object.prototype.hasOwnProperty,yd=Object.prototype.propertyIsEnumerable,ua=(e,t,n)=>t in e?fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,da=(e,t)=>{for(var n in t||(t={}))gd.call(t,n)&&ua(e,n,t[n]);if(ca)for(var n of ca(t))yd.call(t,n)&&ua(e,n,t[n]);return e};function hd(e,t){return n=>{const o=t(n.name);return r.createElement(e,da(da({},n),o))}}const bd=hd;function vd(e){const{addComponentToDynamicZone:t,createActionAllowedFields:n,isCreatingEntry:o,formErrors:s,modifiedData:l,moveComponentUp:i,moveComponentDown:c,removeComponentFromDynamicZone:u,readActionAllowedFields:d,updateActionAllowedFields:f}=(0,g.useCMEditViewDataManager)(),y=(0,r.useMemo)(()=>(0,J.get)(l,[e],[]).map(b=>b.__component),[l,e]),m=(0,r.useMemo)(()=>(o?n:f).includes(e),[e,o,n,f]),h=(0,r.useMemo)(()=>(o?[]:d).includes(e),[e,o,d]);return{addComponentToDynamicZone:t,formErrors:s,isCreatingEntry:o,isFieldAllowed:m,isFieldReadable:h,moveComponentUp:i,moveComponentDown:c,removeComponentFromDynamicZone:u,dynamicDisplayedComponents:y}}const Ed=vd;var Cd=p(51542),pa=p.n(Cd),Fn=p(98195);const An=(0,x.default)(pa())`
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,Od=(0,x.default)(Fn.BaseButton)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
  padding-top: ${({theme:e})=>e.spaces[3]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[4]};

  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${B.Typography} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${An} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${B.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${An} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,Pd=(0,x.default)(I.Box)`
  height: 100%;
`,kn=({hasError:e,hasMaxError:t,hasMinError:n,isDisabled:o,isOpen:s,label:l,missingComponentNumber:i,name:c,onClick:u})=>{const{formatMessage:d}=(0,W.useIntl)(),f=d({id:O("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:l||c}),y=d({id:"app.utils.close-label",defaultMessage:"Close"});let m=s?y:f;return t&&!s&&(m=d({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."})),n&&!s&&(m=d({id:O("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:i})),r.createElement(U.Flex,{justifyContent:"center"},r.createElement(I.Box,{style:{cursor:o?"not-allowed":"pointer"}},r.createElement(Od,{type:"button",onClick:u,disabled:o,hasError:e},r.createElement(U.Flex,null,r.createElement(Pd,{"aria-hidden":!0,paddingRight:2},r.createElement(An,{$isOpen:s,$hasError:e&&!s})),r.createElement(B.Typography,{variant:"pi",fontWeight:"bold",textColor:e&&!s?"danger600":"neutral500"},m)))))};kn.defaultProps={label:"",missingComponentNumber:0},kn.propTypes={label:a().string,hasError:a().bool.isRequired,hasMaxError:a().bool.isRequired,hasMinError:a().bool.isRequired,isDisabled:a().bool.isRequired,isOpen:a().bool.isRequired,missingComponentNumber:a().number,name:a().string.isRequired,onClick:a().func.isRequired};const Rd=kn,Td=(0,x.default)(I.Box)`
  border-radius: ${(0,g.pxToRem)(26)};
`,jn=({label:e,labelAction:t,name:n,numberOfComponents:o,required:s,intlDescription:l})=>{const{formatMessage:i}=(0,W.useIntl)(),c=i({id:e||n,defaultMessage:e||n});return r.createElement(U.Flex,{justifyContent:"center"},r.createElement(I.Box,null,r.createElement(Td,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,background:"neutral0",shadow:"filterShadow",color:"neutral500"},r.createElement(U.Flex,{direction:"column",justifyContent:"center"},r.createElement(U.Flex,{maxWidth:(0,g.pxToRem)(356)},r.createElement(B.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0},c,"\xA0"),r.createElement(B.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold"},"(",o,")"),s&&r.createElement(B.Typography,{textColor:"danger600"},"*"),t&&r.createElement(I.Box,{paddingLeft:1},t)),l&&r.createElement(I.Box,{paddingTop:1,maxWidth:(0,g.pxToRem)(356)},r.createElement(B.Typography,{variant:"pi",textColor:"neutral600",ellipsis:!0},i(l)))))))};jn.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,required:!1},jn.propTypes={intlDescription:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}),label:a().string,labelAction:a().element,name:a().string.isRequired,numberOfComponents:a().number.isRequired,required:a().bool};const Md=jn;var $n=p(16925),Ge=p(12001),Bn=p(54742),ma=p(82910),wd=p(78325),Id=p.n(wd),Dd=p(30857),Ld=p.n(Dd),Sd=p(61868),xd=p.n(Sd),Fd=Object.defineProperty,fa=Object.getOwnPropertySymbols,Ad=Object.prototype.hasOwnProperty,kd=Object.prototype.propertyIsEnumerable,ga=(e,t,n)=>t in e?Fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jd=(e,t)=>{for(var n in t||(t={}))Ad.call(t,n)&&ga(e,n,t[n]);if(fa)for(var n of fa(t))kd.call(t,n)&&ga(e,n,t[n]);return e};const $d=x.default.span`
  > svg {
    width: ${(0,g.pxToRem)(24)};
    height: ${(0,g.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Nn=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:o}=(0,W.useIntl)();return r.createElement(r.Fragment,null,r.createElement(I.Box,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button"},r.createElement(ue.Stack,{spacing:2},r.createElement(U.Flex,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"}},r.createElement($d,null,r.createElement(pa(),null))),r.createElement(U.Flex,{justifyContent:"center"},r.createElement(B.Typography,{textColor:"primary600",variant:"pi",fontWeight:"bold"},o({id:O("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."}))))),(e==null?void 0:e.id)&&r.createElement(B.Typography,{textColor:"danger600",variant:"pi"},o({id:e.id,defaultMessage:e.id},jd({},e.values))))};Nn.defaultProps={error:void 0,isReadOnly:!1},Nn.propTypes={error:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),isReadOnly:a().bool,onClick:a().func.isRequired};const ya=Nn;var Bd=p(9086),Nd=p.n(Bd),Vd=p(88708),Vn=p.n(Vd),qd=p(27509),Jt=p.n(qd),cP=p(40795),zd=p(88591),Wd=p.n(zd),qn=p(59845),Ud=p(20871),_d=p.n(Ud),Hd=p(48375),ha=p.n(Hd),Zd=p(31089),Gd=p.n(Zd),Qd=p(16043),Yd=p.n(Qd),Kd=p(5109),Jd=p.n(Kd),Xd=p(47955),ep=p.n(Xd),tp=p(95706),np=p.n(tp),rp=p(6658),op=p.n(rp),ap=p(36407),sp=p.n(ap),ip=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});(()=>ip(void 0,null,function*(){yield p.e(7347).then(p.bind(p,98362))}))();const gt=new(Wd())({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight(e,t){if(t&&t!=="auto"&&(0,qn.getLanguage)(t))return'<pre class="hljs language-'+gt.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,qn.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,qn.highlightAuto)(e);return'<pre class="hljs language-'+gt.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+gt.utils.escapeHtml(e)+"</code></pre>"}}).use(_d()).use(ha(),"warning").use(ha(),"tip").use(Gd()).use(Yd()).use(Jd()).use(ep()).use(np()).use(op()).use(sp());gt.renderer.rules.footnote_ref=(e,t,n,o,s)=>'<sup class="footnote-ref"><span>'+s.rules.footnote_caption(e,t,n,o,s)+"</span></sup>",gt.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const lp=gt;var cp=p(13993),ba=p.n(cp),up=Object.defineProperty,dp=Object.defineProperties,pp=Object.getOwnPropertyDescriptors,va=Object.getOwnPropertySymbols,mp=Object.prototype.hasOwnProperty,fp=Object.prototype.propertyIsEnumerable,Ea=(e,t,n)=>t in e?up(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gp=(e,t)=>{for(var n in t||(t={}))mp.call(t,n)&&Ea(e,n,t[n]);if(va)for(var n of va(t))fp.call(t,n)&&Ea(e,n,t[n]);return e},yp=(e,t)=>dp(e,pp(t));const hp=yp(gp({},ba().defaults),{allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}}),bp=e=>ba()(e,hp),vp=x.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  z-index: 2;
  cursor: not-allowed;
  color: ${({theme:e})=>e.colors.neutral800};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: 10px;
    margin-block-end: 10px;
  }

  p {
    margin-bottom: 10px;
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: 41px;
    margin-bottom: 34px;
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 5px solid #eee;
    font-style: italic;
    padding: 10px 20px;
  }

  img {
    max-width: 100%;
  }

  table {
    thead {
      background: ${({theme:e})=>e.colors.neutral150};

      th {
        padding: ${({theme:e})=>e.spaces[4]};
      }
    }
    tr {
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    th,
    td {
      padding: ${({theme:e})=>e.spaces[4]};
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 0;
      border-top: 0;
    }
  }

  pre,
  code {
    font-size: 13px;
    border-radius: 3px;
    background-color: #002b36;
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  .warning {
    background-color: #faa684;
    padding: 30px;
    border-radius: 3px;
  }
  .tip {
    padding: 30px;
    border-radius: 3px;
  }

  .footnote-ref,
  .footnote-backref {
    color: #007bff;
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,zn=({data:e})=>{const t=(0,r.useMemo)(()=>bp(lp.render(e.replaceAll("\\n",`
`)||"")),[e]);return r.createElement(vp,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))};zn.defaultProps={data:""},zn.propTypes={data:a().string};const Ca=(0,r.memo)(zn),Ep=x.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"290px"};
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`,ke=(0,x.default)(Te.IconButton)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,Cp=(0,x.default)(ke)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,Oa=(0,x.default)(Te.IconButtonGroup)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,Pa=(0,x.default)(Te.IconButton)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,Op=(0,x.default)(Te.IconButtonGroup)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,Pp=x.default.div`
  position: relative;
  height: calc(100% - 48px);
`,Rp=(0,x.default)(Fn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`;var Xt=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,Tp=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,Mp=/[*+-]\s/;function wp(e){if(e.getOption("disableInput"))return Jt().Pass;for(var t=e.listSelections(),n=[],o=0;o<t.length;o++){var s=t[o].head,l=e.getStateAfter(s.line),i=l.list!==!1,c=l.quote!==0,u=e.getLine(s.line),d=Xt.exec(u),f=/^\s*$/.test(u.slice(0,s.ch));if(!t[o].empty()||!i&&!c||!d||f){e.execCommand("newlineAndIndent");return}if(Tp.test(u)){var y=c&&/>\s*$/.test(u),m=!/>\s*$/.test(u);(y||m)&&e.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:s.ch+1}),n[o]=`
`}else{var h=d[1],b=d[5],E=!(Mp.test(d[2])||d[2].indexOf(">")>=0),S=E?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[o]=`
`+h+S+b,E&&Ip(e,s)}}e.replaceSelections(n)}function Ip(e,t){var n=t.line,o=0,s=0,l=Xt.exec(e.getLine(n)),i=l[1];do{o+=1;var c=n+o,u=e.getLine(c),d=Xt.exec(u);if(d){var f=d[1],y=parseInt(l[3],10)+o-s,m=parseInt(d[3],10),h=m;if(i===f&&!isNaN(m))y===m&&(h=m+1),y>m&&(h=y+1),e.replaceRange(u.replace(Xt,f+h+d[4]+d[5]),{line:c,ch:0},{line:c,ch:u.length});else{if(i.length>f.length||i.length<f.length&&o===1)return;s+=1}}}while(d)}const Dp=wp,Wn=({disabled:e,editorRef:t,error:n,isPreviewMode:o,isExpandMode:s,name:l,onChange:i,placeholder:c,textareaRef:u,value:d})=>{const f=(0,r.useRef)(i);return(0,r.useEffect)(()=>{t.current=Jt().fromTextArea(u.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:c,spellcheck:!0,inputStyle:"contenteditable"}),Jt().commands.newlineAndIndentContinueMarkdownList=Dp,t.current.on("change",y=>{f.current({target:{name:l,value:y.getValue(),type:"wysiwyg"}})})},[t,u,l,c]),(0,r.useEffect)(()=>{d&&!t.current.state.focused&&t.current.setValue(d)},[t,d]),(0,r.useEffect)(()=>{o||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,o,t]),(0,r.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),r.createElement(Pp,null,r.createElement(Ep,{isExpandMode:s,disabled:e||o},r.createElement("textarea",{ref:u})),o&&r.createElement(Ca,{data:d}))};Wn.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},Wn.propTypes={disabled:a().bool,editorRef:a().shape({current:a().any}).isRequired,error:a().string,isPreviewMode:a().bool,isExpandMode:a().bool,name:a().string.isRequired,onChange:a().func.isRequired,placeholder:a().string,textareaRef:a().shape({current:a().any}).isRequired,value:a().string};const Lp=Wn;var ve=p(44526),pe=p(25716),Sp=p(37853),xp=p(19882),Ra=p.n(xp),Fp=p(61980),Ta=p.n(Fp),Ap=p(70052),Ma=p.n(Ap),kp=p(15053),jp=p.n(kp),$p=p(18767),Bp=p.n($p),Np=p(83358),Vp=p.n(Np),qp=p(69822),zp=p.n(qp),Wp=p(88467),Up=p.n(Wp),_p=p(83262),Hp=p.n(_p),Zp=p(49157),Gp=p.n(Zp),Qp=p(75400),wa=p.n(Qp);const Un=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:o,onActionClick:s,onToggleMediaLib:l,onTogglePreviewMode:i})=>{const[c,u]=(0,r.useState)(!1),{formatMessage:d}=(0,W.useIntl)(),f=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),y=(0,r.useRef)(),m=()=>{u(h=>!h)};return e||o?r.createElement(I.Box,{padding:2,background:"neutral100"},r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(U.Flex,null,r.createElement(pe.Select,{disabled:!0,id:"selectTitle",placeholder:f,size:"S","aria-label":f},r.createElement(pe.Option,{value:"h1"},"h1"),r.createElement(pe.Option,{value:"h2"},"h2"),r.createElement(pe.Option,{value:"h3"},"h3"),r.createElement(pe.Option,{value:"h4"},"h4"),r.createElement(pe.Option,{value:"h5"},"h5"),r.createElement(pe.Option,{value:"h6"},"h6")),r.createElement(Oa,null,r.createElement(ke,{disabled:!0,id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(Ra(),null)}),r.createElement(ke,{disabled:!0,id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(Ta(),null)}),r.createElement(ke,{disabled:!0,id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(Ma(),null)})),r.createElement(Pa,{disabled:!0,id:"more",label:"More",icon:r.createElement(wa(),null)})),!n&&r.createElement(ve.Button,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})))):r.createElement(I.Box,{padding:2,background:"neutral100"},r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(U.Flex,null,r.createElement(pe.Select,{id:"selectTitle",placeholder:f,size:"S",onChange:h=>s(h,t)},r.createElement(pe.Option,{value:"h1"},"h1"),r.createElement(pe.Option,{value:"h2"},"h2"),r.createElement(pe.Option,{value:"h3"},"h3"),r.createElement(pe.Option,{value:"h4"},"h4"),r.createElement(pe.Option,{value:"h5"},"h5"),r.createElement(pe.Option,{value:"h6"},"h6")),r.createElement(Oa,null,r.createElement(ke,{onClick:()=>s("Bold",t),id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(Ra(),null)}),r.createElement(ke,{onClick:()=>s("Italic",t),id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(Ta(),null)}),r.createElement(ke,{onClick:()=>s("Underline",t),id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(Ma(),null)})),r.createElement(Pa,{ref:y,onClick:m,id:"more",label:"More",icon:r.createElement(wa(),null)}),c&&r.createElement(Sp.Popover,{centered:!0,source:y,spacing:4,id:"popover"},r.createElement(Bn.FocusTrap,{onEscape:m,restoreFocus:!1},r.createElement(U.Flex,null,r.createElement(Op,null,r.createElement(ke,{onClick:()=>s("Strikethrough",t,m),id:"Strikethrough",label:"Strikethrough",name:"Strikethrough",icon:r.createElement(jp(),null)}),r.createElement(ke,{onClick:()=>s("BulletList",t,m),id:"BulletList",label:"BulletList",name:"BulletList",icon:r.createElement(Bp(),null)}),r.createElement(ke,{onClick:()=>s("NumberList",t,m),id:"NumberList",label:"NumberList",name:"NumberList",icon:r.createElement(Vp(),null)})),r.createElement(Te.IconButtonGroup,null,r.createElement(ke,{onClick:()=>s("Code",t,m),id:"Code",label:"Code",name:"Code",icon:r.createElement(zp(),null)}),r.createElement(ke,{onClick:()=>{m(),l()},id:"Image",label:"Image",name:"Image",icon:r.createElement(Up(),null)}),r.createElement(Cp,{onClick:()=>s("Link",t,m),id:"Link",label:"Link",name:"Link",icon:r.createElement(Hp(),null)}),r.createElement(ke,{onClick:()=>s("Quote",t,m),id:"Quote",label:"Quote",name:"Quote",icon:r.createElement(Gp(),null)})))))),i&&r.createElement(ve.Button,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"}))))};Un.defaultProps={isPreviewMode:!1,onActionClick(){},onToggleMediaLib(){},onTogglePreviewMode:void 0},Un.propTypes={disabled:a().bool.isRequired,editorRef:a().shape({current:a().any}).isRequired,isExpandMode:a().bool.isRequired,isPreviewMode:a().bool,onActionClick:a().func,onToggleMediaLib:a().func,onTogglePreviewMode:a().func};const Yp=Un;var Kp=p(39766),Jp=p.n(Kp);const _n=({onToggleExpand:e})=>{const{formatMessage:t}=(0,W.useIntl)();return r.createElement(I.Box,{padding:2,background:"neutral100",hasRadius:!0},r.createElement(U.Flex,{justifyContent:"flex-end",alignItems:"flex-end"},r.createElement(Rp,{id:"expand",onClick:e},r.createElement(B.Typography,null,t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})),r.createElement(Jp(),null))))};_n.defaultProps={onToggleExpand(){}},_n.propTypes={onToggleExpand:a().func};const Xp=_n;var em=Object.defineProperty,Ia=Object.getOwnPropertySymbols,tm=Object.prototype.hasOwnProperty,nm=Object.prototype.propertyIsEnumerable,Da=(e,t,n)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rm=(e,t)=>{for(var n in t||(t={}))tm.call(t,n)&&Da(e,n,t[n]);if(Ia)for(var n of Ia(t))nm.call(t,n)&&Da(e,n,t[n]);return e};const Hn=({id:e,error:t,name:n,description:o})=>{const{formatMessage:s}=(0,W.useIntl)(),l=o?s({id:o.id,defaultMessage:o.defaultMessage},rm({},o.values)):"";return!l||t?null:r.createElement(B.Typography,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600"},l)};Hn.defaultProps={id:void 0,description:void 0,error:void 0},Hn.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),error:a().string,id:a().string,name:a().string.isRequired};const om=Hn,La=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},Sa=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},xa=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},Fa=(e,t)=>{const n=e.current.getSelection();let o;if(n){const s=La(t,n);e.current.replaceSelection(s),e.current.focus()}else{o=Sa(t),e.current.replaceSelection(o.editedText),e.current.focus();const{line:s,ch:l}=e.current.getCursor(),i=l-o.selection.end,c=l-o.selection.end-o.selection.start;e.current.setSelection({line:s,ch:c},{line:s,ch:i})}},am=(e,t)=>{const n=e.current.getDoc(),o=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const s=n.listSelections();let l=null;e.current.operation(function(){s.forEach(function(i){const c=[i.head.line,i.anchor.line].sort();l==null&&(l=n.getLine(c[0]).startsWith(o));for(let u=c[0];u<=c[1];u++)if(l)n.getLine(u).startsWith(o)&&n.replaceRange("",{line:u,ch:0},{line:u,ch:o.length});else{const d=t==="BulletList"?"- ":`${u+1}. `;n.replaceRange(d,{line:u,ch:0})}})})}else{let{line:s}=n.getCursor();const l=xa(t),i=e.current.getLine(s),c=l+i;e.current.setSelection({line:s,ch:0},{line:s,ch:i.length}),e.current.replaceSelection(c)}e.current.focus()},sm=(e,t)=>{let{line:n}=e.current.getCursor();const o=xa(t),s=e.current.getLine(n),l=s.replace(/#{1,6}\s/g,"").trim(),i=o+l;e.current.setSelection({line:n,ch:0},{line:n,ch:s.length}),e.current.replaceSelection(i),setTimeout(()=>{const c=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:c})},0)},im=(e,t)=>{let{line:n,ch:o}=e.current.getCursor();t.forEach((s,l)=>{let i=e.current.getLine(n).length;e.current.setCursor({line:n,ch:i}),(l>0||l===0&&o!==0)&&(i=e.current.getLine(n).length,e.current.setCursor({line:n,ch:i}),n++,e.current.replaceSelection(`
`)),s.mime.includes("image")?e.current.replaceSelection(`![${s.alt}](${s.url})`):e.current.replaceSelection(`[${s.alt}](${s.url})`)}),setTimeout(()=>e.current.focus(),0)},lm=(e,t,n,o,s)=>{const l=La(t,s),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:o}),e.current.replaceSelection(`
`),e.current.replaceSelection(l),t==="Code"){let{line:c}=e.current.getCursor();e.current.setCursor({line:c-1,ch:s.length})}e.current.replaceRange(i,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},cm=(e,t,n,o)=>{const s=Sa(t),l=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:o}),e.current.replaceSelection(`
`),e.current.replaceSelection(s.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:i}=e.current.getCursor(),c=i-s.selection.end,u=i-s.selection.end-s.selection.start;e.current.setSelection({line:n,ch:u},{line:n,ch:c})}e.current.replaceRange(l,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},um=(e,t)=>{const n=e.current.getSelection();let{line:o}=e.current.getCursor(),s=e.current.getLine(o).length;n?lm(e,t,o,s,n):cm(e,t,o,s)};var dm=p(64410),pm=p(43768),mm=p.n(pm);const fm=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,gm=(0,x.default)(U.Flex)`
  background: ${({theme:e})=>fm(e.colors.neutral800,.2)};
`,ym=(0,x.default)(I.Box)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,hm=(0,x.default)(Fn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Zn=({children:e,isExpandMode:t,error:n,previewContent:o,onCollapse:s})=>{const{formatMessage:l}=(0,W.useIntl)();return(0,r.useEffect)(()=>{const i=document.body;return t&&i.classList.add("lock-body-scroll"),()=>{t&&i.classList.remove("lock-body-scroll")}},[t]),t?r.createElement(dm.Portal,{role:"dialog","aria-modal":!1},r.createElement(Bn.FocusTrap,{onEscape:s},r.createElement(gm,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:s},r.createElement(I.Box,{id:"wysiwyg-expand",background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"70%",height:"70%",onClick:i=>i.stopPropagation()},r.createElement(U.Flex,{height:"100%",alignItems:"flex-start"},r.createElement(ym,{flex:"1",height:"100%"},e),r.createElement(I.Box,{flex:"1",height:"100%"},r.createElement(U.Flex,{height:(0,g.pxToRem)(48),background:"neutral100",justifyContent:"flex-end"},r.createElement(hm,{id:"collapse",onClick:s},r.createElement(B.Typography,null,l({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})),r.createElement(mm(),null))),r.createElement(I.Box,{position:"relative",height:"100%"},r.createElement(Ca,{data:o})))))))):r.createElement(I.Box,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0},e)};Zn.defaultProps={error:void 0,previewContent:""},Zn.propTypes={children:a().node.isRequired,error:a().string,isExpandMode:a().bool.isRequired,previewContent:a().string,onCollapse:a().func.isRequired};var bm=Object.defineProperty,Aa=Object.getOwnPropertySymbols,vm=Object.prototype.hasOwnProperty,Em=Object.prototype.propertyIsEnumerable,ka=(e,t,n)=>t in e?bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ja=(e,t)=>{for(var n in t||(t={}))vm.call(t,n)&&ka(e,n,t[n]);if(Aa)for(var n of Aa(t))Em.call(t,n)&&ka(e,n,t[n]);return e};const Cm=(0,x.default)(I.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Om=(0,x.default)(B.Typography)`
  line-height: 0;
`,Gn=({description:e,disabled:t,error:n,intlLabel:o,labelAction:s,name:l,onChange:i,placeholder:c,value:u,required:d})=>{const{formatMessage:f}=(0,W.useIntl)(),y=(0,r.useRef)(null),m=(0,r.useRef)(null),[h,b]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!1),[P,C]=(0,r.useState)(!1),{components:F}=(0,g.useLibrary)(),v=F["media-library"],R=()=>S(Y=>!Y),L=()=>b(Y=>!Y),T=()=>{b(!1),C(Y=>!Y)},Q=(Y,A,w)=>{switch(Y){case"Link":case"Strikethrough":{Fa(A,Y),w();break}case"Code":case"Quote":{um(A,Y),w();break}case"Bold":case"Italic":case"Underline":{Fa(A,Y);break}case"BulletList":case"NumberList":{am(A,Y),w();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{sm(A,Y);break}default:}},H=Y=>{const A=Y.map(w=>({alt:w.alternativeText||w.name,url:(0,g.prefixFileUrlWithBackendUrl)(w.url),mime:w.mime}));im(m,A),S(!1)},j=c?f({id:c.id,defaultMessage:c.defaultMessage},ja({},c.values)):"",Z=o.id?f({id:o.id,defaultMessage:o.defaultMessage},ja({},o.values)):l;return r.createElement(r.Fragment,null,r.createElement(ue.Stack,{spacing:1},r.createElement(ue.Stack,{horizontal:!0,spacing:1},r.createElement(B.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},Z,d&&r.createElement(Om,{textColor:"danger600"},"*")),s&&r.createElement(Cm,{paddingLeft:1},s)),r.createElement(Zn,{isExpandMode:P,error:n,previewContent:u,onCollapse:T},r.createElement(Yp,{isExpandMode:P,editorRef:m,isPreviewMode:h,onActionClick:Q,onToggleMediaLib:R,onTogglePreviewMode:P?void 0:L,disabled:t}),r.createElement(Lp,{disabled:t,isExpandMode:P,editorRef:m,error:n,isPreviewMode:h,name:l,onChange:i,placeholder:j,textareaRef:y,value:u}),!P&&r.createElement(Xp,{onToggleExpand:T})),r.createElement(om,{description:e,name:l,error:n})),n&&r.createElement(I.Box,{paddingTop:1},r.createElement(B.Typography,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0},n)),E&&r.createElement(v,{onClose:R,onSelectAssets:H}))};Gn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:""},Gn.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),disabled:a().bool,error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,labelAction:a().element,name:a().string.isRequired,onChange:a().func.isRequired,placeholder:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),required:a().bool,value:a().string};const Pm=Gn;var Rm=p(16285),Tm=p.n(Rm),Qe=p(20001),Mm=p(37475);const wm=x.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  /* BASICS */

  .colored {
    background-color: yellow;
    color: black !important;
  }

  > div {
    border-radius: 3px;
    > div:last-of-type {
      min-height: 253px;
      max-height: 506px;
    }
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    direction: ltr;
    z-index: 0;
  }
`,Im=(0,x.default)(I.Box)`
  border-radius: ${({theme:e})=>e.borderRadius};
  border: 1px solid ${({theme:e,error:t})=>t?e.colors.danger600:"transparent"};
`;var Dm=Object.defineProperty,$a=Object.getOwnPropertySymbols,Lm=Object.prototype.hasOwnProperty,Sm=Object.prototype.propertyIsEnumerable,Ba=(e,t,n)=>t in e?Dm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xm=(e,t)=>{for(var n in t||(t={}))Lm.call(t,n)&&Ba(e,n,t[n]);if($a)for(var n of $a(t))Sm.call(t,n)&&Ba(e,n,t[n]);return e};const Fm=(0,x.default)(I.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Qn=({intlLabel:e,labelAction:t,name:n,required:o})=>{const{formatMessage:s}=(0,W.useIntl)(),l=e!=null&&e.id?s({id:e.id,defaultMessage:e.defaultMessage},xm({},e.values)):n;return r.createElement(U.Flex,null,r.createElement(Qe.FieldLabel,{required:o},l),t&&r.createElement(Fm,{paddingLeft:1},t))};Qn.defaultProps={id:void 0,intlLabel:void 0,labelAction:void 0,required:!1},Qn.propTypes={id:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),labelAction:a().element,name:a().string.isRequired,required:a().bool};const Am=Qn,Yn=({name:e,hint:t,error:n,children:o})=>{const{formatMessage:s}=(0,W.useIntl)(),l=n?s({id:n,defaultMessage:n}):"";return r.createElement(Qe.Field,{name:e,hint:t&&s(t),error:l,id:e},o)};Yn.defaultProps={hint:void 0,error:""},Yn.propTypes={name:a().string.isRequired,hint:a().shape({id:a().string,defaultMessage:a().string}),error:a().string,children:a().node.isRequired};const km=Yn;var jm=Object.defineProperty,$m=(e,t,n)=>t in e?jm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,st=(e,t,n)=>($m(e,typeof t!="symbol"?t+"":t,n),n),Bm=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Nm=600,Vm="blackboard";(()=>Bm(void 0,null,function*(){yield p.e(3860).then(p.t.bind(p,87541,23)),yield p.e(2781).then(p.t.bind(p,80249,23)),yield p.e(953).then(p.t.bind(p,54745,23)),yield p.e(5178).then(p.t.bind(p,3903,23)),yield p.e(5509).then(p.t.bind(p,59577,23)),yield p.e(3973).then(p.bind(p,65701)),yield p.e(2218).then(p.bind(p,88333))}))();class Kn extends r.Component{constructor(t){super(t),st(this,"timer",null),st(this,"setInitValue",()=>{const{value:n}=this.props;try{return n===null?this.codeMirror.setValue(""):n===0?this.codeMirror.setValue("0"):this.codeMirror.setValue(n)}catch(o){return this.setState({error:!0})}}),st(this,"setSize",()=>this.codeMirror.setSize("100%","auto")),st(this,"getContentAtLine",n=>this.codeMirror.getLine(n)),st(this,"markSelection",({message:n})=>{let o=parseInt(n.split(":")[0].split("line ")[1],10)-1,s=this.getContentAtLine(o);s==="{"&&(o+=1,s=this.getContentAtLine(o));const l=s.length,i=l-Tm()(s," ").length,c=this.codeMirror.markText({line:o,ch:i},{line:o,ch:l},{className:"colored"});this.setState({markedText:c})}),st(this,"handleChange",(n,o)=>{if(o.origin==="setValue")return;const{name:s,onChange:l}=this.props;let i=n.getValue();i===""&&(i=null),l({target:{name:s,value:i,type:"json"}}),this.state.markedText&&(this.state.markedText.clear(),this.setState({markedText:null,error:null})),clearTimeout(this.timer),this.timer=setTimeout(()=>this.testJSON(n.getValue()),Nm)}),st(this,"testJSON",n=>{try{Mm.parse(n)}catch(o){this.markSelection(o)}}),this.editor=r.createRef(),this.state={error:!1,markedText:null}}componentDidMount(){this.codeMirror=Jt().fromTextArea(this.editor.current,{autoCloseBrackets:!0,lineNumbers:!0,matchBrackets:!0,mode:"application/json",readOnly:this.props.disabled,smartIndent:!0,styleSelectedText:!0,tabSize:2,theme:Vm,fontSize:"13px"}),this.codeMirror.on("change",this.handleChange),this.setSize(),this.setInitValue()}componentDidUpdate(t){t.value!==this.props.value&&!this.codeMirror.state.focused&&this.setInitValue()}render(){return this.state.error?r.createElement("div",null,"error json"):r.createElement(km,{name:this.props.name,hint:this.props.description,error:this.props.error},r.createElement(ue.Stack,{spacing:1},r.createElement(Am,{intlLabel:this.props.intlLabel,labelAction:this.props.labelAction,name:this.props.name,required:this.props.required}),r.createElement(Im,{error:this.props.error},r.createElement(wm,{disabled:this.props.disabled},r.createElement("textarea",{ref:this.editor,autoComplete:"off",id:this.props.id||this.props.name,defaultValue:""}))),r.createElement(Qe.FieldHint,null),r.createElement(Qe.FieldError,null)))}}Kn.defaultProps={description:null,disabled:!1,id:void 0,error:void 0,intlLabel:void 0,labelAction:void 0,onChange(){},value:null,required:!1},Kn.propTypes={description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),disabled:a().bool,error:a().string,id:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),labelAction:a().element,name:a().string.isRequired,onChange:a().func,value:a().any,required:a().bool};const qm=Kn;var Jn=p(37178),zm=p(23101),Na=p.n(zm),Wm=p(14356),Um=p.n(Wm),_m=p(50678),It=p.n(_m),Hm=p(103),Zm=p.n(Hm);const Va=(e,t)=>{const[n,o]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const s=setTimeout(()=>{o(e)},t);return()=>{clearTimeout(s)}},[e,t]),n},Gm=/^[A-Za-z0-9-_.~]*$/,Qm=(0,x.default)(I.Box)`
  position: relative;
`,Ym=(0,x.default)(Qe.FieldAction)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Xn=(0,x.default)(U.Flex)`
  position: absolute;
  right: ${({theme:e})=>e.spaces[6]};
  width: 100px;
  pointer-events: none;

  svg {
    margin-right: ${({theme:e})=>e.spaces[1]};
    height: ${12/16}rem;
    width: ${12/16}rem;
    path {
      fill: ${({theme:e,notAvailable:t})=>t?e.colors.danger600:e.colors.success600};
    }
  }
`,Km=x.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,Jm=(0,x.default)(U.Flex)`
  animation: ${Km} 2s infinite linear;
`;var Xm=Object.defineProperty,qa=Object.getOwnPropertySymbols,ef=Object.prototype.hasOwnProperty,tf=Object.prototype.propertyIsEnumerable,za=(e,t,n)=>t in e?Xm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,er=(e,t)=>{for(var n in t||(t={}))ef.call(t,n)&&za(e,n,t[n]);if(qa)for(var n of qa(t))tf.call(t,n)&&za(e,n,t[n]);return e},Wa=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const tr=({attribute:e,contentTypeUID:t,description:n,disabled:o,error:s,intlLabel:l,labelAction:i,name:c,onChange:u,value:d,placeholder:f,required:y})=>{const{modifiedData:m,initialData:h,layout:b}=(0,g.useCMEditViewDataManager)(),[E,S]=(0,r.useState)(!1),[P,C]=(0,r.useState)(null),F=Va(d,300),v=(0,r.useRef)(),R=h[c],{formatMessage:L}=(0,W.useIntl)(),T=M()(b,["options","timestamps",0]),Q=!h[T],H=Va(m[e.targetField],300),[j,Z]=(0,r.useState)(!1),[Y,A]=(0,r.useState)(null),w=l.id?L({id:l.id,defaultMessage:l.defaultMessage},er({},l.values)):c,K=n?L({id:n.id,defaultMessage:n.defaultMessage},er({},n.values)):"",N=f?L({id:f.id,defaultMessage:f.defaultMessage},er({},f.values)):"";v.current=(D=!1)=>Wa(void 0,null,function*(){S(!0);const V=ye("uid/generate");try{const{data:{data:_}}=yield fe.be.post(V,{contentTypeUID:t,field:c,data:m});u({target:{name:c,value:_,type:"text"}},D),S(!1)}catch(_){S(!1)}});const G=()=>Wa(void 0,null,function*(){S(!0);const D=ye("uid/check-availability");if(!!d)try{const{data:V}=yield fe.be.post(D,{contentTypeUID:t,field:c,value:d?d.trim():""});C(V),S(!1)}catch(V){S(!1)}});(0,r.useEffect)(()=>{!d&&e.required&&v.current(!0)},[]),(0,r.useEffect)(()=>{F&&F.trim().match(Gm)&&F!==R&&G(),F||C(null)},[F,R]),(0,r.useEffect)(()=>{let D;return P&&P.isAvailable&&(D=setTimeout(()=>{C(null)},4e3)),()=>{D&&clearTimeout(D)}},[P]),(0,r.useEffect)(()=>{!j&&Q&&H&&m[e.targetField]&&!d&&v.current(!0)},[H,j,Q]);const z=()=>{A(L({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}))},$=()=>{A(null)},k=D=>{D.target.value&&Q&&Z(!0),u(D)};return r.createElement(Jn.TextInput,{disabled:o,error:s,endAction:r.createElement(Qm,null,P&&P.isAvailable&&!Y&&r.createElement(Xn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(Um(),null),r.createElement(B.Typography,{textColor:"success600",variant:"pi"},L({id:"content-manager.components.uid.available",defaultMessage:"Available"}))),P&&!P.isAvailable&&!Y&&r.createElement(Xn,{notAvailable:!0,alignItems:"center",justifyContent:"flex-end"},r.createElement(It(),null),r.createElement(B.Typography,{textColor:"danger600",variant:"pi"},L({id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"}))),Y&&r.createElement(Xn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(B.Typography,{textColor:"primary600",variant:"pi"},Y)),r.createElement(Ym,{onClick:()=>v.current(),label:"regenerate",onMouseEnter:z,onMouseLeave:$},E?r.createElement(Jm,null,r.createElement(Zm(),null)):r.createElement(Na(),null))),hint:K,label:w,labelAction:i,name:c,onChange:k,placeholder:N,value:d||"",required:y})};tr.propTypes={attribute:a().shape({targetField:a().string,required:a().bool}).isRequired,contentTypeUID:a().string.isRequired,description:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),disabled:a().bool,error:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,labelAction:a().element,name:a().string.isRequired,onChange:a().func.isRequired,value:a().string,placeholder:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),required:a().bool},tr.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1};const nf=tr;var rf=p(88423),nr=p.n(rf),of=p(54450),Ua=p(31544),af=p(58434),_a=p(78752),rr=p(74201),Dt=p(44826),sf=Object.defineProperty,en=Object.getOwnPropertySymbols,Ha=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable,Ga=(e,t,n)=>t in e?sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lf=(e,t)=>{for(var n in t||(t={}))Ha.call(t,n)&&Ga(e,n,t[n]);if(en)for(var n of en(t))Za.call(t,n)&&Ga(e,n,t[n]);return e},cf=(e,t)=>{var n={};for(var o in e)Ha.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&en)for(var o of en(e))t.indexOf(o)<0&&Za.call(e,o)&&(n[o]=e[o]);return n};const or=e=>{var t=e,{children:n,loadMore:o,search:s,totalNumberOfRelations:l,size:i}=t,c=cf(t,["children","loadMore","search","totalNumberOfRelations","size"]);return r.createElement(r.Fragment,null,r.createElement(U.Flex,{paddingBottom:l>0?3:0,gap:2,justifyContent:"space-between",alignItems:"end",wrap:"wrap"},r.createElement(ue.Stack,lf({basis:i<=6?"100%":"70%",spacing:1},c),s),o),n)};or.defaultProps={search:void 0,loadMore:void 0,totalNumberOfRelations:0},or.propTypes={children:a().node.isRequired,search:a().node,loadMore:a().node,size:a().number.isRequired,totalNumberOfRelations:a().number};var uf=Object.defineProperty,tn=Object.getOwnPropertySymbols,Qa=Object.prototype.hasOwnProperty,Ya=Object.prototype.propertyIsEnumerable,Ka=(e,t,n)=>t in e?uf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,df=(e,t)=>{for(var n in t||(t={}))Qa.call(t,n)&&Ka(e,n,t[n]);if(tn)for(var n of tn(t))Ya.call(t,n)&&Ka(e,n,t[n]);return e},pf=(e,t)=>{var n={};for(var o in e)Qa.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&tn)for(var o of tn(e))t.indexOf(o)<0&&Ya.call(e,o)&&(n[o]=e[o]);return n};const mf=(0,x.default)(U.Flex)`
  width: 100%;
  /* Used to prevent endAction to be pushed out of container */
  min-width: 0;
`,ar=e=>{var t=e,{children:n,disabled:o,endAction:s,style:l}=t,i=pf(t,["children","disabled","endAction","style"]);return r.createElement(I.Box,{style:l,as:"li"},r.createElement(U.Flex,df({paddingTop:2,paddingBottom:2,paddingLeft:4,paddingRight:4,hasRadius:!0,borderSize:1,background:o?"neutral150":"neutral0",borderColor:"neutral200",justifyContent:"space-between"},i),r.createElement(mf,{justifyContent:"space-between"},n),s&&r.createElement(I.Box,{paddingLeft:4},s)))};ar.defaultProps={disabled:!1,endAction:void 0,style:void 0},ar.propTypes={children:a().node.isRequired,disabled:a().bool,endAction:a().node,style:a().shape({height:a().number,left:a().number,position:a().string,right:a().number,width:a().string})};var ff=Object.defineProperty,nn=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Xa=Object.prototype.propertyIsEnumerable,es=(e,t,n)=>t in e?ff(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gf=(e,t)=>{for(var n in t||(t={}))Ja.call(t,n)&&es(e,n,t[n]);if(nn)for(var n of nn(t))Xa.call(t,n)&&es(e,n,t[n]);return e},yf=(e,t)=>{var n={};for(var o in e)Ja.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&nn)for(var o of nn(e))t.indexOf(o)<0&&Xa.call(e,o)&&(n[o]=e[o]);return n};const hf=(0,x.default)(I.Box)`
  position: relative;
  overflow-x: hidden;
  overflow-y: auto;

  &:before,
  &:after {
    position: absolute;
    width: 100%;
    height: 4px;
    z-index: 1;
  }

  &:before {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: ${({overflowDirection:e})=>e==="top-bottom"||e==="top"?"''":void 0};
    background: linear-gradient(rgba(33, 33, 52, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
    top: 0;
  }

  &:after {
    /* TODO: as for DS Table component we would need this to be handled by the DS theme */
    content: ${({overflowDirection:e})=>e==="top-bottom"||e==="bottom"?"''":void 0};
    background: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(33, 33, 52, 0.1) 100%);
    bottom: 0;
  }
`,sr=e=>{var t=e,{children:n,overflow:o}=t,s=yf(t,["children","overflow"]);return r.createElement(hf,gf({overflowDirection:o},s),r.createElement(ue.Stack,{spacing:1},n))};sr.defaultProps={overflow:""},sr.propTypes={children:a().node.isRequired,overflow:a().oneOf(["top-bottom","bottom","top",""])};var bf=p(65384),vf=Object.defineProperty,ts=Object.getOwnPropertySymbols,Ef=Object.prototype.hasOwnProperty,Cf=Object.prototype.propertyIsEnumerable,ns=(e,t,n)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rs=(e,t)=>{for(var n in t||(t={}))Ef.call(t,n)&&ns(e,n,t[n]);if(ts)for(var n of ts(t))Cf.call(t,n)&&ns(e,n,t[n]);return e};const Of=x.default.div`
  flex-shrink: 0;
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
`,os=e=>{const{formatMessage:t}=(0,W.useIntl)(),n=bf.components.Option,{publicationState:o,mainField:s,id:l}=e.data;if(o){const i=o==="draft",c={id:O("components.Select.draft-info-title"),defaultMessage:"State: Draft"},u={id:O("components.Select.publish-info-title"),defaultMessage:"State: Published"},d=t(i?c:u);return r.createElement(n,rs({},e),r.createElement(U.Flex,null,r.createElement(Of,{title:d,isDraft:i}),r.createElement(B.Typography,{ellipsis:!0},s!=null?s:l)))}return r.createElement(n,rs({},e),s!=null?s:l)};os.propTypes={isFocused:a().bool.isRequired,data:a().shape({id:a().number.isRequired,isDraft:a().bool,mainField:a().string,publicationState:a().oneOfType([a().string,a().bool])}).isRequired};const rn=50;var Pf=Object.defineProperty,Rf=Object.defineProperties,Tf=Object.getOwnPropertyDescriptors,as=Object.getOwnPropertySymbols,Mf=Object.prototype.hasOwnProperty,wf=Object.prototype.propertyIsEnumerable,ss=(e,t,n)=>t in e?Pf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,If=(e,t)=>{for(var n in t||(t={}))Mf.call(t,n)&&ss(e,n,t[n]);if(as)for(var n of as(t))wf.call(t,n)&&ss(e,n,t[n]);return e},Df=(e,t)=>Rf(e,Tf(t));const Lf=(0,x.default)(af.Link)`
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: inherit;
`,Sf=(0,x.default)(I.Box)`
  > span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: inherit;
  }
`,xf=x.default.button`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }

  &:hover svg path,
  &:focus svg path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,ir=({description:e,disabled:t,error:n,id:o,name:s,numberOfRelationsToDisplay:l,label:i,labelAction:c,labelLoadMore:u,labelDisconnectRelation:d,loadingMessage:f,noRelationsMessage:y,onRelationConnect:m,onRelationLoadMore:h,onRelationDisconnect:b,onSearchNextPage:E,onSearch:S,placeholder:P,publicationStateTranslations:C,required:F,relations:v,searchResults:R,size:L})=>{var T;const[Q,H]=(0,r.useState)(null),j=(0,r.useRef)(),Z=(0,r.useRef)(),[Y,A]=(0,r.useState)(""),{data:w}=R,K=v.data,N=(T=K.length)!=null?T:0,G=(0,r.useMemo)(()=>N>l?Math.min(N,l)*rn+rn/2:Math.min(N,l)*rn,[N,l]),z=!!u&&!t&&v.hasNextPage||v.isLoading,$=(0,r.useMemo)(()=>w.flat().filter(Boolean).map(be=>Df(If({},be),{value:be.id,label:be.mainField})),[w]);(0,r.useEffect)(()=>{if(N<=l)return A("");const be=Me=>{const je=Me.target.parentNode.scrollHeight,tt=Me.target.scrollHeight-Me.target.scrollTop;return Me.target.scrollTop===0?A("bottom"):A(tt===je?"top":"top-bottom")},Ve=Z==null?void 0:Z.current;return!v.isLoading&&K.length>0&&Ve&&Z.current.addEventListener("scroll",be),()=>{Ve&&Ve.removeEventListener("scroll",be)}},[v,K,l,N]);const[k,D]=(0,r.useState)(!1),V=(0,r.useRef)(),_=(0,r.useRef)([]);(0,r.useEffect)(()=>($.length>0&&_.current.length===0&&D(be=>(be&&(V.current=setTimeout(()=>{D(!0)},10)),!1)),()=>{_.current=$||[]}),[$]),(0,r.useEffect)(()=>()=>{V.current&&clearTimeout(V.current)},[]);const ne=()=>{D(!1)},re=()=>{D(!0),S()},q=rd(K.length),oe=(0,r.useRef)(),Ne=()=>{oe.current="loadMore",h()};return(0,r.useEffect)(()=>{oe.current==="onChange"&&K.length!==q?j.current.scrollToItem(K.length,"end"):oe.current==="loadMore"&&K.length!==q&&j.current.scrollToItem(0,"start")},[q,K]),r.createElement(Qe.Field,{error:n,name:s,hint:e,id:o},r.createElement(or,{totalNumberOfRelations:N,size:L,search:r.createElement(r.Fragment,null,r.createElement(Qe.FieldLabel,{action:c,required:F},i),r.createElement(g.ReactSelect,{menuPosition:"absolute",menuPlacement:"auto",components:{Option:os},options:$,isDisabled:t,isLoading:R.isLoading,error:n,inputId:o,isSearchable:!0,isClear:!0,loadingMessage:()=>f,onChange:be=>{H(null),m(be),oe.current="onChange"},onInputChange:be=>{H(be),S(be)},onMenuClose:ne,onMenuOpen:re,menuIsOpen:k,noOptionsMessage:()=>y,onMenuScrollToBottom:()=>{R.hasNextPage&&E()},placeholder:P,name:s,value:Q})),loadMore:z&&r.createElement(rr.TextButton,{disabled:v.isLoading||v.isFetchingNextPage,onClick:Ne,loading:v.isLoading||v.isFetchingNextPage,startIcon:r.createElement(Na(),null)},u)},r.createElement(sr,{overflow:Y},r.createElement(of.t7,{height:G,ref:j,outerRef:Z,itemCount:N,itemSize:rn,itemData:K,innerElementType:"ol"},({data:be,index:Ve,style:Me})=>{const{publicationState:je,href:tt,mainField:qe,id:Pe}=be[Ve],nt=je==="draft"?"secondary":"success";return r.createElement(ar,{disabled:t,key:`relation-${s}-${Pe}`,endAction:r.createElement(xf,{"data-testid":`remove-relation-${Pe}`,disabled:t,type:"button",onClick:()=>b(be[Ve]),"aria-label":d},r.createElement(_a.Icon,{width:"12px",as:Tn()})),style:Me},r.createElement(Sf,{minWidth:0,paddingTop:1,paddingBottom:1,paddingRight:4},r.createElement(Dt.Tooltip,{description:qe!=null?qe:`${Pe}`},tt?r.createElement(Lf,{to:tt,disabled:t},qe!=null?qe:Pe):r.createElement(B.Typography,{textColor:t?"neutral600":"primary600",ellipsis:!0},qe!=null?qe:Pe))),je&&r.createElement(Ua.Status,{variant:nt,showBullet:!1,size:"S"},r.createElement(B.Typography,{fontWeight:"bold",textColor:`${nt}700`},C[je])))})),(e||n)&&r.createElement(I.Box,{paddingTop:2},r.createElement(Qe.FieldHint,null),r.createElement(Qe.FieldError,null))))},Ff=a().shape({data:a().arrayOf(a().shape({href:a().string,id:a().number.isRequired,publicationState:a().oneOfType([a().string,a().bool]),mainField:a().oneOfType([a().string,a().number])})),hasNextPage:a().bool,isFetchingNextPage:a().bool.isRequired,isLoading:a().bool.isRequired,isSuccess:a().bool.isRequired}),Af=a().shape({data:a().arrayOf(a().shape({id:a().number.isRequired,href:a().string,mainField:a().oneOfType([a().string,a().number]),publicationState:a().oneOfType([a().string,a().bool])})),hasNextPage:a().bool,isLoading:a().bool.isRequired,isSuccess:a().bool.isRequired});ir.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:null,labelLoadMore:null,required:!1,relations:{data:[]},searchResults:{data:[]}},ir.propTypes={error:a().string,description:a().string,disabled:a().bool,id:a().string.isRequired,label:a().string.isRequired,labelAction:a().element,labelLoadMore:a().string,labelDisconnectRelation:a().string.isRequired,loadingMessage:a().string.isRequired,name:a().string.isRequired,noRelationsMessage:a().string.isRequired,numberOfRelationsToDisplay:a().number.isRequired,onRelationConnect:a().func.isRequired,onRelationDisconnect:a().func.isRequired,onRelationLoadMore:a().func.isRequired,onSearch:a().func.isRequired,onSearchNextPage:a().func.isRequired,placeholder:a().string.isRequired,publicationStateTranslations:a().shape({draft:a().string.isRequired,published:a().string.isRequired}).isRequired,required:a().bool,searchResults:Af,size:a().number.isRequired,relations:Ff};const kf=ir;var it=p(84968),jf=Object.defineProperty,is=Object.getOwnPropertySymbols,$f=Object.prototype.hasOwnProperty,Bf=Object.prototype.propertyIsEnumerable,ls=(e,t,n)=>t in e?jf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cs=(e,t)=>{for(var n in t||(t={}))$f.call(t,n)&&ls(e,n,t[n]);if(is)for(var n of is(t))Bf.call(t,n)&&ls(e,n,t[n]);return e};function Nf(e,t){return n=>{const o=t(n);return r.createElement(e,cs(cs({},n),o))}}const Vf=Nf;var qf=Object.defineProperty,zf=Object.defineProperties,Wf=Object.getOwnPropertyDescriptors,us=Object.getOwnPropertySymbols,Uf=Object.prototype.hasOwnProperty,_f=Object.prototype.propertyIsEnumerable,ds=(e,t,n)=>t in e?qf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hf=(e,t)=>{for(var n in t||(t={}))Uf.call(t,n)&&ds(e,n,t[n]);if(us)for(var n of us(t))_f.call(t,n)&&ds(e,n,t[n]);return e},Zf=(e,t)=>zf(e,Wf(t));function Gf({componentUid:e,isUserAllowedToEditField:t,isUserAllowedToReadField:n,name:o,queryInfos:s}){var l;const{isCreatingEntry:i,createActionAllowedFields:c,readActionAllowedFields:u,updateActionAllowedFields:d,slug:f,initialData:y}=(0,g.useCMEditViewDataManager)(),m=(0,r.useMemo)(()=>t===!0?!0:(i?c:d).includes(o),[i,c,o,t,d]),h=(0,r.useMemo)(()=>n?!0:(i?[]:u).includes(o),[i,n,o,u]),b=o.split(".");let E;e&&(E=(l=M()(y,b.slice(0,-1)))==null?void 0:l.id);const S=(0,r.useMemo)(()=>i?null:e?E?ye(`relations/${e}/${E}/${b.at(-1)}`):null:ye(`relations/${f}/${y.id}/${o.split(".").at(-1)}`),[i,e,f,y.id,o,E,b]),P=(0,r.useMemo)(()=>ye(e?`relations/${e}/${o.split(".").at(-1)}`:`relations/${f}/${o.split(".").at(-1)}`),[e,f,o]);return{componentId:E,isComponentRelation:Boolean(e),queryInfos:Zf(Hf({},s),{endpoints:{search:P,relation:S}}),isCreatingEntry:i,isFieldAllowed:m,isFieldReadable:h}}const Qf=Gf;function Yf(e,t){return`${ye(`collectionType/${e}/${t!=null?t:""}`)}`}const on={DRAFT:"draft",PUBLISHED:"published"},lr=5,Kf=10;var Jf=Object.defineProperty,ps=Object.getOwnPropertySymbols,Xf=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable,ms=(e,t,n)=>t in e?Jf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tg=(e,t)=>{for(var n in t||(t={}))Xf.call(t,n)&&ms(e,n,t[n]);if(ps)for(var n of ps(t))eg.call(t,n)&&ms(e,n,t[n]);return e};const cr=(e,{shouldAddLink:t,mainFieldName:n,targetModel:o})=>{const s=tg({},e);return t&&(s.href=Yf(o,s.id)),s.publicationState=!1,(s==null?void 0:s.publishedAt)!==void 0&&(s.publicationState=s.publishedAt?on.PUBLISHED:on.DRAFT),s.mainField=s[n],s},ng=(e,{shouldAddLink:t=!1,mainFieldName:n,targetModel:o}={})=>[...e].map(s=>cr(s,{shouldAddLink:t,mainFieldName:n,targetModel:o}));var rg=Object.defineProperty,og=Object.defineProperties,ag=Object.getOwnPropertyDescriptors,fs=Object.getOwnPropertySymbols,sg=Object.prototype.hasOwnProperty,ig=Object.prototype.propertyIsEnumerable,gs=(e,t,n)=>t in e?rg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lg=(e,t)=>{for(var n in t||(t={}))sg.call(t,n)&&gs(e,n,t[n]);if(fs)for(var n of fs(t))ig.call(t,n)&&gs(e,n,t[n]);return e},cg=(e,t)=>og(e,ag(t));const ug=(e,{mainFieldName:t})=>{const{data:n}=e,{pages:o=[]}=n!=null?n:{};return cg(lg({},e),{data:o.map(s=>s==null?void 0:s.results.map(l=>cr(l,{mainFieldName:t}))).filter(Boolean).flat()})},dg=(e=[],t=[])=>{const n=e.reduce((s,l)=>t.find(i=>i.id===l.id)?s:[...s,l.id],[]),o=t.reduce((s,l)=>e.find(i=>i.id===l.id)?s:[...s,l.id],[]);return[n,o]};var pg=Object.defineProperty,mg=Object.defineProperties,fg=Object.getOwnPropertyDescriptors,ys=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,yg=Object.prototype.propertyIsEnumerable,hs=(e,t,n)=>t in e?pg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lt=(e,t)=>{for(var n in t||(t={}))gg.call(t,n)&&hs(e,n,t[n]);if(ys)for(var n of ys(t))yg.call(t,n)&&hs(e,n,t[n]);return e},an=(e,t)=>mg(e,fg(t)),bs=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const hg=(e,{name:t,relation:n,search:o})=>{const[s,l]=(0,r.useState)({}),[i,c]=(0,r.useState)(0),u=v=>bs(void 0,[v],function*({pageParam:R=1}){var L;try{const{data:T}=yield fe.be.get(n==null?void 0:n.endpoint,{params:an(Lt({},(L=n.pageParams)!=null?L:{}),{page:R})});return c(R),T}catch(T){return null}}),d=v=>bs(void 0,[v],function*({pageParam:R=1}){var L;try{const{data:T}=yield fe.be.get(o.endpoint,{params:an(Lt(Lt({},(L=o.pageParams)!=null?L:{}),s),{page:R})});return T}catch(T){return null}}),{onLoad:f,normalizeArguments:y={}}=n,m=(0,it.useInfiniteQuery)(["relation",e],u,{cacheTime:0,enabled:n.enabled,getNextPageParam(v){const R=!(v!=null&&v.pagination);if(!(!v||R||(v==null?void 0:v.pagination.page)>=(v==null?void 0:v.pagination.pageCount)))return v.pagination.page+1},select:v=>an(Lt({},v),{pages:v.pages.map(R=>{if(!R)return R;const{data:L,results:T,pagination:Q}=R,H=!!L;let j=[];return H?j=[L]:T&&(j=[...T].reverse()),{pagination:Q,results:j}})})}),{pageGoal:h}=n,{status:b,data:E,fetchNextPage:S,hasNextPage:P}=m;(0,r.useEffect)(()=>{h>i&&P&&b==="success"&&S({pageParam:i+1})},[h,i,S,P,b]),(0,r.useEffect)(()=>{var v,R;if(b==="success"&&E&&((R=(v=E.pages)==null?void 0:v.at(-1))==null?void 0:R.results)&&f){const L=ng(E.pages.at(-1).results,y);f({target:{name:t,value:L}})}},[b,f,t,E]);const C=(0,it.useInfiniteQuery)(["relation",e,"search",JSON.stringify(s)],d,{enabled:Object.keys(s).length>0,getNextPageParam(v){if(!(!(v!=null&&v.pagination)||v.pagination.page>=v.pagination.pageCount))return v.pagination.page+1}});return{relations:m,search:C,searchFor:(v,R={})=>{l(an(Lt({},R),{_q:v}))}}};var bg=Object.defineProperty,vg=Object.defineProperties,Eg=Object.getOwnPropertyDescriptors,vs=Object.getOwnPropertySymbols,Cg=Object.prototype.hasOwnProperty,Og=Object.prototype.propertyIsEnumerable,Es=(e,t,n)=>t in e?bg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ur=(e,t)=>{for(var n in t||(t={}))Cg.call(t,n)&&Es(e,n,t[n]);if(vs)for(var n of vs(t))Og.call(t,n)&&Es(e,n,t[n]);return e},dr=(e,t)=>vg(e,Eg(t));const pr=({error:e,componentId:t,isComponentRelation:n,editable:o,description:s,intlLabel:l,isCreatingEntry:i,isFieldAllowed:c,isFieldReadable:u,labelAction:d,mainField:f,name:y,queryInfos:{endpoints:m,defaultParams:h,shouldDisplayRelationLink:b},placeholder:E,required:S,relationType:P,size:C,targetModel:F})=>{var v,R,L,T,Q,H,j;const{formatMessage:Z}=(0,W.useIntl)(),{connectRelation:Y,disconnectRelation:A,loadRelation:w,modifiedData:K,slug:N,initialData:G}=(0,g.useCMEditViewDataManager)(),z=(v=M()(K,y))!=null?v:[],$=Math.ceil(M()(G,y,[]).length/lr),{relations:k,search:D,searchFor:V}=hg(`${N}-${y}-${(R=G==null?void 0:G.id)!=null?R:""}`,{name:y,relation:{enabled:!!m.relation,endpoint:m.relation,pageGoal:$,pageParams:dr(ur({},h),{pageSize:lr}),onLoad:w,normalizeArguments:{mainFieldName:f.name,shouldAddLink:b,targetModel:F}},search:{endpoint:m.search,pageParams:dr(ur({},h),{entityId:i?void 0:n?t:G.id,pageSize:Kf})}}),_=(0,r.useMemo)(()=>P.toLowerCase().includes("morph"),[P]),ne=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(P),re=(0,r.useMemo)(()=>_?!0:i?!o:!c&&u||!o,[_,i,o,c,u]),q=Pe=>{const nt=cr(Pe,{mainFieldName:f.name,shouldAddLink:b,targetModel:F});Y({name:y,value:nt,toOneRelation:ne})},oe=Pe=>{A({name:y,id:Pe.id})},Ne=()=>{k.fetchNextPage()},be=(Pe="")=>{const[nt,co]=dg(z,M()(G,y));V(Pe,{idsToInclude:co,idsToOmit:nt})},Ve=()=>{D.fetchNextPage()};if(!c&&i||!i&&!c&&!u)return r.createElement(g.NotAllowedInput,{name:y,intlLabel:l,labelAction:d});const Me=z.length,je=((L=M()(G,y))!=null?L:[]).length,tt=(j=(H=(Q=(T=k.data)==null?void 0:T.pages[0])==null?void 0:Q.pagination)==null?void 0:H.total)!=null?j:0,qe=!k.data&&Me===je?Me:Me-je+tt;return r.createElement(kf,{error:e,description:s,disabled:re,id:y,label:`${Z({id:l.id,defaultMessage:l.defaultMessage})} ${qe>0?`(${qe})`:""}`,labelAction:d,labelLoadMore:i?null:Z({id:O("relation.loadMore"),defaultMessage:"Load More"}),labelDisconnectRelation:Z({id:O("relation.disconnect"),defaultMessage:"Remove"}),listHeight:320,loadingMessage:Z({id:O("relation.isLoading"),defaultMessage:"Relations are loading"}),name:y,noRelationsMessage:Z({id:O("relation.notAvailable"),defaultMessage:"No relations available"}),numberOfRelationsToDisplay:lr,onRelationConnect:Pe=>q(Pe),onRelationDisconnect:Pe=>oe(Pe),onRelationLoadMore:()=>Ne(),onSearch:Pe=>be(Pe),onSearchNextPage:()=>Ve(),placeholder:Z(E||{id:O("relation.add"),defaultMessage:"Add relation"}),publicationStateTranslations:{[on.DRAFT]:Z({id:O("relation.publicationState.draft"),defaultMessage:"Draft"}),[on.PUBLISHED]:Z({id:O("relation.publicationState.published"),defaultMessage:"Published"})},relations:nr()(dr(ur({},k),{data:z}),"data","hasNextPage","isFetchingNextPage","isLoading","isSuccess"),required:S,searchResults:ug(D,{mainFieldName:f.name}),size:C})};pr.defaultProps={componentId:void 0,editable:!0,error:void 0,description:"",labelAction:null,isComponentRelation:!1,isFieldAllowed:!0,placeholder:null,required:!1},pr.propTypes={componentId:a().number,editable:a().bool,error:a().string,description:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,labelAction:a().element,isCreatingEntry:a().bool.isRequired,isComponentRelation:a().bool,isFieldAllowed:a().bool,isFieldReadable:a().bool.isRequired,mainField:a().shape({name:a().string.isRequired,schema:a().shape({type:a().string.isRequired}).isRequired}).isRequired,name:a().string.isRequired,placeholder:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),required:a().bool,relationType:a().string.isRequired,size:a().number.isRequired,targetModel:a().string.isRequired,queryInfos:a().shape({defaultParams:a().shape({locale:a().string}),endpoints:a().shape({relation:a().string,search:a().string.isRequired}).isRequired,shouldDisplayRelationLink:a().bool.isRequired}).isRequired};const Pg=(0,r.memo)(pr),Rg=Vf(Pg,Qf);var Tg=Object.defineProperty,Cs=Object.getOwnPropertySymbols,Mg=Object.prototype.hasOwnProperty,wg=Object.prototype.propertyIsEnumerable,Os=(e,t,n)=>t in e?Tg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ps=(e,t)=>{for(var n in t||(t={}))Mg.call(t,n)&&Os(e,n,t[n]);if(Cs)for(var n of Cs(t))wg.call(t,n)&&Os(e,n,t[n]);return e};function Ig(e,t){return n=>{const o=t(n.keys);return r.createElement(e,Ps(Ps({},n),o))}}const Dg=Ig,Lg=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],Sg=(e="")=>{switch((0,J.toLower)(e)){case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}},xg=e=>{let t;return e==="float"||e==="decimal"?t=.01:t=1,t};function Fg(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:o,modifiedData:s,onChange:l,readActionAllowedFields:i,shouldNotRunValidations:c,updateActionAllowedFields:u}=(0,g.useCMEditViewDataManager)(),d=(0,r.useMemo)(()=>o?t:u,[o,t,u]),f=(0,r.useMemo)(()=>o?[]:i,[o,i]),y=(0,J.get)(s,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:o,onChange:l,readableFields:f,shouldNotRunValidations:c,value:y}}const Ag=Fg,Rs=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];var kg=Object.defineProperty,jg=Object.defineProperties,$g=Object.getOwnPropertyDescriptors,Ts=Object.getOwnPropertySymbols,Bg=Object.prototype.hasOwnProperty,Ng=Object.prototype.propertyIsEnumerable,Ms=(e,t,n)=>t in e?kg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mr=(e,t)=>{for(var n in t||(t={}))Bg.call(t,n)&&Ms(e,n,t[n]);if(Ts)for(var n of Ts(t))Ng.call(t,n)&&Ms(e,n,t[n]);return e},Vg=(e,t)=>jg(e,$g(t));function fr({allowedFields:e,componentUid:t,fieldSchema:n,formErrors:o,isCreatingEntry:s,keys:l,labelAction:i,metadatas:c,onChange:u,readableFields:d,shouldNotRunValidations:f,queryInfos:y,value:m,size:h}){const{fields:b}=(0,g.useLibrary)(),{formatMessage:E}=(0,W.useIntl)(),{contentType:S}=Ye(),P=(0,g.useCustomFields)(),C=(0,r.useMemo)(()=>!M()(c,"editable",!0),[c]),{type:F,customField:v}=n,R=M()(o,[l],null),L=(0,r.useMemo)(()=>Lo(l),[l]),T=(0,r.useMemo)(()=>{const re=Nd()(n,f?[...Rs,"required","minLength"]:Rs),q=n.regex||null;if(q){const oe=new RegExp(q);oe&&(re.regex=oe)}return re},[n,f]),Q=(0,r.useMemo)(()=>M()(T,["required"],!1),[T]),H=(0,r.useMemo)(()=>{const re=M()(S,["attributes"],{});return M()(re,[L[0],"type"],null)==="dynamiczone"},[S,L]),j=(0,r.useMemo)(()=>Sg(F),[F]),Z=(0,r.useMemo)(()=>F==="media"&&!m?[]:m,[F,m]),Y=(0,r.useMemo)(()=>xg(F),[F]),A=(0,r.useMemo)(()=>{const re=L.join(".");if(e.includes(re))return!0;if(H)return e.includes(L[0]);if(L.length>1){const oe=Vn()(L,L.length-1).join(".");return e.includes(oe)}return!1},[e,L,H]),w=(0,r.useMemo)(()=>{const re=L.join(".");if(d.includes(re))return!0;if(H)return d.includes(L[0]);if(L.length>1){const oe=Vn()(L,L.length-1).join(".");return d.includes(oe)}return!1},[d,L,H]),K=(0,r.useMemo)(()=>w||A,[A,w]),N=(0,r.useMemo)(()=>s?C:w&&!A?!0:C,[C,s,A,w]),G=(0,r.useMemo)(()=>Lg(n.enum||[],Q),[n,Q]),{label:z,description:$,placeholder:k,visible:D}=c,V=(0,r.useMemo)(()=>{if(!c.step||j!=="datetime"&&j!=="time")return Y;if(!Z)return c.step;let re;return j==="datetime"?re=parseInt(Z.substr(14,2),10):j==="time"&&(re=parseInt(Z.slice(-2),10)),re%c.step===0?c.step:Y},[j,Z,c.step,Y]),_=(0,r.useMemo)(()=>{if(v){const re=P.get(v);return r.lazy(re.components.Input)}return null},[v,P]);if(D===!1)return null;if(!K)return r.createElement(g.NotAllowedInput,{description:$?{id:$,defaultMessage:$}:null,intlLabel:{id:z,defaultMessage:z},labelAction:i,error:R&&E(R),name:l,required:Q});if(F==="relation")return r.createElement(Rg,Vg(mr(mr({},c),n),{componentUid:t,description:c.description?E({id:c.description,defaultMessage:c.description}):void 0,intlLabel:{id:c.label,defaultMessage:c.label},labelAction:i,isUserAllowedToEditField:A,isUserAllowedToReadField:w,name:l,placeholder:c.placeholder?{id:c.placeholder,defaultMessage:c.placeholder}:null,queryInfos:y,size:h,value:m,error:R&&E(R)}));const ne=mr({json:qm,uid:nf,media:b.media,wysiwyg:Pm},b);return v&&(ne[v]=_),r.createElement(g.GenericInput,{attribute:n,autoComplete:"new-password",intlLabel:{id:z,defaultMessage:z},isNullable:j==="bool"&&[null,void 0].includes(n.default),description:$?{id:$,defaultMessage:$}:null,disabled:N,error:R,labelAction:i,contentTypeUID:S.uid,customInputs:ne,multiple:n.multiple||!1,name:l,onChange:u,options:G,placeholder:k?{id:k,defaultMessage:k}:null,required:n.required||!1,step:V,type:v||j,value:Z,withDefaultValue:!1})}fr.defaultProps={componentUid:void 0,formErrors:{},labelAction:void 0,size:void 0,value:null,queryInfos:{}},fr.propTypes={allowedFields:a().array.isRequired,componentUid:a().string,fieldSchema:a().object.isRequired,formErrors:a().object,keys:a().string.isRequired,isCreatingEntry:a().bool.isRequired,labelAction:a().element,metadatas:a().object.isRequired,onChange:a().func.isRequired,readableFields:a().array.isRequired,size:a().number,shouldNotRunValidations:a().bool.isRequired,value:a().any,queryInfos:a().shape({containsKey:a().string,defaultParams:a().object,endPoint:a().string})};const qg=(0,r.memo)(fr,Ze()),gr=Dg(qg,Ag),yr=({componentUid:e,isFromDynamicZone:t,isNested:n,name:o})=>{const{getComponentLayout:s}=Ye(),i=(0,r.useMemo)(()=>s(e),[e,s]).layouts.edit;return r.createElement(I.Box,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":""},r.createElement(ue.Stack,{spacing:6},i.map((c,u)=>r.createElement(de.Grid,{gap:4,key:u},c.map(({name:d,size:f,metadatas:y,fieldSchema:m,queryInfos:h})=>{const b=m.type==="component",E=`${o}.${d}`;if(b){const S=m.component;return r.createElement(de.GridItem,{col:f,s:12,xs:12,key:d},r.createElement(sn,{componentUid:S,intlLabel:{id:y.label,defaultMessage:y.label},isNested:!0,isRepeatable:m.repeatable,max:m.max,min:m.min,name:E,required:m.required||!1}))}return r.createElement(de.GridItem,{col:f,key:d,s:12,xs:12},r.createElement(gr,{componentUid:e,keys:E,fieldSchema:m,metadatas:y,queryInfos:h,size:f}))})))))};yr.defaultProps={isFromDynamicZone:!1,isNested:!1},yr.propTypes={componentUid:a().string.isRequired,isFromDynamicZone:a().bool,isNested:a().bool,name:a().string.isRequired};const zg=yr;var Wg=p(59290),St=p.n(Wg),Ug=Object.defineProperty,ws=Object.getOwnPropertySymbols,_g=Object.prototype.hasOwnProperty,Hg=Object.prototype.propertyIsEnumerable,Is=(e,t,n)=>t in e?Ug(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ds=(e,t)=>{for(var n in t||(t={}))_g.call(t,n)&&Is(e,n,t[n]);if(ws)for(var n of ws(t))Hg.call(t,n)&&Is(e,n,t[n]);return e};function Zg(e,t){return n=>{const o=t(n);return r.createElement(e,Ds(Ds({},n),o))}}const Gg=Zg;function Qg(){const{addRepeatableComponentToField:e,formErrors:t}=(0,g.useCMEditViewDataManager)();return{addRepeatableComponentToField:e,formErrors:t}}const Yg=Qg;function Kg(e,t){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}var hr=p(51968),Jg=p(41119),Ls=p.n(Jg);const Xg=x.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,ey=()=>r.createElement(Xg,{padding:6,background:"primary100"}),ty=(0,x.default)(Te.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,Ss=(0,x.default)(Te.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,ny=x.default.span`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>e.spaces[4]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  height: ${50/16}rem;
`,ry=(0,x.default)(rr.TextButton)`
  text-align: left;

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral500};
    }
  }
`,xs=({displayedValue:e})=>r.createElement(ny,null,r.createElement(ue.Stack,{horizontal:!0,spacing:3,flex:1},r.createElement(U.Flex,{justifyContent:"center",borderRadius:"50%",height:`${24/16}rem}`,width:`${24/16}rem}`,"aria-hidden":!0,as:"span",background:"neutral200"},r.createElement(_a.Icon,{as:mo(),width:`${8/16}rem}`,color:"neutral600"})),r.createElement(ry,{onClick:()=>{},flex:1},r.createElement(B.Typography,{fontWeight:"bold",textColor:"neutral700"},e))),r.createElement(ue.Stack,{horizontal:!0,spacing:0},r.createElement(Ss,{noBorder:!0,onClick:()=>{},icon:r.createElement(We(),null)}),r.createElement(Ss,{icon:r.createElement(mt(),null),noBorder:!0})));xs.propTypes={displayedValue:a().string.isRequired};const oy=xs;var ay=Object.defineProperty,Fs=Object.getOwnPropertySymbols,sy=Object.prototype.hasOwnProperty,iy=Object.prototype.propertyIsEnumerable,As=(e,t,n)=>t in e?ay(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ks=(e,t)=>{for(var n in t||(t={}))sy.call(t,n)&&As(e,n,t[n]);if(Fs)for(var n of Fs(t))iy.call(t,n)&&As(e,n,t[n]);return e};function ly(e,t){return n=>{const o=t(n);return r.createElement(e,ks(ks({},n),o))}}const cy=ly;function uy({schema:e,componentFieldName:t}){const{checkFormErrors:n,modifiedData:o,moveComponentField:s,removeRepeatableField:l,triggerFormValidation:i}=(0,g.useCMEditViewDataManager)(),c=(0,r.useMemo)(()=>(0,J.get)(e,["settings","mainField"],"id"),[e]);return{displayedValue:(0,J.toString)((0,J.get)(o,[...t.split("."),c],"")),mainField:c,checkFormErrors:n,moveComponentField:s,removeRepeatableField:l,schema:e,triggerFormValidation:i}}const dy=uy,py=x.default.span`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  padding: 0 ${({theme:e})=>e.spaces[3]};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,br=({componentFieldName:e,componentUid:t,hasErrorMessage:n,hasErrors:o,isDraggingSibling:s,isOpen:l,isReadOnly:i,onClickToggle:c,schema:u,toggleCollapses:d,moveComponentField:f,removeRepeatableField:y,setIsDraggingSibling:m,triggerFormValidation:h,displayedValue:b})=>{const E=(0,r.useRef)(null),S=(0,r.useRef)(null),[,P]=(0,r.useState)(!1),{formatMessage:C}=(0,W.useIntl)(),F=u.layouts.edit,[,v]=(0,Fe.useDrop)({accept:Re.COMPONENT,canDrop(){return!1},hover(Z,Y){if(!S.current)return;const A=Z.originalPath,w=e,K=A.split("."),N=K.slice().splice(-1).join(""),G=w.split(".").splice(-1).join(""),z=K.slice(0,K.length-1),$=parseInt(N,10),k=parseInt(G,10);if($===k)return;const D=S.current.getBoundingClientRect(),V=(D.bottom-D.top)/2,ne=Y.getClientOffset().y-D.top;$<k&&ne<V||$>k&&ne>V||A.split(".").length===w.split(".").length&&(f(z,$,k),Z.originalPath=w)}}),[{isDragging:R},L,T]=(0,Fe.useDrag)({type:Re.COMPONENT,item(){return d(-1),{displayedValue:b,originalPath:e}},end(){h(),m(!1)},collect:Z=>({isDragging:Z.isDragging()})});(0,r.useEffect)(()=>{T((0,hr.rX)(),{captureDraggingState:!1})},[T]),(0,r.useEffect)(()=>{R&&m(!0)},[R,m]),(0,r.useEffect)(()=>{s||P(Z=>!Z)},[s]);const Q={dragRef:L(E),dropRef:v(S)},H=Ls()(b),j=o?"error":void 0;return r.createElement(I.Box,{ref:Q?Q.dropRef:null},R&&r.createElement(ey,null),!R&&s&&r.createElement(oy,{displayedValue:H,componentFieldName:e}),!R&&!s&&r.createElement(Ge.Accordion,{error:j,hasErrorMessage:n,expanded:l,onToggle:c,id:e,size:"S"},r.createElement(Ge.AccordionToggle,{action:i?null:r.createElement(ue.Stack,{horizontal:!0,spacing:0},r.createElement(ty,{expanded:l,noBorder:!0,onClick:()=>{y(e),d()},label:C({id:O("containers.Edit.delete"),defaultMessage:"Delete"}),icon:r.createElement(We(),null)}),r.createElement(Dt.Tooltip,{description:C({id:O("components.DragHandle-label"),defaultMessage:"Drag"})},r.createElement(py,{role:"button",tabIndex:-1,ref:Q.dragRef,onClick:Z=>Z.stopPropagation()},r.createElement(mt(),null)))),title:H,togglePosition:"left"}),r.createElement(Ge.AccordionContent,null,r.createElement(ue.Stack,{background:"neutral100",padding:6,spacing:6},F.map((Z,Y)=>r.createElement(de.Grid,{gap:4,key:Y},Z.map(({name:A,fieldSchema:w,metadatas:K,queryInfos:N,size:G})=>{const z=w.type==="component",$=`${e}.${A}`;if(z){const k=w.component;return r.createElement(de.GridItem,{col:G,s:12,xs:12,key:A},r.createElement(sn,{componentUid:k,intlLabel:{id:K.label,defaultMessage:K.label},isRepeatable:w.repeatable,isNested:!0,name:$,max:w.max,min:w.min,required:w.required}))}return r.createElement(de.GridItem,{key:$,col:G,s:12,xs:12},r.createElement(gr,{componentUid:t,fieldSchema:w,keys:$,metadatas:K,queryInfos:N,size:G}))})))))))};br.defaultProps={componentUid:void 0,isDraggingSibling:!1,isOpen:!1,setIsDraggingSibling(){},toggleCollapses(){}},br.propTypes={componentFieldName:a().string.isRequired,componentUid:a().string,hasErrorMessage:a().bool.isRequired,hasErrors:a().bool.isRequired,isDraggingSibling:a().bool,isOpen:a().bool,isReadOnly:a().bool.isRequired,onClickToggle:a().func.isRequired,schema:a().object.isRequired,toggleCollapses:a().func,moveComponentField:a().func.isRequired,removeRepeatableField:a().func.isRequired,setIsDraggingSibling:a().func,triggerFormValidation:a().func.isRequired,displayedValue:a().string.isRequired};const my=(0,r.memo)(br),fy=cy(my,dy);var js=p(87910),gy=Object.defineProperty,$s=Object.getOwnPropertySymbols,yy=Object.prototype.hasOwnProperty,hy=Object.prototype.propertyIsEnumerable,Bs=(e,t,n)=>t in e?gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,by=(e,t)=>{for(var n in t||(t={}))yy.call(t,n)&&Bs(e,n,t[n]);if($s)for(var n of $s(t))hy.call(t,n)&&Bs(e,n,t[n]);return e};const vy=(0,x.default)(I.Box)`
  overflow: hidden;
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,Ey=(0,x.default)(I.Box)`
  > div {
    & > * {
      border-radius: unset;
      border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    > div {
      > div:first-of-type {
        border-radius: unset;
      }
    }
  }

  > div:first-of-type {
    > div {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      > div:first-of-type {
        border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      }
    }

    > div:not([data-strapi-expanded='true']) {
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};

      &:hover {
        border-top: 1px solid ${({theme:e})=>e.colors.primary600};
      }
    }

    > span {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
  }

  & [data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }

  ${({theme:e,footer:t})=>`
    &:not(${t}) {
      & > *:last-of-type {
        border-radius: 0 0 ${e.borderRadius} ${e.borderRadius};
      }
    }
  `}
`,Cy=(0,x.default)(I.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,vr=({children:e,footer:t,label:n,labelAction:o,error:s})=>{const{formatMessage:l}=(0,W.useIntl)(),i=r.Children.toArray(e).map(c=>(0,r.cloneElement)(c,{hasErrorMessage:!1}));return r.createElement(js.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},n&&r.createElement(U.Flex,{paddingBottom:1},r.createElement(B.Typography,{as:"label",textColor:"neutral800",variant:"pi",fontWeight:"bold"},n),o&&r.createElement(Cy,{paddingLeft:1},o)),r.createElement(Ey,{footer:t},i),t&&r.createElement(vy,null,t),s&&r.createElement(I.Box,{paddingTop:1},r.createElement(B.Typography,{variant:"pi",textColor:"danger600"},l({id:s.id,defaultMessage:s.id},by({},s.values)))))};vr.defaultProps={error:void 0,footer:null,label:null,labelAction:void 0},vr.propTypes={children:a().node.isRequired,error:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),footer:a().node,label:a().string,labelAction:a().node};const Oy=vr,Py=(0,x.default)(rr.TextButton)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,Er=({addRepeatableComponentToField:e,formErrors:t,componentUid:n,componentValue:o,componentValueLength:s,isReadOnly:l,max:i,min:c,name:u})=>{const d=(0,g.useNotification)(),{formatMessage:f}=(0,W.useIntl)(),[y,m]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[,E]=(0,Fe.useDrop)({accept:Re.COMPONENT}),{getComponentLayout:S,components:P}=Ye(),C=(0,r.useMemo)(()=>S(n),[n,S]),F=(0,r.useMemo)(()=>So(o||[])+1,[o]),v=Kg(u,t),R=()=>{m("")},L=c-s,T=M()(t,u,{id:""}).id.includes("min"),Q=(0,r.useCallback)(()=>{l||(s<i?(e(u,C,P,T),m(F)):s>=i&&d({type:"info",message:{id:O("components.notification.info.maximum-requirement")}}))},[P,e,C,s,T,l,i,u,F,d]);let H=t[u];return T&&(H={id:O("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:L}}),s===0?r.createElement(ya,{error:H,isReadOnly:l,onClick:Q}):(v.some(Z=>Z.split(".").length>1)&&!T&&(H={id:O("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),r.createElement(I.Box,{hasRadius:!0,ref:E},r.createElement(Oy,{error:H,footer:r.createElement(U.Flex,{justifyContent:"center",height:"48px",background:"neutral0"},r.createElement(Py,{disabled:l,onClick:Q,startIcon:r.createElement(St(),null)},f({id:O("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})))},o.map((Z,Y)=>{const A=Z.__temp_key__,w=y===A,K=`${u}.${Y}`,N=v.includes(K);return r.createElement(fy,{componentFieldName:K,componentUid:n,hasErrors:N,hasMinError:T,isDraggingSibling:h,isOpen:w,isReadOnly:l,key:A,onClickToggle:()=>{m(w?"":A)},parentName:u,schema:C,setIsDraggingSibling:b,toggleCollapses:R})}))))};Er.defaultProps={componentValue:null,componentValueLength:0,formErrors:{},max:1/0,min:0},Er.propTypes={addRepeatableComponentToField:a().func.isRequired,componentUid:a().string.isRequired,componentValue:a().oneOfType([a().array,a().object]),componentValueLength:a().number,formErrors:a().object,isReadOnly:a().bool.isRequired,max:a().number,min:a().number,name:a().string.isRequired};const Ry=(0,r.memo)(Er),Ty=Gg(Ry,Yg);var My=Object.defineProperty,Ns=Object.getOwnPropertySymbols,wy=Object.prototype.hasOwnProperty,Iy=Object.prototype.propertyIsEnumerable,Vs=(e,t,n)=>t in e?My(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qs=(e,t)=>{for(var n in t||(t={}))wy.call(t,n)&&Vs(e,n,t[n]);if(Ns)for(var n of Ns(t))Iy.call(t,n)&&Vs(e,n,t[n]);return e};function Dy(e,t){return n=>{const o=t(n);return r.createElement(e,qs(qs({},n),o))}}const Ly=Dy;function Sy({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:o,isCreatingEntry:s,modifiedData:l,removeComponentFromField:i,readActionAllowedFields:c,updateActionAllowedFields:u,formErrors:d}=(0,g.useCMEditViewDataManager)(),{contentType:f}=Ye(),y=(0,r.useMemo)(()=>{const C=(0,J.get)(f,["attributes"],{});return Object.keys(C).filter(v=>(0,J.get)(C,[v,"type"],"")==="dynamiczone")},[f]),m=(0,r.useMemo)(()=>s?o:u,[s,o,u]),h=(0,J.get)(l,t,null),b=(0,r.useMemo)(()=>Lo(t),[t]),E=(0,r.useMemo)(()=>e&&s||m.filter(v=>v===b[0]).length>0?!0:m.map(v=>v.split(".")).filter(v=>v.length<b.length?!1:(0,J.take)(v,b.length).join(".")===b.join(".")).length>0,[e,s,m,b]),S=(0,r.useMemo)(()=>e||y.includes(b[0])?!0:(s?[]:c).map(v=>v.split(".")).filter(v=>v.length<b.length?!1:(0,J.take)(v,b.length).join(".")===b.join(".")).length>0,[e,y,b,s,c]),P=(0,r.useMemo)(()=>s||E?!1:S,[E,S,s]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:E,hasChildrenReadableFields:S,isCreatingEntry:s,isReadOnly:P,removeComponentFromField:i,componentValue:h}}const xy=Sy,Fy=(0,x.default)(I.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Cr=({intlLabel:e,id:t,labelAction:n,name:o,numberOfEntries:s,showNumberOfEntries:l,required:i})=>{const{formatMessage:c}=(0,W.useIntl)(),u=e!=null&&e.id?c(e):o;return r.createElement(I.Box,{paddingBottom:1},r.createElement(U.Flex,null,r.createElement(B.Typography,{textColor:"neutral800",htmlFor:t||o,variant:"pi",fontWeight:"bold",as:"label"},u,l&&r.createElement(r.Fragment,null,"\xA0(",s,")"),i&&r.createElement(B.Typography,{textColor:"danger600"},"*")),n&&r.createElement(Fy,{paddingLeft:1},n)))};Cr.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},Cr.propTypes={id:a().string,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}).isRequired,labelAction:a().element,name:a().string.isRequired,numberOfEntries:a().number,required:a().bool,showNumberOfEntries:a().bool};const Ay=Cr,Or=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:o,isFromDynamicZone:s,isRepeatable:l,isNested:i,labelAction:c,max:u,min:d,name:f,hasChildrenAllowedFields:y,hasChildrenReadableFields:m,isReadOnly:h,componentValue:b,removeComponentFromField:E,required:S})=>{const{formatMessage:P}=(0,W.useIntl)(),C=xd()(b),F=b!==null||s,v=!l&&F&&!s&&y,{getComponentLayout:R,components:L}=Ye(),T=(0,r.useMemo)(()=>R(t),[t,R]);if(!y&&o)return r.createElement(g.NotAllowedInput,{labelAction:c,intlLabel:n,name:f});if(!y&&!o&&!m)return r.createElement(g.NotAllowedInput,{labelAction:c,intlLabel:n,name:f});const Q=()=>{e(f,T,L)};return r.createElement(I.Box,null,r.createElement(U.Flex,{justifyContent:"space-between"},n&&r.createElement(Ay,{intlLabel:n,labelAction:c,name:f,numberOfEntries:C,showNumberOfEntries:l,required:S}),v&&r.createElement(Te.IconButton,{label:P({id:O("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:r.createElement(We(),null),noBorder:!0,onClick:()=>{E(f,t)}})),r.createElement(ue.Stack,{spacing:1},!l&&!F&&r.createElement(ya,{isReadOnly:h,onClick:Q}),!l&&F&&r.createElement(zg,{componentUid:t,isFromDynamicZone:s,isNested:i,name:f}),l&&r.createElement(Ty,{componentValue:b,componentValueLength:C,componentUid:t,isReadOnly:h,max:u,min:d,name:f})))};Or.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},Or.propTypes={addNonRepeatableComponentToField:a().func.isRequired,componentUid:a().string.isRequired,componentValue:a().oneOfType([a().object,a().array]),hasChildrenAllowedFields:a().bool,hasChildrenReadableFields:a().bool,isCreatingEntry:a().bool.isRequired,isFromDynamicZone:a().bool,isReadOnly:a().bool,isRepeatable:a().bool,isNested:a().bool,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired,values:a().object}),labelAction:a().element,max:a().number,min:a().number,name:a().string.isRequired,removeComponentFromField:a().func.isRequired,required:a().bool};const ky=(0,r.memo)(Or,Ze()),sn=Ly(ky,xy),jy=(0,x.default)(I.Box)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,$y=()=>r.createElement(U.Flex,{justifyContent:"center"},r.createElement(jy,{background:"neutral200"})),By=(0,x.default)(ue.Stack)`
  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,Pr=(0,x.default)(Te.IconButton)`
  background-color: transparent;
`,Ny=(0,x.default)(I.Box)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,Vy=(0,x.default)(I.Box)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,zs=({componentUid:e,formErrors:t,index:n,isOpen:o,isFieldAllowed:s,moveComponentDown:l,moveComponentUp:i,name:c,onToggle:u,removeComponentFromDynamicZone:d,showDownIcon:f,showUpIcon:y})=>{const{formatMessage:m}=(0,W.useIntl)(),{getComponentLayout:h}=Ye(),{icon:b,friendlyName:E}=(0,r.useMemo)(()=>{const{info:{icon:H,displayName:j}}=h(e);return{friendlyName:j,icon:H}},[e,h]),S=()=>l(c,n),P=()=>i(c,n),C=()=>d(c,n),F=m({id:O("components.DynamicZone.move-down-label"),defaultMessage:"Move component down"}),v=m({id:O("components.DynamicZone.move-up-label"),defaultMessage:"Move component down"}),R=m({id:O("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:E}),T=Object.keys(t).filter(H=>{const j=H.split(".");return`${j[0]}.${j[1]}`==`${c}.${n}`});let Q;return T.length>0&&(Q=m({id:O("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"})),r.createElement(I.Box,null,r.createElement($y,null),r.createElement(Ny,{hasRadius:!0},r.createElement(Ge.Accordion,{expanded:o,onToggle:()=>u(n),size:"S",error:Q},r.createElement(Ge.AccordionToggle,{startIcon:r.createElement($n.G,{icon:b}),action:r.createElement(By,{horizontal:!0,spacing:0,expanded:o},f&&r.createElement(Pr,{noBorder:!0,label:F,onClick:S,icon:r.createElement(Id(),null)}),y&&r.createElement(Pr,{noBorder:!0,label:v,onClick:P,icon:r.createElement(Ld(),null)}),s&&r.createElement(Pr,{noBorder:!0,label:R,onClick:C,icon:r.createElement(We(),null)})),title:E,togglePosition:"left"}),r.createElement(Ge.AccordionContent,null,r.createElement(Vy,{background:"neutral0"},r.createElement(r.Suspense,{fallback:r.createElement(U.Flex,{justifyContent:"center",paddingTop:4,paddingBottom:4},r.createElement(ma.Loader,null,"Loading content."))},r.createElement(Bn.FocusTrap,{onEscape:()=>u(n)},r.createElement(sn,{componentUid:e,icon:b,name:`${c}.${n}`,isFromDynamicZone:!0}))))))))};zs.propTypes={componentUid:a().string.isRequired,formErrors:a().object.isRequired,index:a().number.isRequired,isFieldAllowed:a().bool.isRequired,isOpen:a().bool.isRequired,moveComponentDown:a().func.isRequired,moveComponentUp:a().func.isRequired,name:a().string.isRequired,onToggle:a().func.isRequired,removeComponentFromDynamicZone:a().func.isRequired,showDownIcon:a().bool.isRequired,showUpIcon:a().bool.isRequired};const qy=(0,r.memo)(zs,Ze());var zy=p(81346),Wy=p.n(zy);const Ws=(0,x.default)($n.G)`
  width: ${(0,g.pxToRem)(32)} !important;
  height: ${(0,g.pxToRem)(32)} !important;
  padding: ${(0,g.pxToRem)(9)};
  border-radius: ${(0,g.pxToRem)(64)};
  background: ${({theme:e})=>e.colors.neutral150};
  path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Uy=(0,x.default)(I.Box)`
  flex-shrink: 0;
  height: ${(0,g.pxToRem)(84)};
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;
  align-items: center;

  &.active,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${Ws} {
      background: ${({theme:e})=>e.colors.primary200};
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${B.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;function Rr({componentUid:e,intlLabel:t,icon:n,onClick:o}){const{formatMessage:s}=(0,W.useIntl)(),l=()=>{o(e)};return r.createElement("button",{type:"button",onClick:l},r.createElement(Uy,{borderRadius:"borderRadius"},r.createElement(ue.Stack,{spacing:1,style:{justifyContent:"center",alignItems:"center"}},r.createElement(Ws,{icon:n}),r.createElement(B.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral600"},s(t)))))}Rr.defaultProps={icon:"dice-d6",onClick(){}},Rr.propTypes={componentUid:a().string.isRequired,intlLabel:a().shape({id:a().string.isRequired,defaultMessage:a().string.isRequired}).isRequired,icon:a().string,onClick:a().func};const _y=Rr,Hy=x.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,Us=({category:e,components:t,isOdd:n,isOpen:o,onAddComponent:s,onToggle:l})=>{const{formatMessage:i}=(0,W.useIntl)(),c=()=>{l(e)};return r.createElement(Ge.Accordion,{expanded:o,onToggle:c,size:"S"},r.createElement(Ge.AccordionToggle,{variant:n?"primary":"secondary",title:i({id:e,defaultMessage:e}),togglePosition:"left"}),r.createElement(Ge.AccordionContent,null,r.createElement(I.Box,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3},r.createElement(Hy,null,t.map(({componentUid:u,info:{displayName:d,icon:f}})=>r.createElement(_y,{key:u,componentUid:u,intlLabel:{id:d,defaultMessage:d},icon:f,onClick:s}))))))};Us.propTypes={category:a().string.isRequired,components:a().array.isRequired,isOdd:a().bool.isRequired,isOpen:a().bool.isRequired,onAddComponent:a().func.isRequired,onToggle:a().func.isRequired};const Zy=Us,_s=({components:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:o}=(0,W.useIntl)(),{getComponentLayout:s}=Ye(),[l,i]=(0,r.useState)(""),c=(0,r.useMemo)(()=>{const f=e.map(m=>{const{category:h,info:b}=s(m);return{componentUid:m,category:h,info:b}}),y=Wy()(f,"category");return Object.keys(y).reduce((m,h)=>(m.push({category:h,components:y[h]}),m),[])},[e,s]);(0,r.useEffect)(()=>{t&&c.length&&i(c[0].category)},[t,c]);const u=(0,r.useCallback)(f=>{n(f),i("")},[n]),d=(0,r.useCallback)(f=>{i(l===f?"":f)},[l]);return t?r.createElement(I.Box,{paddingBottom:6},r.createElement(I.Box,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0},r.createElement(U.Flex,{justifyContent:"center"},r.createElement(B.Typography,{fontWeight:"bold",textColor:"neutral600"},o({id:O("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"}))),r.createElement(I.Box,{paddingTop:2},r.createElement(js.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},c.map(({category:f,components:y},m)=>r.createElement(Zy,{key:f,category:f,components:y,isOdd:m%2===1,isOpen:f===l,onAddComponent:u,onToggle:d})))))):null};_s.propTypes={components:a().array.isRequired,isOpen:a().bool.isRequired,onClickAddComponent:a().func.isRequired};const Gy=(0,r.memo)(_s);var Qy=Object.defineProperty,Yy=Object.defineProperties,Ky=Object.getOwnPropertyDescriptors,Hs=Object.getOwnPropertySymbols,Jy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable,Zs=(e,t,n)=>t in e?Qy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eh=(e,t)=>{for(var n in t||(t={}))Jy.call(t,n)&&Zs(e,n,t[n]);if(Hs)for(var n of Hs(t))Xy.call(t,n)&&Zs(e,n,t[n]);return e},th=(e,t)=>Yy(e,Ky(t));const Gs=e=>Array.from({length:e}).map(()=>({isOpen:!1})),Tr=({name:e,addComponentToDynamicZone:t,formErrors:n,isCreatingEntry:o,isFieldAllowed:s,isFieldReadable:l,labelAction:i,moveComponentUp:c,moveComponentDown:u,removeComponentFromDynamicZone:d,dynamicDisplayedComponents:f,fieldSchema:y,metadatas:m})=>{const h=(0,g.useNotification)(),[b,E]=(0,r.useState)(!1),[S,P]=(0,r.useState)(!1),{getComponentLayout:C,components:F}=Ye(),v=f.length,R=m.description?{id:m.description,defaultMessage:m.description}:null,[L,T]=(0,r.useState)(Gs(v));(0,r.useEffect)(()=>{T(Gs(v))},[v]),(0,r.useEffect)(()=>{S&&(T(V=>V.map((_,ne)=>ne===V.length-1?th(eh({},_),{isOpen:!0}):_)),P(!1))},[S]);const{max:Q=1/0,min:H=-1/0}=y,j=(0,r.useMemo)(()=>Object.keys(n).filter(V=>V===e).map(V=>n[V]),[n,e]),Z=(0,r.useMemo)(()=>y.components||[],[y]),Y=H-v,A=j.length>0,w=j.length>0&&M()(j,[0,"id"],"").includes("min"),K=A&&M()(j,[0,"id"],"")==="components.Input.error.validation.max",N=(0,r.useCallback)(V=>{E(!1);const _=C(V);t(e,_,F,A),P(!0)},[t,A,e,F,C]),G=()=>{v<Q?E(V=>!V):h({type:"info",message:{id:O("components.notification.info.maximum-requirement")}})},z=V=>{T(_=>_.map(({isOpen:ne},re)=>re===V?{isOpen:!ne}:{isOpen:ne}))},$=(V,_)=>{u(V,_),T(ne=>ne.map(({isOpen:re},q,oe)=>q===_+1?{isOpen:oe[_].isOpen}:q===_?{isOpen:oe[q+1].isOpen}:{isOpen:re}))},k=(V,_)=>{c(V,_),T(ne=>ne.map(({isOpen:re},q,oe)=>q===_-1?{isOpen:oe[_].isOpen}:q===_?{isOpen:oe[q-1].isOpen}:{isOpen:re}))},D=(V,_)=>{d(V,_)};return!s&&o?r.createElement(g.NotAllowedInput,{description:R,intlLabel:{id:m.label,defaultMessage:m.label},labelAction:i,name:e}):!s&&!l&&!o?r.createElement(g.NotAllowedInput,{description:R,intlLabel:{id:m.label,defaultMessage:m.label},labelAction:i,name:e}):r.createElement(ue.Stack,{spacing:6},v>0&&r.createElement(I.Box,null,r.createElement(Md,{intlDescription:R,label:m.label,labelAction:i,name:e,numberOfComponents:v,required:y.required||!1}),f.map((V,_)=>{var ne;const re=s&&v>0&&_<v-1,q=s&&v>0&&_>0,oe=((ne=L[_])==null?void 0:ne.isOpen)||!1;return r.createElement(qy,{componentUid:V,formErrors:n,key:_,index:_,isOpen:oe,isFieldAllowed:s,moveComponentDown:$,moveComponentUp:k,onToggle:z,name:e,removeComponentFromDynamicZone:D,showDownIcon:re,showUpIcon:q})})),r.createElement(Rd,{hasError:A,hasMaxError:K,hasMinError:w,isDisabled:!s,label:m.label,missingComponentNumber:Y,isOpen:b,name:e,onClick:G}),r.createElement(Gy,{isOpen:b,components:Z,onClickAddComponent:N}))};Tr.defaultProps={dynamicDisplayedComponents:[],fieldSchema:{max:1/0,min:-1/0},labelAction:null},Tr.propTypes={addComponentToDynamicZone:a().func.isRequired,dynamicDisplayedComponents:a().array,fieldSchema:a().shape({components:a().array.isRequired,max:a().number,min:a().number,required:a().bool}),formErrors:a().object.isRequired,isCreatingEntry:a().bool.isRequired,isFieldAllowed:a().bool.isRequired,isFieldReadable:a().bool.isRequired,labelAction:a().element,metadatas:a().shape({description:a().string,label:a().string}).isRequired,moveComponentUp:a().func.isRequired,moveComponentDown:a().func.isRequired,name:a().string.isRequired,removeComponentFromDynamicZone:a().func.isRequired};const nh=(0,r.memo)(Tr,Ze()),rh=bd(nh,Ed);var lt=p(41578);const ln=()=>({type:lt.ZA}),Mr=e=>({type:lt.Id,data:e}),wr=(e,t=!1)=>({type:lt.TP,rawQuery:e,isSingleType:t}),Qs=()=>({type:lt.c2}),Ys=(e,t)=>({type:lt.w7,componentsDataStructure:e,contentTypeDataStructure:t}),me=e=>({type:lt.d0,status:e}),Ke=e=>({type:lt.t9,data:e}),Ks=e=>e["content-manager_editViewCrudReducer"];var oh=p(98399),ah=Object.defineProperty,Js=Object.getOwnPropertySymbols,sh=Object.prototype.hasOwnProperty,ih=Object.prototype.propertyIsEnumerable,Xs=(e,t,n)=>t in e?ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lh=(e,t)=>{for(var n in t||(t={}))sh.call(t,n)&&Xs(e,n,t[n]);if(Js)for(var n of Js(t))ih.call(t,n)&&Xs(e,n,t[n]);return e},Je=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const Ir=({allLayoutData:e,children:t,slug:n,id:o,origin:s})=>{const l=(0,it.useQueryClient)(),i=(0,g.useNotification)(),{setCurrentStep:c}=(0,g.useGuidedTour)(),{trackUsage:u}=(0,g.useTracking)(),{push:d,replace:f}=(0,ee.useHistory)(),[{rawQuery:y}]=(0,g.useQueryParams)(),m=(0,he.useDispatch)(),{componentsDataStructure:h,contentTypeDataStructure:b,data:E,isLoading:S,status:P}=(0,he.useSelector)(Ks),C=Xo(n),F=(0,r.useRef)(!0),v=(0,r.useRef)(u),R=(0,r.useRef)(e),L=o===null,T=(0,r.useMemo)(()=>L&&!s?null:ye(`collection-types/${n}/${s||o}`),[n,o,L,s]),Q=(0,r.useCallback)(z=>s?(0,g.contentManagementUtilRemoveFieldsFromData)(z,R.current.contentType,R.current.components):z,[s]),H=(0,r.useCallback)(z=>{const $=No(z,R.current.contentType,R.current.components);return(0,g.formatContentTypeData)($,R.current.contentType,R.current.components)},[]);(0,r.useEffect)(()=>{const z=Object.keys(e.components).reduce((D,V)=>{const _=Wt(M()(e,["components",V,"attributes"],{}),e.components);return D[V]=(0,g.formatContentTypeData)(_,e.components[V],e.components),D},{}),$=Wt(e.contentType.attributes,e.components),k=(0,g.formatContentTypeData)($,e.contentType,e.components);m(Ys(z,k))},[e,m]),(0,r.useEffect)(()=>()=>{m(Qs())},[m]),(0,r.useEffect)(()=>{const $=$e().CancelToken.source(),k=V=>Je(void 0,null,function*(){m(ln());try{const{data:_}=yield fe.be.get(T,{cancelToken:V.token});m(Mr(H(Q(_))))}catch(_){if($e().isCancel(_))return;oh.error(_);const ne=M()(_,"response.status",null);if(ne===404){d(C);return}ne===403&&(i({type:"info",message:{id:O("permissions.not-allowed.update")}}),d(C))}}),D=()=>Je(void 0,null,function*(){yield m(ln()),yield m(wr(y))});return F.current?(T?k($):D(),()=>{$.cancel("Operation canceled by the user.")}):()=>{}},[Q,H,d,T,m,y,C,i]);const j=(0,r.useCallback)(z=>{const $=z.response.data;let k=M()($,["error","message"],"Bad Request");Array.isArray(k)&&(k=M()(k,["0","messages","0","id"])),typeof k=="string"&&i({type:"warning",message:k})},[i]),Z=(0,r.useCallback)(z=>Je(void 0,null,function*(){try{v.current("willDeleteEntry",z);const{data:$}=yield fe.be.delete(ye(`collection-types/${n}/${o}`));return i({type:"success",message:{id:O("success.record.delete")}}),v.current("didDeleteEntry",z),Promise.resolve($)}catch($){return v.current("didNotDeleteEntry",lh({error:$},z)),Promise.reject($)}}),[o,n,i]),Y=(0,r.useCallback)(()=>{f(C)},[C,f]),A=(0,r.useCallback)((z,$)=>Je(void 0,null,function*(){const k=`${ye(`collection-types/${n}`)}${y}`;try{m(me("submit-pending"));const{data:D}=yield fe.be.post(k,z);return v.current("didCreateEntry",$),i({type:"success",message:{id:O("success.record.save")}}),c("contentManager.success"),l.invalidateQueries(["relation"]),m(Ke(H(D))),m(me("resolved")),f(`/content-manager/collectionType/${n}/${D.id}${y}`),Promise.resolve(D)}catch(D){return j(D),v.current("didNotCreateEntry",{error:D,trackerProperty:$}),m(me("resolved")),Promise.reject(D)}}),[H,j,f,n,m,y,i,c,l]),w=(0,r.useCallback)(()=>Je(void 0,null,function*(){try{v.current("willCheckDraftRelations");const z=ye(`collection-types/${n}/${o}/actions/numberOfDraftRelations`);m(me("draft-relation-check-pending"));const $=yield fe.be.get(z);return v.current("didCheckDraftRelations"),m(me("resolved")),$.data.data}catch(z){return j(z),m(me("resolved")),Promise.reject(z)}}),[j,o,n,m]),K=(0,r.useCallback)(()=>Je(void 0,null,function*(){try{v.current("willPublishEntry");const z=ye(`collection-types/${n}/${o}/actions/publish`);m(me("publish-pending"));const{data:$}=yield fe.be.post(z);return v.current("didPublishEntry"),m(Ke(H($))),m(me("resolved")),i({type:"success",message:{id:O("success.record.publish")}}),Promise.resolve($)}catch(z){return j(z),m(me("resolved")),Promise.reject(z)}}),[H,j,o,n,m,i]),N=(0,r.useCallback)((z,$)=>Je(void 0,null,function*(){const k=ye(`collection-types/${n}/${o}`);try{v.current("willEditEntry",$),m(me("submit-pending"));const{data:D}=yield fe.be.put(k,z);return v.current("didEditEntry",{trackerProperty:$}),i({type:"success",message:{id:O("success.record.save")}}),l.invalidateQueries(["relation"]),m(Ke(H(D))),m(me("resolved")),Promise.resolve(D)}catch(D){return v.current("didNotEditEntry",{error:D,trackerProperty:$}),j(D),m(me("resolved")),Promise.reject(D)}}),[H,j,n,o,m,i,l]),G=(0,r.useCallback)(()=>Je(void 0,null,function*(){const z=ye(`collection-types/${n}/${o}/actions/unpublish`);m(me("unpublish-pending"));try{v.current("willUnpublishEntry");const{data:$}=yield fe.be.post(z);return v.current("didUnpublishEntry"),i({type:"success",message:{id:O("success.record.unpublish")}}),m(Ke(H($))),m(me("resolved")),Promise.resolve($)}catch($){return m(me("resolved")),j($),Promise.reject($)}}),[H,j,o,n,m,i]);return t({componentsDataStructure:h,contentTypeDataStructure:b,data:E,isCreatingEntry:L,isLoadingForData:S,onDelete:Z,onDeleteSucceeded:Y,onPost:A,onPublish:K,onDraftRelationCheck:w,onPut:N,onUnpublish:G,status:P,redirectionLink:C})};Ir.defaultProps={id:null,origin:null},Ir.propTypes={allLayoutData:a().exact({components:a().object.isRequired,contentType:a().shape({apiID:a().string.isRequired,attributes:a().object.isRequired,info:a().object.isRequired,isDisplayed:a().bool.isRequired,kind:a().string.isRequired,layouts:a().object.isRequired,metadatas:a().object.isRequired,options:a().object.isRequired,pluginOptions:a().object,settings:a().object.isRequired,uid:a().string.isRequired}).isRequired}).isRequired,children:a().func.isRequired,id:a().string,origin:a().string,slug:a().string.isRequired};const ch=(0,r.memo)(Ir,Ze());var uh=p(86834),Ae=p.n(uh),dh=p(89793),cn=p.n(dh),ph=p(3040),te=p.n(ph),mh=p(56236),fh=p.n(mh),gh=p(10268),ei=p.n(gh),yh=p(86349),hh=p.n(yh);const Dr=(e,t,n,o)=>{const s=e.slice();return s.splice(t,1),s.splice(n,0,o),s};var bh=p(77236),vh=p.n(bh);const Eh=({browserState:e,serverState:t},n,o)=>{const s=(c,u)=>M()(c,["attributes",u,"type"],""),l=(c,u)=>M()(c,["attributes",...u],""),i=(c,u,d)=>Object.keys(c).reduce((f,y)=>{const m=s(d,y),h=M()(c,y),b=M()(u,y),E=l(d,[y,"component"]),S=l(d,[y,"repeatable"]);let P;switch(m){case"json":P=JSON.parse(h);break;case"time":{P=h,h&&h.split(":").length<3&&(P=`${h}:00`);break}case"media":l(d,[y,"multiple"])===!0?P=h?h.filter(C=>!(C instanceof File)):null:P=M()(h,0)instanceof File?null:M()(h,"id",null);break;case"component":S?P=h&&h.map((C,F)=>i(C,(b!=null?b:[])[F],o[E])):P=h&&i(h,b,o[E]);break;case"relation":{let C=b!=null?b:[];const F=h.reduce((R,L)=>C.find(T=>T.id===L.id)?R:[...R,{id:L.id}],[]);P={disconnect:C.reduce((R,L)=>h.find(T=>T.id===L.id)?R:[...R,{id:L.id}],[]),connect:F};break}case"dynamiczone":P=h.map((C,F)=>i(C,(b!=null?b:[])[F],o[C.__component]));break;default:P=Ch(h,"id")}return f[y]=P,f},{});return i(e,t,n)},Ch=(e,t)=>vh()(e)?e.map(n=>n[t]?n[t]:n):Qo()(e)?e[t]:e,Oh=Eh;var Ph=p(51355),Rh=p.n(Ph),Th=p(95919),Mh=p.n(Th),wh=p(78746),yt=p.n(wh),Ee=p(5173);function xt(e){return["integer","biginteger","decimal","float","number"].includes(e)}var Ih=Object.defineProperty,Dh=Object.defineProperties,Lh=Object.getOwnPropertyDescriptors,ti=Object.getOwnPropertySymbols,Sh=Object.prototype.hasOwnProperty,xh=Object.prototype.propertyIsEnumerable,ni=(e,t,n)=>t in e?Ih(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ri=(e,t)=>{for(var n in t||(t={}))Sh.call(t,n)&&ni(e,n,t[n]);if(ti)for(var n of ti(t))xh.call(t,n)&&ni(e,n,t[n]);return e},oi=(e,t)=>Dh(e,Lh(t));Ee.kM(Ee.nK,"defined",function(){return this.test("defined",g.translatedErrors.required,e=>e!==void 0)}),Ee.kM(Ee.IX,"notEmptyMin",function(e){return this.test("notEmptyMin",g.translatedErrors.min,t=>Ae()(t)?!0:t.length>=e)}),Ee.kM(Ee.Z_,"isInferior",function(e,t){return this.test("isInferior",e,function(n){return!n||Number.isNaN(yt()(n))?!0:yt()(t)>=yt()(n)})}),Ee.kM(Ee.Z_,"isSuperior",function(e,t){return this.test("isSuperior",e,function(n){return!n||Number.isNaN(yt()(n))?!0:yt()(n)>=yt()(t)})});const Fh=e=>M()(e,["attributes"],{}),Lr=(e,{components:t},n={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=Fh(e);return Ee.Ry().shape(Object.keys(o).reduce((s,l)=>{const i=o[l];if(i.type!=="relation"&&i.type!=="component"&&i.type!=="dynamiczone"){const c=Ah(i.type,i,n);s[l]=c}if(i.type==="relation"&&(s[l]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(i.relationType)?Ee.Ry().nullable():Ee.IX().nullable()),i.type==="component"){const c=Lr(t[i.component],{components:t},oi(ri({},n),{isFromComponent:!0}));if(i.repeatable===!0){const{min:d,max:f,required:y}=i;let m=Ee.Vo(h=>{let b=Ee.IX().of(c);return d?y?b=b.min(d,g.translatedErrors.min):y!==!0&&Ae()(h)?b=b.nullable():b=b.min(d,g.translatedErrors.min):y&&!n.isDraft&&(b=b.min(1,g.translatedErrors.required)),f&&(b=b.max(f,g.translatedErrors.max)),b});return s[l]=m,s}const u=Ee.Vo(d=>d!==void 0?i.required===!0&&!n.isDraft?c.defined():c.nullable():i.required===!0?Ee.Ry().defined():Ee.Ry().nullable());return s[l]=u,s}if(i.type==="dynamiczone"){let c=Ee.IX().of(Ee.Vo(({__component:f})=>Lr(t[f],{components:t},oi(ri({},n),{isFromComponent:!0}))));const{max:u,min:d}=i;d?i.required?c=c.test("min",g.translatedErrors.min,f=>n.isCreatingEntry?f&&f.length>=d:f===void 0?!0:f!==null&&f.length>=d).test("required",g.translatedErrors.required,f=>n.isCreatingEntry?f!==null||f!==void 0:f===void 0?!0:f!==null):c=c.notEmptyMin(d):i.required&&!n.isDraft&&(c=c.test("required",g.translatedErrors.required,f=>n.isCreatingEntry?f!==null||f!==void 0:f===void 0?!0:f!==null)),u&&(c=c.max(u,g.translatedErrors.max)),s[l]=c}return s},{}))},Ah=(e,t,n)=>{let o=Ee.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(e)&&(o=Ee.Z_()),e==="json"&&(o=Ee.nK(g.translatedErrors.json).test("isJSON",g.translatedErrors.json,s=>{if(s===void 0)return!0;try{return JSON.parse(s),!0}catch(l){return!1}}).nullable()),e==="email"&&(o=o.email(g.translatedErrors.email)),["number","integer","float","decimal"].includes(e)&&(o=Ee.Rx().transform(s=>Mh()(s)?void 0:s).typeError()),e==="biginteger"&&(o=Ee.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(e)&&(o=Ee.hT()),Object.keys(t).forEach(s=>{const l=t[s];if(!!l||!Rh()(l)&&Number.isInteger(Math.floor(l))||l===0)switch(s){case"required":{n.isDraft||(e==="password"&&n.isCreatingEntry&&(o=o.required(g.translatedErrors.required)),e!=="password"&&(n.isCreatingEntry?o=o.required(g.translatedErrors.required):o=o.test("required",g.translatedErrors.required,i=>i===void 0&&!n.isFromComponent?!0:xt(e)?i===0?!0:!!i:e==="boolean"?i!==null:e==="date"||e==="datetime"?typeof i=="string"?!Ae()(i):!Ae()(i==null?void 0:i.toString()):!Ae()(i))));break}case"max":{e==="biginteger"?o=o.isInferior(g.translatedErrors.max,l):o=o.max(l,g.translatedErrors.max);break}case"maxLength":o=o.max(l,g.translatedErrors.maxLength);break;case"min":{e==="biginteger"?o=o.isSuperior(g.translatedErrors.min,l):o=o.min(l,g.translatedErrors.min);break}case"minLength":{n.isDraft||(o=o.min(l,g.translatedErrors.minLength));break}case"regex":o=o.matches(new RegExp(l),{message:g.translatedErrors.regex,excludeEmptyString:!t.required});break;case"lowercase":["text","textarea","email","string"].includes(e)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(e)&&(o=o.strict().uppercase());break;case"positive":xt(e)&&(o=o.positive());break;case"negative":xt(e)&&(o=o.negative());break;default:o=o.nullable()}}),o},ai=Lr,Xe=(e,t=()=>!1)=>{const n=o=>Object.entries(o).reduce((s,[l,i])=>{if(t(i)&&(s=[...s,l]),i.type==="component"){const c=e[i.component].attributes,d=n(c).map(f=>`${l}.${f}`);s=[...s,d]}else if(i.type==="dynamiczone"){const u=i.components.flatMap(d=>n({[d]:{type:"component",component:d}}).map(f=>f.split(`${d}.`)[1])).map(d=>`${l}.${d}`);s=[...s,u]}return s.flat()},[]);return n},kh=(e,t)=>{const n=(o,s,l,i)=>o&&(e===s&&o[s]!==void 0?(te()(o,s,t),o):(Array.isArray(o[s])&&o[s].forEach(c=>{i.slice(l+1).reduce(n,c)}),o[s]));return n};var jh=Object.defineProperty,$h=Object.defineProperties,Bh=Object.getOwnPropertyDescriptors,si=Object.getOwnPropertySymbols,Nh=Object.prototype.hasOwnProperty,Vh=Object.prototype.propertyIsEnumerable,ii=(e,t,n)=>t in e?jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ft=(e,t)=>{for(var n in t||(t={}))Nh.call(t,n)&&ii(e,n,t[n]);if(si)for(var n of si(t))Vh.call(t,n)&&ii(e,n,t[n]);return e},Sr=(e,t)=>$h(e,Bh(t));const qh={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null,publishConfirmation:{show:!1,draftCount:0}},zh=(e,t)=>(0,Zt.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{const{componentLayoutData:o,allComponents:s}=t,l=Xe(s,d=>d.type==="relation")(o.attributes),i=Ft({},e.componentsDataStructure[o.uid]),c=Xe(s,d=>d.type==="component"&&d.repeatable)(o.attributes),u=l.reduce((d,f)=>{const[y]=f.split(".");return c.includes(y)||te()(d,f,[]),d},i);te()(n,["modifiedData",...t.keys],u);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{const{keys:o,allComponents:s,componentLayoutData:l,shouldCheckErrors:i}=t;i&&(n.shouldCheckErrors=!e.shouldCheckErrors),t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"&&(n.modifiedDZName=o[0]);const c=M()(e,["modifiedData",...o],[]),u=t.type==="ADD_COMPONENT_TO_DYNAMIC_ZONE"?Sr(Ft({},e.componentsDataStructure[l.uid]),{__component:l.uid}):Sr(Ft({},e.componentsDataStructure[l.uid]),{__temp_key__:So(c)+1}),d=Xe(s,h=>h.type==="relation")(l.attributes),f=Xe(s,h=>h.type==="component"&&h.repeatable)(l.attributes),y=d.reduce((h,b)=>{const[E]=b.split(".");return f.includes(E)||te()(h,b,[]),h},u),m=Array.isArray(c)?[...c,y]:[y];te()(n,["modifiedData",...o],m);break}case"LOAD_RELATION":{const o=["initialData",...t.keys],s=["modifiedData",...t.keys],{value:l}=t,i=M()(e,o),c=M()(e,s);te()(n,o,ei()([...l,...i],"id")),te()(n,s,ei()([...l,...c],"id"));break}case"CONNECT_RELATION":{const o=["modifiedData",...t.keys],{value:s,toOneRelation:l}=t;if(l)te()(n,o,[s]);else{const c=[...M()(e,o),s];te()(n,o,c)}break}case"DISCONNECT_RELATION":{const o=["modifiedData",...t.keys],{id:s}=t,i=M()(e,[...o]).filter(c=>c.id!==s);te()(n,o,i);break}case"INIT_FORM":{const{initialValues:o,relationalFieldPaths:s=[],componentPaths:l=[],repeatableComponentPaths:i=[],dynamicZonePaths:c=[]}=t,u=ze()(o),d=s.map(f=>f.split(".")).reduce((f,y)=>{const[m]=y;if(e.modifiedData&&M()(e.modifiedData,m)){const h=ze()(M()(e.modifiedData,m));te()(f,m,hh()(h,M()(o,m)))}else if(i.includes(m)||c.includes(m)||l.includes(m)){const h=kh(y.slice(-1)[0],[]);y.reduce(h,f)}else te()(f,y,[]);return f},u);n.initialData=d,n.modifiedData=d,n.formErrors={},n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_FIELD":{const o=M()(e,["modifiedData",...t.pathToComponent]),s=M()(e,["modifiedData",...t.pathToComponent,t.dragIndex]),l=Dr(o,t.dragIndex,t.hoverIndex,s);te()(n,["modifiedData",...t.pathToComponent],l);break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:o,dynamicZoneName:s,shouldCheckErrors:l}=t;l&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=e.modifiedData[s],c=t.type==="MOVE_COMPONENT_UP"?o-1:o+1,u=e.modifiedData[s][o],d=Dr(i,o,c,u);te()(n,["modifiedData",t.dynamicZoneName],d);break}case"MOVE_FIELD":{const o=M()(e,["modifiedData",...t.keys],[]).slice(),s=M()(e,["modifiedData",...t.keys,t.dragIndex]),l=Dr(o,t.dragIndex,t.overIndex,s);te()(n,["modifiedData",...t.keys],l);break}case"ON_CHANGE":{const[o]=t.keys;if(t.shouldSetInitialValue&&te()(n,["initialData",...t.keys],t.value),t.keys.length===2&&M()(e,["modifiedData",o])===null){te()(n,["modifiedData",o],{[t.keys[1]]:t.value});break}te()(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors),n.modifiedData[t.dynamicZoneName].splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const o=["modifiedData",...t.keys];te()(n,o,null);break}case"REMOVE_PASSWORD_FIELD":{fh()(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const o=t.keys.length-1,s=["modifiedData",...Vn()(t.keys,o)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=M()(e,s).slice();i.splice(parseInt(t.keys[o],10),1),te()(n,s,i);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"SET_PUBLISH_CONFIRMATION":{n.publishConfirmation=Ft({},t.publishConfirmation);break}case"RESET_PUBLISH_CONFIRMATION":{n.publishConfirmation=Sr(Ft({},e.publishConfirmation),{show:!1});break}default:return n}});var Wh=Object.defineProperty,li=Object.getOwnPropertySymbols,Uh=Object.prototype.hasOwnProperty,_h=Object.prototype.propertyIsEnumerable,ci=(e,t,n)=>t in e?Wh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,un=(e,t)=>{for(var n in t||(t={}))Uh.call(t,n)&&ci(e,n,t[n]);if(li)for(var n of li(t))_h.call(t,n)&&ci(e,n,t[n]);return e},dn=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const xr=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:o,componentsDataStructure:s,contentTypeDataStructure:l,createActionAllowedFields:i,from:c,initialValues:u,isCreatingEntry:d,isLoadingForData:f,isSingleType:y,onPost:m,onPublish:h,onDraftRelationCheck:b,onPut:E,onUnpublish:S,readActionAllowedFields:P,redirectToPreviousPage:C,slug:F,status:v,updateActionAllowedFields:R})=>{const[L,T]=(0,r.useReducer)(zh,qh),{formErrors:Q,initialData:H,modifiedData:j,modifiedDZName:Z,shouldCheckErrors:Y,publishConfirmation:A}=L,w=(0,g.useNotification)(),{lockApp:K,unlockApp:N}=(0,g.useOverlayBlocker)(),G=M()(e,["contentType"],{}),z=(0,r.useMemo)(()=>M()(G,["options","draftAndPublish"],!1),[G]),$=(0,r.useMemo)(()=>z&&!H.publishedAt,[z,H.publishedAt]),{trackUsage:k}=(0,g.useTracking)(),{formatMessage:D}=(0,W.useIntl)(),V=(0,r.useRef)(k),_=(0,r.useMemo)(()=>f||d?!1:t===!1&&n===!1,[f,d,t,n]);(0,r.useEffect)(()=>{v==="resolved"?N():K()},[K,N,v]),(0,r.useEffect)(()=>{f||je()},[Y]),(0,r.useEffect)(()=>{const ae=Object.keys(Q);if(ae.length>0){const se=ae[0],le=document.getElementById(se);le&&le.focus()}},[Q]),(0,r.useEffect)(()=>{_&&w({type:"info",message:{id:O("permissions.not-allowed.update")}})},[_,w]),(0,r.useEffect)(()=>{T({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:s,contentTypeDataStructure:l})},[s,l]);const{components:ne}=e;(0,r.useEffect)(()=>{if(u&&(G==null?void 0:G.attributes)){const ae=Xe(ne,Le=>Le.type==="relation")(G.attributes),se=Xe(ne,Le=>Le.type==="component"&&!Le.repeatable)(G.attributes),le=Xe(ne,Le=>Le.type==="component"&&Le.repeatable)(G.attributes),De=Xe(ne,Le=>Le.type==="dynamiczone")(G.attributes);T({type:"INIT_FORM",initialValues:u,relationalFieldPaths:ae,componentPaths:se,repeatableComponentPaths:le,dynamicZonePaths:De})}},[u,G,ne]);const re=(0,r.useCallback)(ae=>(se,le,De,Le=!1)=>{V.current("didAddComponentToDynamicZone"),T({type:ae,keys:se.split("."),componentLayoutData:le,allComponents:De,shouldCheckErrors:Le})},[]),q=re("ADD_COMPONENT_TO_DYNAMIC_ZONE"),oe=(0,r.useCallback)((ae,se,le)=>{T({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:ae.split("."),componentLayoutData:se,allComponents:le})},[]),Ne=(0,r.useCallback)(({name:ae,value:se,toOneRelation:le})=>{T({type:"CONNECT_RELATION",keys:ae.split("."),value:se,toOneRelation:le})},[]),be=(0,r.useCallback)(({target:{name:ae,value:se}})=>{T({type:"LOAD_RELATION",keys:ae.split("."),value:se})},[]),Ve=re("ADD_REPEATABLE_COMPONENT_TO_FIELD"),Me=(0,r.useMemo)(()=>{const ae={isCreatingEntry:d,isDraft:$,isFromComponent:!1};return ai(G,{components:e.components||{}},ae)},[e.components,G,d,$]),je=(0,r.useCallback)((...ae)=>dn(void 0,[...ae],function*(se={}){let le={};const De=ze()(j);Ae()(De)||te()(De,se.path,se.value);try{yield Me.validate(De,{abortEarly:!1})}catch(Le){le=(0,g.getYupInnerErrors)(Le),Z&&(le=Object.keys(le).reduce((Dc,uo)=>(uo.split(".")[0]!==Z&&(Dc[uo]=le[uo]),Dc),{}))}T({type:"SET_FORM_ERRORS",errors:le})}),[Z,j,Me]),tt=(0,r.useCallback)(({target:{name:ae,value:se,type:le}},De=!1)=>{let Le=se;if(["text","textarea","string","email","uid","select","select-one","number"].includes(le)&&!se&&se!==0&&(Le=null),le==="password"&&!se){T({type:"REMOVE_PASSWORD_FIELD",keys:ae.split(".")});return}T({type:"ON_CHANGE",keys:ae.split("."),value:Le,shouldSetInitialValue:De})},[]),qe=(0,r.useCallback)((ae,se)=>{const le=Eu(ze()(ae),"__temp_key__");return Oh({browserState:le,serverState:se},G,e.components)},[e.components,G]),Pe=(0,r.useMemo)(()=>z?$?{status:"draft"}:{}:{},[z,$]),nt=(0,r.useCallback)(ae=>dn(void 0,null,function*(){return ae.preventDefault(),T({type:"RESET_PUBLISH_CONFIRMATION"})}),[]),co=(0,r.useCallback)(ae=>dn(void 0,null,function*(){ae.preventDefault();let se={};try{yield Me.validate(j,{abortEarly:!1})}catch(le){se=(0,g.getYupInnerErrors)(le)}try{if(Ae()(se)){const le=qe(j,H);d?yield m(le,Pe):yield E(le,Pe)}}catch(le){se=un(un({},se),(0,g.getAPIInnerErrors)(le,{getTrad:O}))}T({type:"SET_FORM_ERRORS",errors:se})}),[qe,d,j,H,m,E,Pe,Me]),OO=(0,r.useCallback)(()=>dn(void 0,null,function*(){const ae=ai(G,{components:M()(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1}),se=yield b();if(!A.show&&se>0){T({type:"SET_PUBLISH_CONFIRMATION",publishConfirmation:{show:!0,draftCount:se}});return}T({type:"RESET_PUBLISH_CONFIRMATION"});let le={};try{yield ae.validate(j,{abortEarly:!1})}catch(De){le=(0,g.getYupInnerErrors)(De)}try{Ae()(le)&&(yield h())}catch(De){le=un(un({},le),(0,g.getAPIInnerErrors)(De,{getTrad:O}))}T({type:"SET_FORM_ERRORS",errors:le})}),[e,G,d,j,A.show,h,b]),Ct=(0,r.useCallback)(ae=>{const se=Object.keys(Q).some(De=>De.split(".")[0]===ae);return!Ae()(Q)&&se},[Q]),PO=(0,r.useCallback)((ae,se)=>{V.current("changeComponentsOrder"),T({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:ae,currentIndex:se,shouldCheckErrors:Ct(ae)})},[Ct]),RO=(0,r.useCallback)((ae,se)=>{V.current("changeComponentsOrder"),T({type:"MOVE_COMPONENT_UP",dynamicZoneName:ae,currentIndex:se,shouldCheckErrors:Ct(ae)})},[Ct]),TO=(0,r.useCallback)((ae,se,le)=>{T({type:"MOVE_COMPONENT_FIELD",pathToComponent:ae,dragIndex:se,hoverIndex:le})},[]),MO=(0,r.useCallback)(({name:ae,id:se})=>{T({type:"DISCONNECT_RELATION",keys:ae.split("."),id:se})},[]),wO=(0,r.useCallback)((ae,se)=>{V.current("removeComponentFromDynamicZone"),T({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:ae,index:se,shouldCheckErrors:Ct(ae)})},[Ct]),IO=(0,r.useCallback)((ae,se)=>{T({type:"REMOVE_COMPONENT_FROM_FIELD",keys:ae.split("."),componentUid:se})},[]),DO=(0,r.useCallback)((ae,se)=>{T({type:"REMOVE_REPEATABLE_FIELD",keys:ae.split("."),componentUid:se})},[]),LO=(0,r.useCallback)(()=>{T({type:"TRIGGER_FORM_VALIDATION"})},[]);return _?r.createElement(ee.Redirect,{to:c}):j?r.createElement(g.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:q,addNonRepeatableComponentToField:oe,connectRelation:Ne,addRepeatableComponentToField:Ve,allLayoutData:e,checkFormErrors:je,createActionAllowedFields:i,formErrors:Q,hasDraftAndPublish:z,initialData:H,isCreatingEntry:d,isSingleType:y,shouldNotRunValidations:$,status:v,layout:G,loadRelation:be,modifiedData:j,moveComponentDown:PO,moveComponentField:TO,moveComponentUp:RO,onChange:tt,onPublish:OO,onUnpublish:S,disconnectRelation:MO,readActionAllowedFields:P,redirectToPreviousPage:C,removeComponentFromDynamicZone:wO,removeComponentFromField:IO,removeRepeatableField:DO,slug:F,triggerFormValidation:LO,updateActionAllowedFields:R,onPublishPromptDismissal:nt,publishConfirmation:A}},f||!d&&!H.id?r.createElement(ie.Main,{"aria-busy":"true"},r.createElement(g.LoadingIndicatorPage,null)):r.createElement(r.Fragment,null,r.createElement(ee.Prompt,{when:!cn()(j,H),message:D({id:"global.prompt.unsaved"})}),r.createElement("form",{noValidate:!0,onSubmit:co},o))):null};xr.defaultProps={from:"/",initialValues:null,redirectToPreviousPage(){}},xr.propTypes={allLayoutData:a().object.isRequired,allowedActions:a().object.isRequired,children:a().node.isRequired,componentsDataStructure:a().object.isRequired,contentTypeDataStructure:a().object.isRequired,createActionAllowedFields:a().array.isRequired,from:a().string,initialValues:a().object,isCreatingEntry:a().bool.isRequired,isLoadingForData:a().bool.isRequired,isSingleType:a().bool.isRequired,onPost:a().func.isRequired,onPublish:a().func.isRequired,onDraftRelationCheck:a().func.isRequired,onPut:a().func.isRequired,onUnpublish:a().func.isRequired,readActionAllowedFields:a().array.isRequired,redirectToPreviousPage:a().func,slug:a().string.isRequired,status:a().string.isRequired,updateActionAllowedFields:a().array.isRequired};const Hh=xr,ct=e=>ye(`single-types/${e}`),Zh=e=>Object.values(e||{}).reduce((t,n)=>Object.assign(t,n),{});var Gh=Object.defineProperty,pn=Object.getOwnPropertySymbols,ui=Object.prototype.hasOwnProperty,di=Object.prototype.propertyIsEnumerable,pi=(e,t,n)=>t in e?Gh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mi=(e,t)=>{for(var n in t||(t={}))ui.call(t,n)&&pi(e,n,t[n]);if(pn)for(var n of pn(t))di.call(t,n)&&pi(e,n,t[n]);return e},Qh=(e,t)=>{var n={};for(var o in e)ui.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&pn)for(var o of pn(e))t.indexOf(o)<0&&di.call(e,o)&&(n[o]=e[o]);return n};const fi=(e={})=>{const t=mi(mi({},e),Zh(e.plugins)),{plugins:n,_q:o}=t,s=Qh(t,["plugins","_q"]);return o&&te()(s,"_q",encodeURIComponent(o)),`${(0,He.stringify)(s,{encode:!1,addQueryPrefix:!0})}`};var Yh=Object.defineProperty,gi=Object.getOwnPropertySymbols,Kh=Object.prototype.hasOwnProperty,Jh=Object.prototype.propertyIsEnumerable,yi=(e,t,n)=>t in e?Yh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xh=(e,t)=>{for(var n in t||(t={}))Kh.call(t,n)&&yi(e,n,t[n]);if(gi)for(var n of gi(t))Jh.call(t,n)&&yi(e,n,t[n]);return e},ut=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const hi=({allLayoutData:e,children:t,slug:n})=>{const o=(0,it.useQueryClient)(),{trackUsage:s}=(0,g.useTracking)(),{push:l}=(0,ee.useHistory)(),{setCurrentStep:i}=(0,g.useGuidedTour)(),c=(0,r.useRef)(s),[u,d]=(0,r.useState)(!0),[{query:f,rawQuery:y}]=(0,g.useQueryParams)(),m=fi(f),h=(0,g.useNotification)(),b=(0,he.useDispatch)(),{componentsDataStructure:E,contentTypeDataStructure:S,data:P,isLoading:C,status:F}=(0,he.useSelector)(Ks),v=(0,r.useCallback)(A=>{const w=No(A,e.contentType,e.components);return(0,g.formatContentTypeData)(w,e.contentType,e.components)},[e]);(0,r.useEffect)(()=>()=>{b(Qs())},[b]),(0,r.useEffect)(()=>{const A=Object.keys(e.components).reduce((N,G)=>{const z=Wt(M()(e,["components",G,"attributes"],{}),e.components);return N[G]=(0,g.formatContentTypeData)(z,e.components[G],e.components),N},{}),w=Wt(e.contentType.attributes,e.components),K=(0,g.formatContentTypeData)(w,e.contentType,e.components);b(Ys(A,K))},[e,b]),(0,r.useEffect)(()=>{const w=$e().CancelToken.source();return(N=>ut(void 0,null,function*(){b(ln()),d(!0);try{const{data:G}=yield(0,fe.be)(ct(`${n}${m}`),{cancelToken:N.token});b(Mr(v(G))),d(!1)}catch(G){if($e().isCancel(G))return;const z=M()(G,"response.status",null);z===404&&b(wr(y,!0)),z===403&&(h({type:"info",message:{id:O("permissions.not-allowed.update")}}),l("/"))}}))(w),()=>w.cancel("Operation canceled by the user.")},[v,l,n,b,m,y,h]);const R=(0,r.useCallback)(A=>{const w=A.response.data;let K=M()(w,["error","message"],"Bad Request");Array.isArray(K)&&(K=M()(K,["0","messages","0","id"])),typeof K=="string"&&h({type:"warning",message:K})},[h]),L=(0,r.useCallback)(A=>ut(void 0,null,function*(){try{c.current("willDeleteEntry",A);const{data:w}=yield fe.be.delete(ct(`${n}${m}`));return h({type:"success",message:{id:O("success.record.delete")}}),c.current("didDeleteEntry",A),Promise.resolve(w)}catch(w){return c.current("didNotDeleteEntry",Xh({error:w},A)),R(w),Promise.reject(w)}}),[n,R,h,m]),T=(0,r.useCallback)(()=>{d(!0),b(wr(y,!0))},[b,y]),Q=(0,r.useCallback)((A,w)=>ut(void 0,null,function*(){const K=ct(`${n}${y}`);try{b(me("submit-pending"));const{data:N}=yield fe.be.put(K,A);return c.current("didCreateEntry",w),h({type:"success",message:{id:O("success.record.save")}}),i("contentManager.success"),o.invalidateQueries(["relation"]),b(Ke(v(N))),d(!1),b(me("resolved")),Promise.resolve(N)}catch(N){return c.current("didNotCreateEntry",{error:N,trackerProperty:w}),R(N),b(me("resolved")),Promise.reject(N)}}),[v,R,n,b,y,h,i,o]),H=(0,r.useCallback)(()=>ut(void 0,null,function*(){try{c.current("willCheckDraftRelations");const A=ct(`${n}/actions/numberOfDraftRelations`);b(me("draft-relation-check-pending"));const w=yield fe.be.get(A);return c.current("didCheckDraftRelations"),b(me("resolved")),w.data.data}catch(A){return R(A),b(me("resolved")),Promise.reject(A)}}),[R,n,b]),j=(0,r.useCallback)(()=>ut(void 0,null,function*(){try{c.current("willPublishEntry");const A=ct(`${n}/actions/publish${m}`);b(me("publish-pending"));const{data:w}=yield fe.be.post(A);return c.current("didPublishEntry"),h({type:"success",message:{id:O("success.record.publish")}}),b(Ke(v(w))),b(me("resolved")),Promise.resolve(w)}catch(A){return R(A),b(me("resolved")),Promise.reject(A)}}),[v,R,n,m,b,h]),Z=(0,r.useCallback)((A,w)=>ut(void 0,null,function*(){const K=ct(`${n}${y}`);try{c.current("willEditEntry",w),b(me("submit-pending"));const{data:N}=yield fe.be.put(K,A);return h({type:"success",message:{id:O("success.record.save")}}),c.current("didEditEntry",{trackerProperty:w}),o.invalidateQueries(["relation"]),b(Ke(v(N))),b(me("resolved")),Promise.resolve(N)}catch(N){return R(N),c.current("didNotEditEntry",{error:N,trackerProperty:w}),b(me("resolved")),Promise.reject(N)}}),[v,R,n,b,y,h,o]),Y=(0,r.useCallback)(()=>ut(void 0,null,function*(){const A=ct(`${n}/actions/unpublish${m}`);b(me("unpublish-pending"));try{c.current("willUnpublishEntry");const{data:w}=yield fe.be.post(A);c.current("didUnpublishEntry"),h({type:"success",message:{id:O("success.record.unpublish")}}),b(Ke(v(w))),b(me("resolved"))}catch(w){b(me("resolved")),R(w)}}),[v,h,R,n,b,m]);return t({componentsDataStructure:E,contentTypeDataStructure:S,data:P,isCreatingEntry:u,isLoadingForData:C,onDelete:L,onDeleteSucceeded:T,onPost:Q,onDraftRelationCheck:H,onPublish:j,onPut:Z,onUnpublish:Y,redirectionLink:"/",status:F})};hi.propTypes={allLayoutData:a().shape({components:a().object.isRequired,contentType:a().object.isRequired}).isRequired,children:a().func.isRequired,slug:a().string.isRequired};const eb=(0,r.memo)(hi);var tb=p(57235),nb=p.n(tb),rb=Object.defineProperty,bi=Object.getOwnPropertySymbols,ob=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable,vi=(e,t,n)=>t in e?rb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ei=(e,t)=>{for(var n in t||(t={}))ob.call(t,n)&&vi(e,n,t[n]);if(bi)for(var n of bi(t))ab.call(t,n)&&vi(e,n,t[n]);return e};function sb(e,t){return n=>{const o=t();return r.createElement(e,Ei(Ei({},n),o))}}const ib=sb;function lb(){const{initialData:e,hasDraftAndPublish:t}=(0,g.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const cb=lb;var ub=Object.defineProperty,Ci=Object.getOwnPropertySymbols,db=Object.prototype.hasOwnProperty,pb=Object.prototype.propertyIsEnumerable,Oi=(e,t,n)=>t in e?ub(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mb=(e,t)=>{for(var n in t||(t={}))db.call(t,n)&&Oi(e,n,t[n]);if(Ci)for(var n of Ci(t))pb.call(t,n)&&Oi(e,n,t[n]);return e};const fb=(0,x.default)(nb())`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,Pi=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,W.useIntl)();if(!e)return null;const o={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},s=t?o.published:o.draft;return r.createElement(I.Box,mb({hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5},s.box),r.createElement(I.Box,{as:U.Flex},r.createElement(fb,{$bulletColor:s.bulletColor}),r.createElement(I.Box,{paddingLeft:3},r.createElement(B.Typography,{textColor:s.textColor},n({id:O("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"),r.createElement(B.Typography,{fontWeight:"bold",textColor:s.textColor},t&&n({id:O("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:O("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})))))};Pi.propTypes={hasDraftAndPublish:a().bool.isRequired,isPublished:a().bool.isRequired};const gb=ib(Pi,cb);var Fr=p(27635);const Ar=60*1e3,kr=Ar*60,mn=kr*24,Ri=mn*30,Ti=mn*365,yb=e=>e<Ar?{unit:"second",value:-Math.round(e/1e3)}:e<kr?{unit:"minute",value:-Math.round(e/Ar)}:e<mn?{unit:"hour",value:-Math.round(e/kr)}:e<Ri?{unit:"day",value:-Math.round(e/mn)}:e<Ti?{unit:"month",value:-Math.round(e/Ri)}:{unit:"year",value:-Math.round(e/Ti)};var Mi=p(7602);const hb=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,W.useIntl)(),{initialData:n,isCreatingEntry:o}=(0,g.useCMEditViewDataManager)(),s=(0,r.useRef)(Date.now()),l=(u,d)=>{var f,y,m;const h=((f=n[d])==null?void 0:f.firstname)||"",b=((y=n[d])==null?void 0:y.lastname)||"",S=((m=n[d])==null?void 0:m.username)||(0,Mi.Pp)(h,b),C=(n[u]?new Date(n[u]).getTime():Date.now())-s.current,{unit:F,value:v}=yb(-C);return{at:t(v,F,{numeric:"auto"}),by:o?"-":S}},i=l("updatedAt","updatedBy"),c=l("createdAt","createdBy");return r.createElement(I.Box,null,r.createElement(B.Typography,{variant:"sigma",textColor:"neutral600",id:"additional-informations"},e({id:O("containers.Edit.information"),defaultMessage:"Information"})),r.createElement(I.Box,{paddingTop:2,paddingBottom:6},r.createElement(Fr.Divider,null)),r.createElement(ue.Stack,{spacing:4},r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(B.Typography,{fontWeight:"bold"},e({id:O("containers.Edit.information.created"),defaultMessage:"Created"})),r.createElement(B.Typography,null,c.at)),r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(B.Typography,{fontWeight:"bold"},e({id:O("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(B.Typography,null,c.by)),r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(B.Typography,{fontWeight:"bold"},e({id:O("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"})),r.createElement(B.Typography,null,i.at)),r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement(B.Typography,{fontWeight:"bold"},e({id:O("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(B.Typography,null,i.by))))};var bb=p(98599),fn=p.n(bb),Be=p(49137),vb=p(88677),ht=p.n(vb),Eb=Object.defineProperty,wi=Object.getOwnPropertySymbols,Cb=Object.prototype.hasOwnProperty,Ob=Object.prototype.propertyIsEnumerable,Ii=(e,t,n)=>t in e?Eb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Di=(e,t)=>{for(var n in t||(t={}))Cb.call(t,n)&&Ii(e,n,t[n]);if(wi)for(var n of wi(t))Ob.call(t,n)&&Ii(e,n,t[n]);return e};function Pb(e,t){return n=>{const o=t();return r.createElement(e,Di(Di({},n),o))}}const Rb=Pb;function Tb(){const{initialData:e,isCreatingEntry:t,isSingleType:n,status:o,layout:s,hasDraftAndPublish:l,modifiedData:i,onPublish:c,onUnpublish:u,publishConfirmation:d,onPublishPromptDismissal:f}=(0,g.useCMEditViewDataManager)();return{initialData:e,isCreatingEntry:t,isSingleType:n,status:o,layout:s,hasDraftAndPublish:l,modifiedData:i,onPublish:c,onUnpublish:u,publishConfirmation:d,onPublishPromptDismissal:f}}const Mb=Tb,Li=(0,x.default)(U.Flex)`
  text-align: center;
`,Si=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},initialData:o,isCreatingEntry:s,isSingleType:l,hasDraftAndPublish:i,layout:c,modifiedData:u,onPublish:d,onUnpublish:f,status:y,publishConfirmation:{show:m,draftCount:h},onPublishPromptDismissal:b})=>{const{goBack:E}=(0,ee.useHistory)(),[S,P]=(0,r.useState)(!1),{formatMessage:C}=(0,W.useIntl)(),F=M()(c,["settings","mainField"],"id"),v=M()(c,["info","displayName"],"NOT FOUND"),R=!cn()(o,u)||s&&!Ae()(u);let T=C({id:O("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!s&&!l&&(T=o[F]||v),l&&(T=v);let Q=null;if(s&&t&&(Q=r.createElement(ue.Stack,{horizontal:!0,spacing:2},i&&r.createElement(ve.Button,{disabled:!0,startIcon:r.createElement(ht(),null),variant:"secondary"},C({id:"app.utils.publish",defaultMessage:"Publish"})),r.createElement(ve.Button,{disabled:!R,isLoading:y==="submit-pending",type:"submit"},C({id:O("containers.Edit.submit"),defaultMessage:"Save"})))),!s&&e){const Y=i&&n,A=!Ae()(o.publishedAt),w=A?y==="unpublish-pending":y==="publish-pending",K=A?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},N=A?()=>P(!0):()=>d();Q=r.createElement(U.Flex,null,Y&&r.createElement(ve.Button,{disabled:R,loading:w,onClick:N,startIcon:r.createElement(ht(),null),variant:"secondary"},C(K)),r.createElement(I.Box,{paddingLeft:Y?2:0},r.createElement(ve.Button,{disabled:!R,loading:y==="submit-pending",type:"submit"},C({id:O("containers.Edit.submit"),defaultMessage:"Save"}))))}const H=()=>P(Y=>!Y),j=()=>{H(),f()},Z=`${C({id:O("api.id"),defaultMessage:"API ID "})} : ${c.apiID}`;return r.createElement(r.Fragment,null,r.createElement(X.HeaderLayout,{title:T.toString(),primaryAction:Q,subtitle:Z,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(fn(),null),onClick:Y=>{Y.preventDefault(),E()},to:"/"},C({id:"global.back",defaultMessage:"Back"}))}),r.createElement(Be.Dialog,{onClose:H,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:S},r.createElement(Be.DialogBody,{icon:r.createElement(It(),null)},r.createElement(ue.Stack,{spacing:2},r.createElement(U.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(B.Typography,{id:"confirm-description"},C({id:O("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>r.createElement("br",null)}))),r.createElement(U.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(B.Typography,{id:"confirm-description"},C({id:O("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"}))))),r.createElement(Be.DialogFooter,{startAction:r.createElement(ve.Button,{onClick:H,variant:"tertiary"},C({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ve.Button,{variant:"danger-light",onClick:j},C({id:"components.popUpWarning.button.confirm",defaultMessage:"Confirm"}))})),r.createElement(Be.Dialog,{onClose:b,title:C({id:O("popUpWarning.warning.has-draft-relations.title"),defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:m},r.createElement(Be.DialogBody,{icon:r.createElement(It(),null)},r.createElement(ue.Stack,{spacing:2},r.createElement(Li,{justifyContent:"center"},r.createElement(B.Typography,{id:"confirm-description"},h,C({id:O("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, one { relation is} other { relations are}}</b> not published yet and might lead to unexpected behavior."},{b:Y=>r.createElement(B.Typography,{fontWeight:"bold"},Y),count:h}))),r.createElement(Li,{justifyContent:"center"},r.createElement(B.Typography,{id:"confirm-description"},C({id:O("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish?"}))))),r.createElement(Be.DialogFooter,{startAction:r.createElement(ve.Button,{onClick:b,variant:"tertiary"},C({id:"components.popUpWarning.button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ve.Button,{variant:"success",onClick:d},C({id:O("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Publish"}))})))};Si.propTypes={allowedActions:a().shape({canUpdate:a().bool.isRequired,canCreate:a().bool.isRequired,canPublish:a().bool.isRequired}).isRequired,initialData:a().object.isRequired,isCreatingEntry:a().bool.isRequired,isSingleType:a().bool.isRequired,status:a().string.isRequired,layout:a().object.isRequired,hasDraftAndPublish:a().bool.isRequired,modifiedData:a().object.isRequired,onPublish:a().func.isRequired,onUnpublish:a().func.isRequired,publishConfirmation:a().shape({show:a().bool.isRequired,draftCount:a().number.isRequired}).isRequired,onPublishPromptDismissal:a().func.isRequired};const wb=(0,r.memo)(Si,Ze()),Ib=Rb(wb,Mb),Db=(e,t)=>{const n=l=>(0,J.get)(t,[l,"type"],"");let o=0;const s=[];for(let l of e){const i=l.some(({name:c})=>n(c)==="dynamiczone");s[o]||(s[o]=[]),i?(o=o===0&&(0,J.isEmpty)(s[0])?0:o+1,s[o]||(s[o]=[]),s[o].push(l),o+=1):s[o].push(l)}return s.filter(l=>l.length>0)},Lb=(e,t)=>{const n=o=>{const s=(0,g.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${o}`,subject:t}]);return(0,J.uniq)((0,J.flatMap)(s,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}};var Sb=Object.defineProperty,xi=Object.getOwnPropertySymbols,xb=Object.prototype.hasOwnProperty,Fb=Object.prototype.propertyIsEnumerable,Fi=(e,t,n)=>t in e?Sb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ai=(e,t)=>{for(var n in t||(t={}))xb.call(t,n)&&Fi(e,n,t[n]);if(xi)for(var n of xi(t))Fb.call(t,n)&&Fi(e,n,t[n]);return e};function Ab(e,t){return n=>{const o=t();return r.createElement(e,Ai(Ai({},n),o))}}const kb=Ab;function jb(){const{hasDraftAndPublish:e,modifiedData:t}=(0,g.useCMEditViewDataManager)();let n={};return e&&(n=(0,J.isEmpty)(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const $b=jb;var Bb=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const ki=({isCreatingEntry:e,onDelete:t,onDeleteSucceeded:n,trackerProperty:o})=>{const[s,l]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),{formatMessage:u}=(0,W.useIntl)(),d=(0,g.useNotification)(),f=()=>l(m=>!m),y=()=>Bb(void 0,null,function*(){try{c(!0),yield t(o),c(!1),f(),n()}catch(m){const h=M()(m,"response.payload.message",u({id:O("error.record.delete")}));c(!1),f(),d({type:"warning",message:h})}});return e?null:r.createElement(r.Fragment,null,r.createElement(ve.Button,{onClick:f,size:"S",startIcon:r.createElement(We(),null),variant:"danger-light"},u({id:O("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})),r.createElement(g.ConfirmDialog,{isConfirmButtonLoading:i,isOpen:s,onConfirm:y,onToggleDialog:f}))};ki.propTypes={isCreatingEntry:a().bool.isRequired,onDelete:a().func.isRequired,onDeleteSucceeded:a().func.isRequired,trackerProperty:a().object.isRequired};const Nb=(0,r.memo)(ki,Ze()),Vb=kb(Nb,$b),ji=Se.Z.contentManager,qb=[{action:"plugin::content-type-builder.read",subject:null}],jr=({allowedActions:e,isSingleType:t,goBack:n,layout:o,slug:s,id:l,origin:i,userPermissions:c})=>{const{trackUsage:u}=(0,g.useTracking)(),{formatMessage:d}=(0,W.useIntl)(),{createActionAllowedFields:f,readActionAllowedFields:y,updateActionAllowedFields:m}=(0,r.useMemo)(()=>Lb(c,s),[c,s]),h=(0,r.useMemo)(()=>t?ji.singleTypesConfigurations:ji.collectionTypesConfigurations,[t]),b=`/content-manager/${t?"singleType":"collectionType"}/${s}/configurations/edit`,E=M()(o,["contentType"],{}),S=(0,r.useMemo)(()=>t?eb:ch,[t]),P=(0,r.useCallback)(F=>F.every(v=>v.every(R=>R.fieldSchema.type==="dynamiczone")),[]),C=(0,r.useMemo)(()=>E.layouts?Db(E.layouts.edit,E.attributes):[],[E]);return r.createElement(S,{allLayoutData:o,slug:s,id:l,origin:i},({componentsDataStructure:F,contentTypeDataStructure:v,data:R,isCreatingEntry:L,isLoadingForData:T,onDelete:Q,onDeleteSucceeded:H,onPost:j,onPublish:Z,onDraftRelationCheck:Y,onPut:A,onUnpublish:w,redirectionLink:K,status:N})=>r.createElement(Hh,{allowedActions:e,allLayoutData:o,createActionAllowedFields:f,componentsDataStructure:F,contentTypeDataStructure:v,from:K,initialValues:R,isCreatingEntry:L,isLoadingForData:T,isSingleType:t,onPost:j,onPublish:Z,onDraftRelationCheck:Y,onPut:A,onUnpublish:w,readActionAllowedFields:y,redirectToPreviousPage:n,slug:s,status:N,updateActionAllowedFields:m},r.createElement(ie.Main,{"aria-busy":N!=="resolved"},r.createElement(Ib,{allowedActions:e}),r.createElement(X.ContentLayout,null,r.createElement(de.Grid,{gap:4},r.createElement(de.GridItem,{col:9,s:12},r.createElement(r.Suspense,{fallback:r.createElement(g.LoadingIndicatorPage,null)},r.createElement(ue.Stack,{spacing:6},C.map((G,z)=>{if(P(G)){const{0:{0:{name:$,fieldSchema:k,metadatas:D,labelAction:V}}}=G;return r.createElement(I.Box,{key:z},r.createElement(de.Grid,{gap:4},r.createElement(de.GridItem,{col:12,s:12,xs:12},r.createElement(rh,{name:$,fieldSchema:k,labelAction:V,metadatas:D}))))}return r.createElement(I.Box,{key:z,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150"},r.createElement(ue.Stack,{spacing:6},G.map(($,k)=>r.createElement(de.Grid,{gap:4,key:k},$.map(({fieldSchema:D,labelAction:V,metadatas:_,name:ne,size:re,queryInfos:q})=>{if(D.type==="component"){const{component:Ne,max:be,min:Ve,repeatable:Me=!1,required:je=!1}=D;return r.createElement(de.GridItem,{col:re,s:12,xs:12,key:Ne},r.createElement(sn,{componentUid:Ne,labelAction:V,isRepeatable:Me,intlLabel:{id:_.label,defaultMessage:_.label},max:be,min:Ve,name:ne,required:je}))}return r.createElement(de.GridItem,{col:re,key:ne,s:12,xs:12},r.createElement(gr,{size:re,fieldSchema:D,keys:ne,labelAction:V,metadatas:_,queryInfos:q}))})))))})))),r.createElement(de.GridItem,{col:3,s:12},r.createElement(ue.Stack,{spacing:2},r.createElement(gb,null),r.createElement(I.Box,{as:"aside","aria-labelledby":"additional-informations",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(hb,null),r.createElement(Kt,{area:"contentManager.editView.informations"})),r.createElement(I.Box,{as:"aside","aria-labelledby":"links"},r.createElement(ue.Stack,{spacing:2},r.createElement(Kt,{area:"contentManager.editView.right-links",slug:s}),s!=="strapi::administrator"&&r.createElement(g.CheckPermissions,{permissions:qb},r.createElement(g.LinkButton,{onClick:()=>{u("willEditEditLayout")},size:"S",startIcon:r.createElement(ft(),null),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${s}`,variant:"secondary"},d({id:O("link-to-ctb"),defaultMessage:"Edit the model"}))),r.createElement(g.CheckPermissions,{permissions:h},r.createElement(g.LinkButton,{size:"S",startIcon:r.createElement(ld(),null),style:{width:"100%"},to:b,variant:"secondary"},d({id:"app.links.configure-view",defaultMessage:"Configure the view"}))),e.canDelete&&r.createElement(Vb,{isCreatingEntry:L,onDelete:Q,onDeleteSucceeded:H}))))))))))};jr.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},jr.propTypes={allowedActions:a().shape({canRead:a().bool.isRequired,canUpdate:a().bool.isRequired,canCreate:a().bool.isRequired,canDelete:a().bool.isRequired}).isRequired,layout:a().shape({components:a().object.isRequired,contentType:a().shape({uid:a().string.isRequired,settings:a().object.isRequired,metadatas:a().object.isRequired,options:a().object.isRequired,attributes:a().object.isRequired}).isRequired}).isRequired,id:a().string,isSingleType:a().bool,goBack:a().func.isRequired,origin:a().string,slug:a().string.isRequired,userPermissions:a().array};const zb=(0,r.memo)(jr);var Wb=Object.defineProperty,Ub=Object.defineProperties,_b=Object.getOwnPropertyDescriptors,$i=Object.getOwnPropertySymbols,Hb=Object.prototype.hasOwnProperty,Zb=Object.prototype.propertyIsEnumerable,Bi=(e,t,n)=>t in e?Wb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gb=(e,t)=>{for(var n in t||(t={}))Hb.call(t,n)&&Bi(e,n,t[n]);if($i)for(var n of $i(t))Zb.call(t,n)&&Bi(e,n,t[n]);return e},Qb=(e,t)=>Ub(e,_b(t));const $r=e=>{const t=(0,r.useMemo)(()=>Do(e.slug),[e.slug]),{isLoading:n,allowedActions:o}=(0,g.useRBAC)(t,e.userPermissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(zb,Qb(Gb({},e),{allowedActions:o}))};$r.defaultProps={permissions:[]},$r.propTypes={permissions:a().array,slug:a().string.isRequired,userPermissions:a().array.isRequired};const Yb=(0,r.memo)($r,Ze());var Kb=Object.defineProperty,Jb=Object.defineProperties,Xb=Object.getOwnPropertyDescriptors,gn=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,Vi=Object.prototype.propertyIsEnumerable,qi=(e,t,n)=>t in e?Kb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ev=(e,t)=>{for(var n in t||(t={}))Ni.call(t,n)&&qi(e,n,t[n]);if(gn)for(var n of gn(t))Vi.call(t,n)&&qi(e,n,t[n]);return e},tv=(e,t)=>Jb(e,Xb(t)),nv=(e,t)=>{var n={};for(var o in e)Ni.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&gn)for(var o of gn(e))t.indexOf(o)<0&&Vi.call(e,o)&&(n[o]=e[o]);return n};const zi=e=>{var t=e,{layout:n}=t,o=nv(t,["layout"]);const s=(0,he.useSelector)(vo),l=(0,he.useDispatch)(),[{query:i}]=(0,g.useQueryParams)(),{runHookWaterfall:c}=(0,g.useStrapiApp)(),u=na(i,o.slug,"editView");return(0,r.useEffect)(()=>{const d=c(Qt.Eo,{layout:n,query:i});return l(ad(d.layout,i)),()=>{l(od())}},[n,l,i,c]),!s||!u?r.createElement(g.LoadingIndicatorPage,null):r.createElement(Yb,tv(ev({},o),{layout:s,userPermissions:u}))};zi.propTypes={layout:a().shape({components:a().object.isRequired,contentType:a().shape({uid:a().string.isRequired,settings:a().object.isRequired,metadatas:a().object.isRequired,options:a().object.isRequired,attributes:a().object.isRequired}).isRequired}).isRequired};const yn=zi;var rv=p(23940),At=p.n(rv),ov=p(3704),av=p.n(ov),sv=Object.defineProperty,iv=Object.defineProperties,lv=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,cv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,Ui=(e,t,n)=>t in e?sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dv=(e,t)=>{for(var n in t||(t={}))cv.call(t,n)&&Ui(e,n,t[n]);if(Wi)for(var n of Wi(t))uv.call(t,n)&&Ui(e,n,t[n]);return e},pv=(e,t)=>iv(e,lv(t));const Br=e=>e.reduce((t,n)=>t+n.size,0),mv=e=>e.reduce((t,n,o)=>{const s={rowId:o,rowContent:n};return t.concat(s)},[]),bt=e=>e.reduce((t,n)=>{let o=[];const s=n.rowContent.reduce((c,u)=>{const d=Br(c);return u.name==="_TEMP_"||(d+u.size<=12?c.push(u):o.push(u)),c},[]),l=t.length===0?0:Math.max.apply(Math,t.map(c=>c.rowId))+1,i=Br(s);if(i<12&&s.push({name:"_TEMP_",size:12-i}),t.push({rowId:l,rowContent:s}),o.length>0){const c=Br(o);c<12&&o.push({name:"_TEMP_",size:12-c}),t.push({rowId:l+1,rowContent:o}),o=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),fv=e=>e.reduce((t,n)=>{const o=n.rowContent.filter(s=>s.name!=="_TEMP_");return t.concat([o])},[]),_i=e=>{switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}},gv=(e,t=[])=>t.reduce((n,{rowContent:o})=>{var s,l;const i=(l=(s=o.find(c=>c.name===e))==null?void 0:s.size)!=null?l:null;return i&&(n=i),n},null),yv=(e,t,n=[])=>n.map(o=>(o.rowContent=o.rowContent.map(s=>s.name===e?pv(dv({},s),{size:t}):s),o)),Nr={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},hv=(e=Nr,t)=>(0,Zt.default)(e,n=>{var o,s,l;const i=["modifiedData","layouts","edit"];switch(t.type){case"MOVE_ROW":{const c=M()(e,i,[]),{fromIndex:u,toIndex:d}=t;te()(n,i,zt(c,u,d));break}case"ON_ADD_FIELD":{const c=ze()(e),u=_i(M()(c,["modifiedData","attributes",t.name,"type"],"")),d=M()(c,i,[]).length,f=[...i,d-1,"rowContent"],y=M()(c,f,[]);let m=M()(c,i,[]);Array.isArray(y)?te()(m,[d>0?d-1:0,"rowContent"],[...y,{name:t.name,size:u}]):te()(m,[d>0?d-1:0,"rowContent"],[{name:t.name,size:u}]);const h=bt(m);te()(n,i,h);break}case"ON_CHANGE":{te()(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{te()(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{te()(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const c=M()(e,[...i,t.rowIndex,"rowContent"],[]);let u=ze()(e);if(c.length===1||c.length===2&&M()(c,[1,"name"],"")==="_TEMP_"){const f=M()(e,i,[]);te()(u,i,f.filter((y,m)=>t.rowIndex!==m))}else te()(u,[...i,t.rowIndex,"rowContent"],c.filter((f,y)=>y!==t.fieldIndex));const d=bt(M()(u,i,[]));te()(n,i,d);break}case"REORDER_DIFF_ROW":{const c=M()(e,[...i,t.dragRowIndex,"rowContent"],[]),u=M()(e,[...i,t.hoverRowIndex,"rowContent"],[]),d=M()(e,[...i,t.dragRowIndex,"rowContent",t.dragIndex],{}),f=[...u,d];let y=ze()(e);te()(y,[...i,t.dragRowIndex,"rowContent"],c.filter((h,b)=>t.dragIndex!==b)),te()(y,[...i,t.hoverRowIndex,"rowContent"],zt(f,f.length-1,t.hoverIndex));const m=bt(M()(y,i,[]));te()(n,i,m);break}case"REORDER_ROW":{const c=ze()(e),u=M()(c,[...i,t.dragRowIndex,"rowContent"],[]);te()(c,[...i,t.dragRowIndex,"rowContent"],zt(u,t.dragIndex,t.hoverIndex));const d=bt(M()(c,i,[]));te()(n,i,d);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:M()(e,["modifiedData","metadatas",t.name,"edit"],{}),size:(l=gv(t.name,(s=(o=e.modifiedData)==null?void 0:o.layouts)==null?void 0:s.edit))!=null?l:_i()};break}case"SUBMIT_META_FORM":{te()(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const c=ze()(M()(e,i,[])),u=yv(e.metaToEdit,e.metaForm.size,c);u.length>0&&te()(n,i,bt(u));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}});var bv=Object.defineProperty,vv=Object.defineProperties,Ev=Object.getOwnPropertyDescriptors,Hi=Object.getOwnPropertySymbols,Cv=Object.prototype.hasOwnProperty,Ov=Object.prototype.propertyIsEnumerable,Zi=(e,t,n)=>t in e?bv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pv=(e,t)=>{for(var n in t||(t={}))Cv.call(t,n)&&Zi(e,n,t[n]);if(Hi)for(var n of Hi(t))Ov.call(t,n)&&Zi(e,n,t[n]);return e},Rv=(e,t)=>vv(e,Ev(t));const Tv=(e,t,n)=>{let o=(0,J.cloneDeep)(t);return(0,J.set)(o,["layouts","edit"],bt(mv(t.layouts.edit))),Rv(Pv({},e),{initialData:o,modifiedData:o,componentLayouts:n})};var Ue=p(12611),Mv=p(42258),Gi=p.n(Mv);const Qi=({componentUid:e})=>{const{componentLayouts:t}=at(),{formatMessage:n}=(0,W.useIntl)(),o=M()(t,[e],{}),s=M()(o,["layouts","edit"],[]);return r.createElement(I.Box,{padding:3},s.map((l,i)=>r.createElement(de.Grid,{gap:4,key:i},l.map(c=>r.createElement(de.GridItem,{key:c.name,col:c.size},r.createElement(I.Box,{paddingTop:2},r.createElement(U.Flex,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200"},r.createElement(B.Typography,{textColor:"neutral800"},c.name))))))),r.createElement(I.Box,{paddingTop:2},r.createElement(g.Link,{startIcon:r.createElement(Gi(),null),to:`/content-manager/components/${e}/configurations/edit`},n({id:O("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"}))))};Qi.propTypes={componentUid:a().string.isRequired};const wv=Qi,Yi=(0,x.default)(U.Flex)`
  border-radius: 50%;
  svg {
    & > * {
      fill: ${({theme:e})=>e.colors.neutral500};
    }
    width: 12px;
    height: 12px;
  }
`,Iv=(0,x.default)(U.Flex)`
  text-decoration: none;
  &:hover {
    ${({theme:e})=>`
      background: ${e.colors.primary100};
      svg {
        & > * {
          fill: ${e.colors.primary600};
        }
      }
      ${B.Typography} {
          color: ${e.colors.primary600};
      }
      ${Yi} {
        background: ${e.colors.primary200};
      }
      border-color: ${e.colors.primary200};
    `}
  }
`,Ki=({components:e})=>{const{componentLayouts:t}=at();return r.createElement(ue.Stack,{spacing:2,horizontal:!0,overflow:"scroll hidden",padding:3},e.map(n=>r.createElement(Iv,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,key:n,padding:2,direction:"column",borderColor:"neutral200",as:ee.Link,to:`/content-manager/components/${n}/configurations/edit`},r.createElement(Yi,{width:`${32/16}rem`,height:`${32/16}rem`,background:"neutral150",justifyContent:"center",alignItems:"center",padding:2},r.createElement($n.G,{icon:M()(t,[n,"info","icon"],"")})),r.createElement(I.Box,{paddingTop:1},r.createElement(B.Typography,{fontSize:1,textColor:"neutral600",fontWeight:"bold"},M()(t,[n,"info","displayName"],""))))))};Ki.propTypes={components:a().arrayOf(a().string).isRequired};const Dv=Ki,Ji=(0,x.default)(Te.IconButton)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Vr=({attribute:e,onEditField:t,onDeleteField:n,children:o})=>{const{formatMessage:s}=(0,W.useIntl)();return r.createElement(I.Box,{overflow:"hidden",width:"100%"},r.createElement(U.Flex,{paddingLeft:3,alignItems:"center",justifyContent:"space-between"},r.createElement(B.Typography,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0},o),r.createElement(U.Flex,null,r.createElement(Ji,{label:s({id:O("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:o}),onClick:t,icon:r.createElement(ft(),null),noBorder:!0}),r.createElement(Ji,{label:s({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:o}),"data-testid":"delete-field",onClick:n,icon:r.createElement(We(),null),noBorder:!0}))),(e==null?void 0:e.type)==="component"&&r.createElement(wv,{componentUid:e.component}),(e==null?void 0:e.type)==="dynamiczone"&&r.createElement(Dv,{components:e.components}))};Vr.defaultProps={attribute:void 0},Vr.propTypes={attribute:a().shape({components:a().array,component:a().string,type:a().string}),onEditField:a().func.isRequired,onDeleteField:a().func.isRequired,children:a().string.isRequired};const Lv=Vr,Sv=(0,x.default)(U.Flex)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,xv=(0,x.default)(mt())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Fv=(0,x.default)(U.Flex)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,Av=(0,x.default)(U.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,qr=({attribute:e,children:t,index:n,lastIndex:o,moveItem:s,moveRow:l,name:i,onDeleteField:c,onEditField:u,rowIndex:d,size:f})=>{const[y,m]=(0,r.useState)(!1),h=i==="_TEMP_",{setIsDraggingSibling:b}=at(),E=f===12,S=(0,r.useRef)(null),P=(0,r.useRef)(null),[{clientOffset:C,isOver:F},v]=(0,Fe.useDrop)({accept:Re.EDIT_FIELD,hover(N,G){if(!P.current||N.size!==12)return;const z=G.getItem().index,$=n,k=G.getItem().rowIndex,D=d;if(z===$&&k===D)return;const V=P.current.getBoundingClientRect(),_=(V.bottom-V.top)/2,re=G.getClientOffset().y-V.top;k<D&&re<_||k>D&&re>_||(l(k,D),N.rowIndex=D,N.itemIndex=$)},drop(N,G){if(!P.current)return;const z=G.getItem().index,$=n,k=G.getItem().rowIndex,D=d;if(N.size===12||z===$&&k===D)return;const V=P.current.getBoundingClientRect();if(Math.abs(G.getClientOffset().x-V.left)>V.width/1.8){s(z,$+1,k,D),N.itemIndex=$+1,N.rowIndex=D;return}s(z,$,k,D),N.itemIndex=$,N.rowIndex=D},collect:N=>({canDrop:N.canDrop(),clientOffset:N.getClientOffset(),isOver:N.isOver(),isOverCurrent:N.isOver({shallow:!0}),itemType:N.getItemType()})}),[{isDragging:R,getItem:L},T,Q]=(0,Fe.useDrag)({type:Re.EDIT_FIELD,item(){return b(!0),{index:n,labelField:t,rowIndex:d,name:i,size:f}},canDrag(){return i!=="_TEMP_"},collect:N=>({isDragging:N.isDragging(),getItem:N.getItem()}),end(){b(!1)}});(0,r.useEffect)(()=>{Q((0,hr.rX)(),{captureDraggingState:!0})},[Q]);const H={dragRef:T(S),dropRef:v(P)};let j=!1,Z=!1;if(P.current&&C){const N=P.current.getBoundingClientRect();j=F&&L.size!==12&&Math.abs(C.x-N.left)<N.width/2,Z=F&&L.size!==12&&Math.abs(C.x-N.left)>N.width/2,i==="_TEMP_"&&(j=F&&L.size!==12,Z=!1)}const Y=()=>e&&E?`${74/16}rem`:`${32/16}rem`,A=n===0&&!E,w=n===o&&!E,K=n!==0&&!E;return r.createElement(de.GridItem,{col:f},r.createElement(Sv,{ref:H.dropRef,showLeftCarret:j,showRightCarret:Z,isFirst:A,isLast:w,hasHorizontalPadding:K,onDrag:()=>{E&&!y&&m(!0)},onDragEnd:()=>{E&&m(!1)}},y&&E&&r.createElement(I.Box,{width:"100%",height:"2px",background:"primary600"}),r.createElement(Fv,{width:E&&y?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:Y(),alignItems:"stretch",isDragging:R,dragStart:y,isFullSize:E,isHidden:h},r.createElement(Av,{as:"span",type:"button",ref:H.dragRef,onClick:N=>N.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(xv,null)),!h&&r.createElement(Lv,{attribute:e,onEditField:u,onDeleteField:c},t))))};qr.defaultProps={attribute:void 0},qr.propTypes={attribute:a().shape({components:a().array,component:a().string,type:a().string}),children:a().string.isRequired,index:a().number.isRequired,moveItem:a().func.isRequired,moveRow:a().func.isRequired,name:a().string.isRequired,onDeleteField:a().func.isRequired,onEditField:a().func.isRequired,rowIndex:a().number.isRequired,lastIndex:a().number.isRequired,size:a().number.isRequired};const kv=qr,Xi=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:o,index:s,lastIndex:l})=>{const{setEditFieldToSelect:i,attributes:c,modifiedData:u,moveRow:d,moveItem:f}=at(),y=M()(c,[e.name],{}),m=M()(u,["metadatas",e.name,"edit","label"],"");return r.createElement(kv,{onEditField:()=>i(e.name),onDeleteField:()=>t(n,s),attribute:y,index:s,lastIndex:l,rowIndex:o,name:e.name,size:e.size,moveRow:d,moveItem:f},m||e.name)};Xi.propTypes={index:a().number.isRequired,lastIndex:a().number.isRequired,onRemoveField:a().func.isRequired,rowId:a().number.isRequired,rowIndex:a().number.isRequired,rowItem:a().object.isRequired};const jv=Xi,el=({row:e,onRemoveField:t,rowIndex:n})=>r.createElement(de.Grid,null,e.rowContent.map((o,s)=>r.createElement(jv,{key:o.name,rowItem:o,index:s,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1})));el.propTypes={onRemoveField:a().func.isRequired,row:a().object.isRequired,rowIndex:a().number.isRequired};const $v=el,Bv=[{action:"plugin::content-type-builder.read",subject:null}],Nv=()=>{const{trackUsage:e}=(0,g.useTracking)(),{formatMessage:t}=(0,W.useIntl)(),{slug:n,modifiedData:o,isContentTypeView:s}=at(),l=s?"content-types":"components",i=`/plugins/content-type-builder/${l==="content-types"?l:"component-categories"}`,c=M()(o,"category",""),u=l==="content-types"?n:`${c}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:r.createElement(g.CheckPermissions,{permissions:Bv},r.createElement(g.LinkButton,{to:`${i}/${u}`,onClick:d,size:"S",startIcon:r.createElement(ft(),null),variant:"secondary"},t({id:O(`edit-settings-view.link-to-ctb.${l}`),defaultMessage:"Edit the content type"})))},tl=({editLayout:e,fields:t,onRemoveField:n,onAddField:o})=>{const{formatMessage:s}=(0,W.useIntl)();return r.createElement(ue.Stack,{spacing:4},r.createElement(U.Flex,{justifyContent:"space-between"},r.createElement("div",null,r.createElement(I.Box,null,r.createElement(B.Typography,{fontWeight:"bold"},s({id:O("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"}))),r.createElement(I.Box,null,r.createElement(B.Typography,{variant:"pi",textColor:"neutral600"},s({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(Nv,null)),r.createElement(I.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(ue.Stack,{spacing:2},e.map((l,i)=>r.createElement($v,{key:l.rowId,row:l,rowIndex:i,onRemoveField:n})),r.createElement(Ue.SimpleMenu,{id:"label",label:s({id:O("containers.SettingPage.add.field"),defaultMessage:"Insert another field"}),as:ve.Button,"data-testid":"add-field",fullWidth:!0,startIcon:r.createElement(St(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(l=>r.createElement(Ue.MenuItem,{key:l,onClick:()=>o(l)},l))))))};tl.propTypes={editLayout:a().array.isRequired,fields:a().array.isRequired,onAddField:a().func.isRequired,onRemoveField:a().func.isRequired};const Vv=tl;var et=p(4122),qv=p(61714),hn=p.n(qv),zv=p(9895),Wv=p.n(zv),Uv=p(34103),_v=p.n(Uv),Hv=p(57290),nl=p.n(Hv),Zv=p(55788),zr=p.n(Zv),Gv=p(81208),Qv=p.n(Gv),Yv=p(65232),Wr=p.n(Yv),Kv=p(80268),Jv=p.n(Kv),Xv=p(42122),kt=p.n(Xv),e0=p(57955),t0=p.n(e0),n0=p(10822),r0=p.n(n0),o0=p(80466),a0=p.n(o0);const rl={biginteger:r.createElement(kt(),null),boolean:r.createElement(Wv(),null),date:r.createElement(hn(),null),datetime:r.createElement(hn(),null),decimal:r.createElement(kt(),null),email:r.createElement(_v(),null),enum:r.createElement(nl(),null),enumeration:r.createElement(nl(),null),file:r.createElement(zr(),null),files:r.createElement(zr(),null),float:r.createElement(kt(),null),integer:r.createElement(kt(),null),media:r.createElement(zr(),null),number:r.createElement(kt(),null),relation:r.createElement(Qv(),null),string:r.createElement(Wr(),null),text:r.createElement(Wr(),null),richtext:r.createElement(Wr(),null),time:r.createElement(hn(),null),timestamp:r.createElement(hn(),null),json:r.createElement(t0(),null),uid:r.createElement(Jv(),null),component:r.createElement(r0(),null),dynamiczone:r.createElement(a0(),null)},Ur=({type:e,customFieldUid:t})=>{const n=(0,g.useCustomFields)();let o=rl[e];if(t){const l=n.get(t).icon;l&&(o=r.createElement(I.Box,{marginRight:3,width:7,height:6},r.createElement(l,null)))}return rl[e]?o:null};Ur.defaultProps={customFieldUid:null},Ur.propTypes={type:a().string.isRequired,customFieldUid:a().string};const ol=Ur,s0=e=>e.reduce((t,n)=>{const o=(0,J.get)(n,["attributes"],{}),s=Object.keys(o).filter(l=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext"].includes((0,J.get)(o,[l,"type"],"")));return t[n.uid]=s,t},{}),al=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=O(e==="mainField"?"containers.SettingPage.editSettings.entry.title":`form.Input.${e}`);return{type:t,label:{id:n}}};var jt=p(63865),i0=Object.defineProperty,bn=Object.getOwnPropertySymbols,sl=Object.prototype.hasOwnProperty,il=Object.prototype.propertyIsEnumerable,ll=(e,t,n)=>t in e?i0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_r=(e,t)=>{for(var n in t||(t={}))sl.call(t,n)&&ll(e,n,t[n]);if(bn)for(var n of bn(t))il.call(t,n)&&ll(e,n,t[n]);return e},l0=(e,t)=>{var n={};for(var o in e)sl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&bn)for(var o of bn(e))t.indexOf(o)<0&&il.call(e,o)&&(n[o]=e[o]);return n};const Hr=e=>{var t=e,{type:n,options:o,onChange:s,value:l,name:i}=t,c=l0(t,["type","options","onChange","value","name"]);const{formatMessage:u}=(0,W.useIntl)();switch(n){case"text":return r.createElement(Jn.TextInput,_r({onChange:s,value:l,name:i},c));case"bool":return r.createElement(jt.ToggleInput,_r({onChange:d=>{s({target:{name:i,value:d.target.checked}})},checked:l,name:i,onLabel:u({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:u({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"})},c));case"select":return r.createElement(pe.Select,_r({value:l,name:i,onChange:d=>s({target:{name:i,value:d}})},c),o.map(d=>r.createElement(pe.Option,{key:d,value:d},d)));default:return null}};Hr.defaultProps={options:void 0},Hr.propTypes={type:a().string.isRequired,options:a().arrayOf(a().string),onChange:a().func.isRequired,value:a().oneOfType([a().string,a().bool]).isRequired,name:a().string.isRequired};const c0=Hr,u0=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],d0=["dynamiczone","component","json","richtext"],p0=[1,5,10,15,30,60],m0=["datetime","time"],cl=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,W.useIntl)(),{modifiedData:o,selectedField:s,attributes:l,fieldForm:i}=at(),c=(0,r.useMemo)(xn,[]),{schemas:u}=(0,he.useSelector)(P=>c(P),he.shallowEqual),d=(0,r.useMemo)(()=>{if(!s)return[];const P=M()(o,["metadatas",s,"edit"],{});return Object.keys(P).filter(C=>C!=="visible")},[s,o]),f=(0,r.useMemo)(()=>s0(u),[u]),y=(0,r.useCallback)(P=>{if(P!=="relation"&&P!=="component")return[];const C=P==="component"?"component":"targetModel",F=M()(o,["attributes",s,C],"");return M()(f,[F],[])},[s,f,o]),m=d.map(P=>{const C=M()(l,[s,"type"]);return["component","dynamiczone"].includes(C)&&!["label","description"].includes(P)||C==="component"&&P!=="label"||["media","json","boolean"].includes(C)&&P==="placeholder"||P==="step"?null:r.createElement(de.GridItem,{col:6,key:P},r.createElement(c0,{type:al(P).type,hint:P==="mainField"?n({id:O("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:M()(al(P),"label.id","app.utils.defaultMessage")}),name:P,onChange:e,value:M()(i,["metadata",P],""),options:y(C)}))}),h=!d0.includes(l[s].type),b=r.createElement(de.GridItem,{col:6,key:"size"},r.createElement(pe.Select,{value:i==null?void 0:i.size,name:"size",onChange:P=>{t({name:s,value:P})},label:n({id:O("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"})},u0.map(([P,C])=>r.createElement(pe.Option,{key:P,value:P},C)))),E=m0.includes(l[s].type),S=r.createElement(de.GridItem,{col:6,key:"step"},r.createElement(pe.Select,{value:M()(i,["metadata","step"],1),name:"step",onChange:P=>e({target:{name:"step",value:P}}),label:n({id:O("containers.SettingPage.editSettings.step.label"),defaultMessage:"Time interval (minutes)"})},p0.map(P=>r.createElement(pe.Option,{key:P,value:P},P))));return r.createElement(r.Fragment,null,m,h&&b,E&&S)};cl.propTypes={onMetaChange:a().func.isRequired,onSizeChange:a().func.isRequired};const f0=cl,g0=(0,x.default)(U.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,Zr=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:o,type:s,customFieldUid:l})=>{const{selectedField:i}=at(),{formatMessage:c}=(0,W.useIntl)(),u=()=>s==="timestamp"?"date":["decimal","float","integer","biginter"].includes(s)?"number":s;return r.createElement(et.ModalLayout,{onClose:e,labelledBy:"title"},r.createElement("form",{onSubmit:o},r.createElement(et.ModalHeader,null,r.createElement(g0,null,r.createElement(ol,{type:u(),customFieldUid:l}),r.createElement(B.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},c({id:O("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:At()(i)})))),r.createElement(et.ModalBody,null,r.createElement(de.Grid,{gap:4},r.createElement(f0,{onMetaChange:t,onSizeChange:n}))),r.createElement(et.ModalFooter,{startActions:r.createElement(ve.Button,{onClick:e,variant:"tertiary"},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ve.Button,{type:"submit"},c({id:"global.finish",defaultMessage:"Finish"}))})))};Zr.defaultProps={customFieldUid:null},Zr.propTypes={customFieldUid:a().string,onSubmit:a().func.isRequired,onToggle:a().func.isRequired,onMetaChange:a().func.isRequired,onSizeChange:a().func.isRequired,type:a().string.isRequired};const y0=Zr,h0=(e,t,n)=>fe.be.put(ye(n?`content-types/${t}/configuration`:`components/${t}/configuration`),e),Gr=({mainLayout:e,components:t,isContentTypeView:n,slug:o,updateLayout:s})=>{const[l,i]=(0,r.useReducer)(hv,Nr,()=>Tv(Nr,e,t)),[c,u]=(0,r.useState)(!1),{trackUsage:d}=(0,g.useTracking)(),f=(0,g.useNotification)(),{goBack:y}=(0,ee.useHistory)(),[m,h]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!1),{componentLayouts:S,initialData:P,modifiedData:C,metaToEdit:F,metaForm:v}=l,{formatMessage:R}=(0,W.useIntl)(),L=M()(e,["info","displayName"],""),T=M()(C,["attributes"],{}),Q=Object.keys(T).filter(q=>{const oe=M()(T,[q,"type"],"");return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp"].includes(oe)&&!!oe}),H=M()(C,["layouts","edit"],[]),j=av()(H,"rowContent"),Z=Object.keys(C.attributes).filter(q=>M()(C,["metadatas",q,"edit","visible"],!1)===!0).filter(q=>j.findIndex(oe=>oe.name===q)===-1).sort(),Y=({target:{name:q,value:oe}})=>{i({type:"ON_CHANGE",keys:q.split("."),value:oe})},A=()=>{h(q=>!q)},w=()=>{E(q=>!q)},K=({target:{name:q,value:oe}})=>{i({type:"ON_CHANGE_META",keys:q.split("."),value:oe})},N=({name:q,value:oe})=>{i({type:"ON_CHANGE_SIZE",name:q,value:oe})},G=q=>{q.preventDefault(),i({type:"SUBMIT_META_FORM"}),A()},z=q=>{q.preventDefault(),w()},$=(0,it.useMutation)(q=>h0(q,o,n),{onSuccess({data:q}){s&&s(q.data),i({type:"SUBMIT_SUCCEEDED"}),w(),d("didEditEditSettings")},onError(){f({type:"warning",message:{id:"notification.error"}})}}),{isLoading:k}=$,D=()=>{const q=nr()(ze()(C),["layouts","metadatas","settings"]);te()(q,"layouts.edit",fv(q.layouts.edit)),$.mutate(q)},V=(q,oe)=>{i({type:"MOVE_RELATION",fromIndex:q,toIndex:oe})},_=(q,oe)=>{i({type:"MOVE_FIELD",fromIndex:q,toIndex:oe})},ne=(q,oe,Ne,be)=>{i(Ne===be?{type:"REORDER_ROW",dragRowIndex:Ne,dragIndex:q,hoverIndex:oe}:{type:"REORDER_DIFF_ROW",dragIndex:q,hoverIndex:oe,dragRowIndex:Ne,hoverRowIndex:be})},re=(q,oe)=>{i({type:"MOVE_ROW",fromIndex:q,toIndex:oe})};return r.createElement(ot,{isContentTypeView:n,attributes:T,modifiedData:C,slug:o,componentLayouts:S,selectedField:F,fieldForm:v,onMoveRelation:V,onMoveField:_,moveRow:re,moveItem:ne,setEditFieldToSelect:q=>{i({type:"SET_FIELD_TO_EDIT",name:q}),A()},isDraggingSibling:c,setIsDraggingSibling:u},r.createElement(ie.Main,null,r.createElement("form",{onSubmit:z},r.createElement(X.HeaderLayout,{title:R({id:O("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${At()(L)}`},{name:At()(L)}),subtitle:R({id:O("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:r.createElement(g.Link,{startIcon:r.createElement(fn(),null),onClick:q=>{q.preventDefault(),y()},to:"/"},R({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ve.Button,{disabled:cn()(P,C),startIcon:r.createElement(ht(),null),type:"submit"},R({id:"global.save",defaultMessage:"Save"}))}),r.createElement(X.ContentLayout,null,r.createElement(I.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(ue.Stack,{spacing:4},r.createElement(B.Typography,{variant:"delta",as:"h2"},R({id:O("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(de.Grid,null,r.createElement(de.GridItem,{col:6,s:12},r.createElement(pe.Select,{label:R({id:O("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:R({id:O("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:q=>{Y({target:{name:"settings.mainField",value:q===""?null:q}})},value:C.settings.mainField},Q.map(q=>r.createElement(pe.Option,{key:q,value:q},q))))),r.createElement(I.Box,{paddingTop:2,paddingBottom:2},r.createElement(Fr.Divider,null)),r.createElement(B.Typography,{variant:"delta",as:"h3"},R({id:O("containers.SettingPage.view"),defaultMessage:"View"})),r.createElement(Vv,{attributes:T,editLayout:H,fields:Z,onAddField:q=>{i({type:"ON_ADD_FIELD",name:q})},onRemoveField:(q,oe)=>{i({type:"REMOVE_FIELD",rowIndex:q,fieldIndex:oe})}})))),r.createElement(g.ConfirmDialog,{bodyText:{id:O("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ht(),null),isConfirmButtonLoading:k,isOpen:b,onToggleDialog:w,onConfirm:D,variantRightButton:"success-light"})),m&&r.createElement(y0,{onSubmit:G,onToggle:A,onMetaChange:K,onSizeChange:N,type:M()(T,[F,"type"],""),customFieldUid:M()(T,[F,"customField"],"")})))};Gr.defaultProps={isContentTypeView:!1,updateLayout:null},Gr.propTypes={components:a().object.isRequired,isContentTypeView:a().bool,mainLayout:a().shape({attributes:a().object.isRequired,info:a().object.isRequired,layouts:a().shape({list:a().array.isRequired,edit:a().array.isRequired}).isRequired,metadatas:a().object.isRequired,options:a().object.isRequired}).isRequired,slug:a().string.isRequired,updateLayout:a().func};const Qr=Gr;var vt=p(37617);const b0=()=>({type:vt.ZA}),v0=(e,t)=>({type:vt.Id,pagination:e,data:t}),E0=()=>({type:vt.MP});function C0(){return{type:vt.c2}}const O0=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:vt.Zz}},Yr=e=>({type:vt.Rp,target:e});var ul=p(13055),Kr=p(29270),P0=p(70664);const R0=()=>e=>e["content-manager_listView"]||P0.E,T0=()=>(0,Sn.P1)(R0(),e=>e),dl=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},M0=T0;var w0=p(35980),$t=p(53214),I0=p(68192),D0=p.n(I0),pl=p(9667),L0=Object.defineProperty,vn=Object.getOwnPropertySymbols,ml=Object.prototype.hasOwnProperty,fl=Object.prototype.propertyIsEnumerable,gl=(e,t,n)=>t in e?L0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S0=(e,t)=>{for(var n in t||(t={}))ml.call(t,n)&&gl(e,n,t[n]);if(vn)for(var n of vn(t))fl.call(t,n)&&gl(e,n,t[n]);return e},x0=(e,t)=>{var n={};for(var o in e)ml.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&vn)for(var o of vn(e))t.indexOf(o)<0&&fl.call(e,o)&&(n[o]=e[o]);return n};const F0=(0,x.default)(U.Flex)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,yl=e=>{var t=e,{children:n}=t,o=x0(t,["children"]);return r.createElement(F0,S0({justifyContent:"center",alignItems:"center",as:"span"},o),r.createElement(B.Typography,{variant:"sigma",textColor:"neutral600"},n))};yl.propTypes={children:a().string.isRequired};const hl=yl,Jr=({url:e,mime:t,alternativeText:n,name:o,ext:s,formats:l})=>{var i;const c=(0,g.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const f=((i=l==null?void 0:l.thumbnail)==null?void 0:i.url)||null,y=(0,g.prefixFileUrlWithBackendUrl)(f)||c;return r.createElement(pl.Avatar,{src:y,alt:n||o,preview:!0})}const u=(0,g.getFileExtension)(s),d=o.length>100?`${o.substring(0,100)}...`:o;return r.createElement(Dt.Tooltip,{description:d},r.createElement(hl,null,u))};Jr.defaultProps={alternativeText:null,formats:null},Jr.propTypes={alternativeText:a().string,ext:a().string.isRequired,formats:a().object,mime:a().string.isRequired,name:a().string.isRequired,url:a().string.isRequired};const bl=Jr;var A0=Object.defineProperty,vl=Object.getOwnPropertySymbols,k0=Object.prototype.hasOwnProperty,j0=Object.prototype.propertyIsEnumerable,El=(e,t,n)=>t in e?A0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$0=(e,t)=>{for(var n in t||(t={}))k0.call(t,n)&&El(e,n,t[n]);if(vl)for(var n of vl(t))j0.call(t,n)&&El(e,n,t[n]);return e};const Cl=({value:e})=>r.createElement(pl.AvatarGroup,null,e.map((t,n)=>{const o=`${t.id}${n}`;if(n===3){const s=`+${e.length-3}`;return r.createElement(hl,{key:o,preview:!1},s)}return n>3?null:r.createElement(bl,$0({key:o},t))}));Cl.propTypes={value:a().arrayOf(a().shape({alternativeText:a().string,ext:a().string.isRequired,formats:a().object,mime:a().string.isRequired,name:a().string.isRequired,url:a().string.isRequired})).isRequired};const B0=Cl;var Ol=p(89557),N0=p(51064),V0=p.n(N0);const Pl=({type:e,value:t})=>{const{formatDate:n,formatTime:o,formatNumber:s}=(0,W.useIntl)();let l=t;if(e==="date"&&(l=n(V0()(t),{dateStyle:"full"})),e==="datetime"&&(l=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[i,c,u]=t.split(":"),d=new Date;d.setHours(i),d.setMinutes(c),d.setSeconds(u),l=o(d,{numeric:"auto",style:"short"})}return["float","decimal"].includes(e)&&(l=s(t,{maximumFractionDigits:20})),["integer","biginteger"].includes(e)&&(l=s(t,{maximumFractionDigits:0})),Ls()(l)};Pl.propTypes={type:a().string.isRequired,value:a().any.isRequired};const Et=Pl;var q0=Object.defineProperty,Rl=Object.getOwnPropertySymbols,z0=Object.prototype.hasOwnProperty,W0=Object.prototype.propertyIsEnumerable,Tl=(e,t,n)=>t in e?q0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U0=(e,t)=>{for(var n in t||(t={}))z0.call(t,n)&&Tl(e,n,t[n]);if(Rl)for(var n of Rl(t))W0.call(t,n)&&Tl(e,n,t[n]);return e},_0=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const H0=(0,x.default)(B.Typography)`
  max-width: 500px;
`,Z0=(e,t)=>_0(void 0,null,function*(){const{data:{results:n,pagination:o}}=yield fe.be.get(e);return t(),{results:n,pagination:o}}),Ml=({fieldSchema:e,metadatas:t,name:n,entityId:o,value:s,contentType:l})=>{const{formatMessage:i}=(0,W.useIntl)(),{notifyStatus:c}=(0,Kr.useNotifyAT)(),u=(0,r.useMemo)(()=>ye(`relations/${l.uid}/${o}/${n.split(".")[0]}`),[o,n,l]),[d,f]=(0,r.useState)(!1),y=r.createElement(r.Fragment,null,r.createElement(Ol.Badge,null,s.count)," ",i({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:s.count})),m=()=>{const E=i({id:O("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"});c(E)},{data:h,status:b}=(0,it.useQuery)([e.targetModel,o],()=>Z0(u,m),{enabled:d,staleTime:0});return r.createElement(I.Box,U0({},g.stopPropagation),r.createElement(Ue.SimpleMenu,{label:y,size:"S",onOpen:()=>f(!0),onClose:()=>f(!1)},b!=="success"&&r.createElement(Ue.MenuItem,{"aria-disabled":!0},r.createElement(ma.Loader,{small:!0},i({id:O("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}))),b==="success"&&r.createElement(r.Fragment,null,h==null?void 0:h.results.map(E=>r.createElement(Ue.MenuItem,{key:E.id,"aria-disabled":!0},r.createElement(H0,{ellipsis:!0},r.createElement(Et,{type:t.mainField.schema.type,value:E[t.mainField.name]||E.id})))),(h==null?void 0:h.pagination.total)>10&&r.createElement(Ue.MenuItem,{"aria-disabled":!0,"aria-label":i({id:O("DynamicTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"})},r.createElement(B.Typography,null,"\u2026")))))};Ml.propTypes={contentType:a().shape({uid:a().string.isRequired}).isRequired,fieldSchema:a().shape({relation:a().string,targetModel:a().string,type:a().string.isRequired}).isRequired,metadatas:a().shape({mainField:a().shape({name:a().string.isRequired,schema:a().shape({type:a().string.isRequired}).isRequired})}).isRequired,name:a().string.isRequired,entityId:a().oneOfType([a().string,a().number]).isRequired,value:a().object.isRequired};const G0=Ml,Q0=(0,x.default)(B.Typography)`
  max-width: 500px;
`,wl=({metadatas:e,value:t})=>{var n;return r.createElement(Q0,{textColor:"neutral800",ellipsis:!0},r.createElement(Et,{type:e.mainField.schema.type,value:(n=t[e.mainField.name])!=null?n:t.id}))};wl.propTypes={metadatas:a().shape({mainField:a().shape({name:a().string.isRequired,schema:a().shape({type:a().string.isRequired}).isRequired})}).isRequired,value:a().object.isRequired};const Y0=wl;var K0=Object.defineProperty,Il=Object.getOwnPropertySymbols,J0=Object.prototype.hasOwnProperty,X0=Object.prototype.propertyIsEnumerable,Dl=(e,t,n)=>t in e?K0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eE=(e,t)=>{for(var n in t||(t={}))J0.call(t,n)&&Dl(e,n,t[n]);if(Il)for(var n of Il(t))X0.call(t,n)&&Dl(e,n,t[n]);return e};const tE=(0,x.default)(B.Typography)`
  max-width: 500px;
`,Ll=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,W.useIntl)(),{mainField:{type:o,name:s}}=t,l=r.createElement(r.Fragment,null,r.createElement(Ol.Badge,null,e.length)," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length}));return r.createElement(I.Box,eE({},g.stopPropagation),r.createElement(Ue.SimpleMenu,{label:l,size:"S"},e.map(i=>r.createElement(Ue.MenuItem,{key:i.id,"aria-disabled":!0},r.createElement(tE,{ellipsis:!0},r.createElement(Et,{type:o,value:i[s]||i.id}))))))};Ll.propTypes={metadatas:a().shape({mainField:a().shape({name:a().string,type:a().string,value:a().string})}).isRequired,value:a().array.isRequired};const nE=Ll,rE=(0,x.default)(B.Typography)`
  max-width: 250px;
`,Sl=({value:e,metadatas:t})=>{const{mainField:n}=t,o=e[n.name];return r.createElement(Dt.Tooltip,{label:o},r.createElement(rE,{textColor:"neutral800",ellipsis:!0},r.createElement(Et,{type:n.type,value:o})))};Sl.propTypes={metadatas:a().shape({mainField:a().shape({name:a().string,type:a().string,value:a().string})}).isRequired,value:a().object.isRequired};const oE=Sl;var aE=p(80022),xl=p.n(aE);function Fl(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function sE(e,t,n,o){if(e==="component"){const{mainField:{name:s,type:l}}=n;if(o!=null&&o.repeatable)return t.length>0;const i=t==null?void 0:t[s];return s==="id"&&![void 0,null].includes(i)?!0:xt(l)&&l!=="biginteger"&&s!=="id"?xl()(i):!Ae()(i)}return e==="relation"?Fl(o.relation)?!Ae()(t):(t==null?void 0:t.count)>0:xt(e)&&e!=="biginteger"?xl()(t):e==="boolean"?t!==null:!Ae()(t)}var iE=Object.defineProperty,Al=Object.getOwnPropertySymbols,lE=Object.prototype.hasOwnProperty,cE=Object.prototype.propertyIsEnumerable,kl=(e,t,n)=>t in e?iE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uE=(e,t)=>{for(var n in t||(t={}))lE.call(t,n)&&kl(e,n,t[n]);if(Al)for(var n of Al(t))cE.call(t,n)&&kl(e,n,t[n]);return e};const jl=(0,x.default)(B.Typography)`
  max-width: 300px;
`,Xr=({content:e,fieldSchema:t,metadatas:n,name:o,rowId:s,contentType:l})=>{const{type:i}=t;if(!sE(i,e,n,t))return r.createElement(B.Typography,{textColor:"neutral800"},"-");switch(i){case"media":return t.multiple?r.createElement(B0,{value:e}):r.createElement(bl,uE({},e));case"relation":return Fl(t.relation)?r.createElement(Y0,{metadatas:n,value:e}):r.createElement(G0,{fieldSchema:t,metadatas:n,value:e,name:o,entityId:s,contentType:l});case"component":return t.repeatable===!0?r.createElement(nE,{value:e,metadatas:n}):r.createElement(oE,{value:e,metadatas:n});case"string":return r.createElement(Dt.Tooltip,{description:e},r.createElement(jl,{ellipsis:!0,textColor:"neutral800"},r.createElement(Et,{type:i,value:e})));default:return r.createElement(jl,{ellipsis:!0,textColor:"neutral800"},r.createElement(Et,{type:i,value:e}))}};Xr.defaultProps={content:void 0},Xr.propTypes={content:a().any,contentType:a().shape({uid:a().string.isRequired}).isRequired,fieldSchema:a().shape({component:a().string,multiple:a().bool,type:a().string.isRequired,repeatable:a().bool,relation:a().string}).isRequired,metadatas:a().object.isRequired,name:a().string.isRequired,rowId:a().oneOfType([a().string,a().number]).isRequired};const dE=Xr;var pE=Object.defineProperty,mE=Object.defineProperties,fE=Object.getOwnPropertyDescriptors,En=Object.getOwnPropertySymbols,$l=Object.prototype.hasOwnProperty,Bl=Object.prototype.propertyIsEnumerable,Nl=(e,t,n)=>t in e?pE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bt=(e,t)=>{for(var n in t||(t={}))$l.call(t,n)&&Nl(e,n,t[n]);if(En)for(var n of En(t))Bl.call(t,n)&&Nl(e,n,t[n]);return e},gE=(e,t)=>mE(e,fE(t)),yE=(e,t)=>{var n={};for(var o in e)$l.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&En)for(var o of En(e))t.indexOf(o)<0&&Bl.call(e,o)&&(n[o]=e[o]);return n};const eo=({canCreate:e,canDelete:t,contentType:n,headers:o,entriesToDelete:s,onClickDelete:l,onSelectRow:i,withMainAction:c,withBulkActions:u,rows:d})=>{const{push:f,location:{pathname:y}}=(0,ee.useHistory)(),{formatMessage:m}=(0,W.useIntl)(),{trackUsage:h}=(0,g.useTracking)(),b=ea();return r.createElement($t.Tbody,null,d.map((E,S)=>{const P=s.findIndex(F=>F===E.id)!==-1,C=m({id:"content-manager.components.DynamicTable.row-line",defaultMessage:"item line {number}"},{number:S});return r.createElement($t.Tr,Bt({key:E.id},(0,g.onRowClick)({fn(){h("willEditEntryFromList"),f({pathname:`${y}/${E.id}`,state:{from:y},search:b})},condition:u})),c&&r.createElement($t.Td,Bt({},g.stopPropagation),r.createElement(w0.BaseCheckbox,{"aria-label":m({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,Mi.Pp)(E.firstname,E.lastname)}),checked:P,onChange:()=>{i({name:E.id,value:!P})}})),o.map(F=>{var v=F,{key:R,cellFormatter:L,name:T}=v,Q=yE(v,["key","cellFormatter","name"]);return r.createElement($t.Td,{key:R},typeof L=="function"?L(E,Bt({key:R,name:T},Q)):r.createElement(dE,gE(Bt({content:E[T.split(".")[0]],name:T,contentType:n},Q),{rowId:E.id})))}),u&&r.createElement($t.Td,null,r.createElement(U.Flex,Bt({justifyContent:"end"},g.stopPropagation),r.createElement(Te.IconButton,{forwardedAs:ee.Link,onClick:()=>{h("willEditEntryFromButton")},to:{pathname:`${y}/${E.id}`,state:{from:y},search:b},label:m({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:C}),noBorder:!0,icon:r.createElement(ft(),null)}),e&&r.createElement(I.Box,{paddingLeft:1},r.createElement(Te.IconButton,{forwardedAs:ee.Link,to:{pathname:`${y}/create/clone/${E.id}`,state:{from:y},search:b},label:m({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:C}),noBorder:!0,icon:r.createElement(D0(),null)})),t&&r.createElement(I.Box,{paddingLeft:1},r.createElement(Te.IconButton,{onClick:()=>{h("willDeleteEntryFromList"),l(E.id)},label:m({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:C}),noBorder:!0,icon:r.createElement(We(),null)})))))}))};eo.defaultProps={canCreate:!1,canDelete:!1,entriesToDelete:[],onClickDelete(){},onSelectRow(){},rows:[],withBulkActions:!1,withMainAction:!1},eo.propTypes={canCreate:a().bool,canDelete:a().bool,contentType:a().shape({uid:a().string.isRequired}).isRequired,entriesToDelete:a().array,headers:a().array.isRequired,onClickDelete:a().func,onSelectRow:a().func,rows:a().array,withBulkActions:a().bool,withMainAction:a().bool};const hE=eo;var bE=Object.defineProperty,Cn=Object.getOwnPropertySymbols,Vl=Object.prototype.hasOwnProperty,ql=Object.prototype.propertyIsEnumerable,zl=(e,t,n)=>t in e?bE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vE=(e,t)=>{for(var n in t||(t={}))Vl.call(t,n)&&zl(e,n,t[n]);if(Cn)for(var n of Cn(t))ql.call(t,n)&&zl(e,n,t[n]);return e},EE=(e,t)=>{var n={};for(var o in e)Vl.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Cn)for(var o of Cn(e))t.indexOf(o)<0&&ql.call(e,o)&&(n[o]=e[o]);return n};const Wl=e=>{var t=e,{area:n}=t,o=EE(t,["area"]);const s=oa(n);return s?r.createElement("ul",null,s.map(l=>l.Component(o)?r.createElement(I.Box,{key:l.name,padding:3,style:{textAlign:"center"}},r.createElement(l.Component,vE({},o))):null)):null};Wl.propTypes={area:a().string.isRequired};const Ul=Wl,_l=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:o})=>{const{formatMessage:s}=(0,W.useIntl)();return r.createElement(Be.Dialog,{onClose:n,title:s({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(Be.DialogBody,{icon:r.createElement(It(),null)},r.createElement(ue.Stack,{spacing:2},r.createElement(U.Flex,{justifyContent:"center"},r.createElement(B.Typography,{id:"confirm-description"},s({id:O("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"}))),r.createElement(U.Flex,null,r.createElement(Ul,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(Be.DialogFooter,{startAction:r.createElement(ve.Button,{onClick:n,variant:"tertiary"},s({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ve.Button,{onClick:o,variant:"danger-light",startIcon:r.createElement(We(),null),id:"confirm-delete",loading:e},s({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};_l.propTypes={isConfirmButtonLoading:a().bool.isRequired,isOpen:a().bool.isRequired,onConfirm:a().func.isRequired,onToggleDialog:a().func.isRequired};const CE=_l,Hl=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:o})=>{const{formatMessage:s}=(0,W.useIntl)();return r.createElement(Be.Dialog,{onClose:n,title:s({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(Be.DialogBody,{icon:r.createElement(It(),null)},r.createElement(ue.Stack,{spacing:2},r.createElement(U.Flex,{justifyContent:"center"},r.createElement(B.Typography,{id:"confirm-description"},s({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"}))),r.createElement(U.Flex,null,r.createElement(Ul,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(Be.DialogFooter,{startAction:r.createElement(ve.Button,{onClick:n,variant:"tertiary"},s({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ve.Button,{onClick:o,variant:"danger-light",startIcon:r.createElement(We(),null),id:"confirm-delete",loading:e},s({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};Hl.propTypes={isConfirmButtonLoading:a().bool.isRequired,isOpen:a().bool.isRequired,onConfirm:a().func.isRequired,onToggleDialog:a().func.isRequired};const OE=Hl;var PE=Object.defineProperty,RE=Object.defineProperties,TE=Object.getOwnPropertyDescriptors,Zl=Object.getOwnPropertySymbols,ME=Object.prototype.hasOwnProperty,wE=Object.prototype.propertyIsEnumerable,Gl=(e,t,n)=>t in e?PE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,On=(e,t)=>{for(var n in t||(t={}))ME.call(t,n)&&Gl(e,n,t[n]);if(Zl)for(var n of Zl(t))wE.call(t,n)&&Gl(e,n,t[n]);return e},Pn=(e,t)=>RE(e,TE(t));const IE=(0,x.default)(Ua.Status)`
  width: min-content;
`,to=({canCreate:e,canDelete:t,contentTypeName:n,action:o,isBulkable:s,isLoading:l,onConfirmDelete:i,onConfirmDeleteAll:c,layout:u,rows:d})=>{const{runHookWaterfall:f}=(0,g.useStrapiApp)(),y=u.contentType.options.draftAndPublish||!1,{formatMessage:m}=(0,W.useIntl)(),h=(0,he.useSelector)(dl),b=(0,r.useMemo)(()=>{const S=f(Qt.No,{displayedHeaders:h,layout:u}).displayedHeaders.map(P=>{const{metadatas:C}=P;if(P.fieldSchema.type==="relation"){const F=`${P.name}.${P.metadatas.mainField.name}`;return Pn(On({},P),{metadatas:Pn(On({},C),{label:m({id:O(`containers.ListPage.table-headers.${P.name}`),defaultMessage:C.label})}),name:F})}return Pn(On({},P),{metadatas:Pn(On({},C),{label:m({id:O(`containers.ListPage.table-headers.${P.name}`),defaultMessage:C.label})})})});return y?[...S,{key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:m({id:O("containers.ListPage.table-headers.publishedAt"),defaultMessage:"publishedAt"}),searchable:!1,sortable:!0},cellFormatter(P){const C=P.publishedAt,F=C?"success":"secondary";return r.createElement(IE,{showBullet:!1,variant:F,size:"S"},r.createElement(B.Typography,{fontWeight:"bold",textColor:`${F}700`},m({id:O(`containers.List.${C?"published":"draft"}`),defaultMessage:C?"Published":"Draft"})))}}]:S},[f,h,u,y,m]);return r.createElement(g.DynamicTable,{components:{ConfirmDialogDelete:OE,ConfirmDialogDeleteAll:CE},contentType:n,action:o,isLoading:l,headers:b,onConfirmDelete:i,onConfirmDeleteAll:c,onOpenDeleteAllModalTrackedEvent:"willBulkDeleteEntries",rows:d,withBulkActions:!0,withMainAction:t&&s},r.createElement(hE,{canCreate:e,canDelete:t,contentType:u.contentType,headers:b,rows:d,withBulkActions:!0,withMainAction:t&&s}))};to.defaultProps={action:void 0},to.propTypes={canCreate:a().bool.isRequired,canDelete:a().bool.isRequired,contentTypeName:a().string.isRequired,action:a().node,isBulkable:a().bool.isRequired,isLoading:a().bool.isRequired,layout:a().exact({components:a().object.isRequired,contentType:a().shape({attributes:a().object.isRequired,metadatas:a().object.isRequired,layouts:a().shape({list:a().array.isRequired}).isRequired,options:a().object.isRequired,settings:a().object.isRequired}).isRequired}).isRequired,onConfirmDelete:a().func.isRequired,onConfirmDeleteAll:a().func.isRequired,rows:a().array.isRequired};const DE=to,LE=["json","component","media","richtext","dynamiczone","password"],SE=["createdAt","updatedAt"],xE=(e,t)=>{const{allPermissions:n}=(0,g.useRBACProvider)(),o=(0,g.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),s=M()(o,["0","properties","fields"],[]);return Object.keys(M()(e,["attributes"]),{}).filter(c=>{const u=M()(e,["attributes",c],{});return!(!u.type||LE.includes(u.type)||!s.includes(c)&&c!=="id"&&!SE.includes(c))}).sort()};var FE=p(23899),AE=p.n(FE);const Ql=({displayedFilters:e})=>{const[t,n]=(0,r.useState)(!1),{formatMessage:o}=(0,W.useIntl)(),s=(0,r.useRef)(),{trackUsage:l}=(0,g.useTracking)(),i=()=>{t||l("willFilterEntries"),n(c=>!c)};return r.createElement(r.Fragment,null,r.createElement(I.Box,{paddingTop:1,paddingBottom:1},r.createElement(ve.Button,{variant:"tertiary",ref:s,startIcon:r.createElement(AE(),null),onClick:i,size:"S"},o({id:"app.utils.filters",defaultMessage:"Filters"})),t&&r.createElement(g.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:i,source:s})),r.createElement(g.FilterListURLQuery,{filtersSchema:e}))};Ql.propTypes={displayedFilters:a().arrayOf(a().shape({name:a().string.isRequired,metadatas:a().shape({label:a().string}),fieldSchema:a().shape({type:a().string})})).isRequired};const kE=Ql,Yl=({contentType:e,slug:t,metadatas:n})=>{const{formatMessage:o}=(0,W.useIntl)(),l=xE(e,t).map(i=>{const c=e.attributes[i],{type:u,enum:d}=c,f={name:"didFilterEntries",properties:{useRelation:u==="relation"}},{mainField:y,label:m}=n[i].list;return{name:i,metadatas:{label:o({id:m,defaultMessage:m})},fieldSchema:{type:u,options:d,mainField:y},trackedEvent:f}});return r.createElement(kE,{displayedFilters:l})};Yl.propTypes={contentType:a().object.isRequired,metadatas:a().object.isRequired,slug:a().string.isRequired};const jE=Yl,$E=e=>Object.keys(e).reduce((n,o)=>{const s=e[o];return Oo(s)&&n.push(o),n},[]).sort(),Kl=({layout:e})=>{const t=(0,he.useDispatch)(),n=(0,he.useSelector)(dl),{trackUsage:o}=(0,g.useTracking)(),{formatMessage:s}=(0,W.useIntl)(),l=$E(e.contentType.attributes).map(u=>{const d=e.contentType.metadatas[u].list;return{name:u,intlLabel:{id:d.label,defaultMessage:d.label}}}),i=n.map(({name:u})=>u),c=u=>{if(o("didChangeDisplayedFields"),u.length<i.length){const d=i.filter(f=>u.indexOf(f)===-1);t(Yr({name:d[0],value:!0}))}else{const d=u.filter(f=>i.indexOf(f)===-1);t(Yr({name:d[0],value:!1}))}};return r.createElement(I.Box,{paddingTop:1,paddingBottom:1},r.createElement(pe.Select,{"aria-label":"change displayed fields",value:i,onChange:c,customizeContent:u=>s({id:O("select.currently.selected"),defaultMessage:"{count} currently selected"},{count:u.length}),multi:!0,size:"S"},l.map(u=>r.createElement(pe.Option,{key:u.name,value:u.name},s({id:u.intlLabel.id||u.name,defaultMessage:u.intlLabel.defaultMessage||u.name})))))};Kl.propTypes={layout:a().shape({contentType:a().shape({attributes:a().object.isRequired,metadatas:a().object.isRequired,layouts:a().shape({list:a().array.isRequired}).isRequired,options:a().object.isRequired,settings:a().object.isRequired}).isRequired}).isRequired};const BE=(0,r.memo)(Kl),no=({pagination:e})=>r.createElement(I.Box,{paddingTop:4},r.createElement(U.Flex,{alignItems:"flex-end",justifyContent:"space-between"},r.createElement(g.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),r.createElement(g.PaginationURLQuery,{pagination:e})));no.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},no.propTypes={pagination:a().shape({page:a().number,pageCount:a().number,pageSize:a().number,total:a().number})};const NE=no;var VE=p(98399),qE=Object.defineProperty,zE=Object.defineProperties,WE=Object.getOwnPropertyDescriptors,Jl=Object.getOwnPropertySymbols,UE=Object.prototype.hasOwnProperty,_E=Object.prototype.propertyIsEnumerable,Xl=(e,t,n)=>t in e?qE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HE=(e,t)=>{for(var n in t||(t={}))UE.call(t,n)&&Xl(e,n,t[n]);if(Jl)for(var n of Jl(t))_E.call(t,n)&&Xl(e,n,t[n]);return e},ZE=(e,t)=>zE(e,WE(t)),ro=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const GE=Se.Z.contentManager,QE=(0,x.default)(I.Box)`
  svg {
    path {
      fill: ${({theme:e})=>e.colors.neutral900};
    }
  }
`;function ec({canCreate:e,canDelete:t,canRead:n,data:o,getData:s,getDataSucceeded:l,isLoading:i,layout:c,pagination:u,slug:d}){const{total:f}=u,{contentType:{metadatas:y,settings:{bulkable:m,filterable:h,searchable:b}}}=c,E=(0,g.useNotification)(),{trackUsage:S}=(0,g.useTracking)(),{refetchPermissions:P}=(0,g.useRBACProvider)(),C=(0,r.useRef)(S),F=(0,r.useRef)(P),{notifyStatus:v}=(0,Kr.useNotifyAT)();(0,g.useFocusWhenNavigate)();const[{query:R}]=(0,g.useQueryParams)(),L=fi(R),T=(0,He.stringify)({plugins:R.plugins},{encode:!1}),{pathname:Q}=(0,ee.useLocation)(),{push:H}=(0,ee.useHistory)(),{formatMessage:j}=(0,W.useIntl)(),Z=c.contentType,Y=M()(Z,"options.draftAndPublish",!1),A=(0,r.useRef)(""),w=(0,r.useCallback)((D,V)=>ro(this,null,function*(){s();try{const _=V?{cancelToken:V.token}:null,{data:{results:ne,pagination:re}}=yield fe.be.get(D,_);v(j({id:O("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:re.count})),l(re,ne)}catch(_){if($e().isCancel(_))return;if(M()(_,"response.status",null)===403){yield F.current(),E({type:"info",message:{id:O("permissions.not-allowed.update")}}),H("/");return}VE.error(_),E({type:"warning",message:{id:O("error.model.fetch")}})}}),[j,s,l,v,H,E]),K=(0,r.useCallback)(D=>ro(this,null,function*(){try{yield fe.be.post(ye(`collection-types/${d}/actions/bulkDelete`),{ids:D});const V=ye(`collection-types/${d}${L}`);w(V),C.current("didBulkDeleteEntries")}catch(V){E({type:"warning",message:{id:O("error.record.delete")}})}}),[w,L,d,E]),N=(0,r.useCallback)(D=>ro(this,null,function*(){try{yield fe.be.delete(ye(`collection-types/${d}/${D}`));const V=ye(`collection-types/${d}${L}`);w(V),E({type:"success",message:{id:O("success.record.delete")}})}catch(V){const _=M()(V,"response.payload.message",j({id:O("error.record.delete")}));E({type:"warning",message:_})}}),[d,L,w,E,j]);(0,r.useEffect)(()=>{const V=$e().CancelToken.source(),_=n,ne=ye(`collection-types/${d}${L}`);return _&&ne.includes(A.current)&&w(ne,V),()=>{A.current=d,V.cancel("Operation canceled by the user.")}},[n,s,d,L,l,w]);const G=j({id:O("header.name"),defaultMessage:"Content"}),z=j({id:Z.info.displayName,defaultMessage:Z.info.displayName||G}),$=n?j({id:O("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:f}):null,k=D=>e?r.createElement(ve.Button,ZE(HE({},D),{forwardedAs:ee.Link,onClick:()=>{const V=Y?{status:"draft"}:{};C.current("willCreateEntry",V)},to:{pathname:`${Q}/create`,search:R.plugins?T:""},startIcon:r.createElement(St(),null),style:{textDecoration:"none"}}),j({id:O("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})):null;return r.createElement(ie.Main,{"aria-busy":i},r.createElement(X.HeaderLayout,{primaryAction:k(),subtitle:$,title:z,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(fn(),null),to:"/content-manager/"},j({id:"global.back",defaultMessage:"Back"}))}),!n&&r.createElement(X.ActionLayout,{endActions:r.createElement(Kt,{area:"contentManager.listView.actions"})}),n&&r.createElement(X.ActionLayout,{endActions:r.createElement(r.Fragment,null,r.createElement(Kt,{area:"contentManager.listView.actions"}),r.createElement(BE,{layout:c}),r.createElement(g.CheckPermissions,{permissions:GE.collectionTypesConfigurations},r.createElement(QE,{paddingTop:1,paddingBottom:1},r.createElement(Te.IconButton,{onClick:()=>{S("willEditListLayout")},forwardedAs:ee.Link,to:{pathname:`${d}/configurations/list`,search:T},icon:r.createElement(Gi(),null),label:j({id:"app.links.configure-view",defaultMessage:"Configure the view"})})))),startActions:r.createElement(r.Fragment,null,b&&r.createElement(g.SearchURLQuery,{label:j({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:z}),placeholder:j({id:"global.search",defaultMessage:"Search"}),trackedEvent:"didSearch"}),h&&r.createElement(jE,{contentType:Z,slug:d,metadatas:y}))}),r.createElement(X.ContentLayout,null,n?r.createElement(r.Fragment,null,r.createElement(DE,{canCreate:e,canDelete:t,contentTypeName:z,onConfirmDeleteAll:K,onConfirmDelete:N,isBulkable:m,isLoading:i,layout:c,rows:o,action:k({variant:"secondary"})}),r.createElement(NE,{pagination:{pageCount:(u==null?void 0:u.pageCount)||1}})):r.createElement(g.NoPermissions,null)))}ec.propTypes={canCreate:a().bool.isRequired,canDelete:a().bool.isRequired,canRead:a().bool.isRequired,data:a().array.isRequired,layout:a().exact({components:a().object.isRequired,contentType:a().shape({attributes:a().object.isRequired,metadatas:a().object.isRequired,info:a().shape({displayName:a().string.isRequired}).isRequired,layouts:a().shape({list:a().array.isRequired}).isRequired,options:a().object.isRequired,settings:a().object.isRequired}).isRequired}).isRequired,isLoading:a().bool.isRequired,getData:a().func.isRequired,getDataSucceeded:a().func.isRequired,pagination:a().shape({total:a().number.isRequired,pageCount:a().number}).isRequired,slug:a().string.isRequired};const YE=M0();function KE(e){return(0,ul.bindActionCreators)({getData:b0,getDataSucceeded:v0,onChangeListHeaders:Yr,onResetListHeaders:E0},e)}const JE=(0,he.connect)(YE,KE),XE=(0,ul.compose)(JE)((0,r.memo)(ec,Ze()));var eC=Object.defineProperty,tc=Object.getOwnPropertySymbols,tC=Object.prototype.hasOwnProperty,nC=Object.prototype.propertyIsEnumerable,nc=(e,t,n)=>t in e?eC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rc=(e,t)=>{for(var n in t||(t={}))tC.call(t,n)&&nc(e,n,t[n]);if(tc)for(var n of tc(t))nC.call(t,n)&&nc(e,n,t[n]);return e};const oo=e=>{const t=(0,r.useMemo)(()=>Do(e.slug),[e.slug]),{isLoading:n,allowedActions:o}=(0,g.useRBAC)(t,e.permissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(XE,rc(rc({},e),o))};oo.defaultProps={permissions:[]},oo.propTypes={permissions:a().array,slug:a().string.isRequired};const rC=(0,r.memo)(oo,(e,t)=>{const n=(0,g.difference)(e,t);return Object.keys(n).filter(s=>s!=="state").length>0});var oC=Object.defineProperty,aC=Object.defineProperties,sC=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,oc=Object.prototype.hasOwnProperty,ac=Object.prototype.propertyIsEnumerable,sc=(e,t,n)=>t in e?oC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iC=(e,t)=>{for(var n in t||(t={}))oc.call(t,n)&&sc(e,n,t[n]);if(Rn)for(var n of Rn(t))ac.call(t,n)&&sc(e,n,t[n]);return e},lC=(e,t)=>aC(e,sC(t)),cC=(e,t)=>{var n={};for(var o in e)oc.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Rn)for(var o of Rn(e))t.indexOf(o)<0&&ac.call(e,o)&&(n[o]=e[o]);return n};const ic=e=>{var t=e,{layout:n}=t,o=cC(t,["layout"]);const s=(0,he.useDispatch)(),{replace:l}=(0,ee.useHistory)(),[{query:i,rawQuery:c}]=(0,g.useQueryParams)(),u=na(i,o.slug,"listView"),d=Xo(o.slug);return(0,r.useEffect)(()=>{c||l(d)},[c,l,d]),(0,r.useEffect)(()=>{s(O0(n))},[s,n]),(0,r.useEffect)(()=>()=>{s(C0())},[s]),u?r.createElement(rC,lC(iC({},o),{layout:n,permissions:u})):null};ic.propTypes={layout:a().exact({components:a().object.isRequired,contentType:a().shape({attributes:a().object.isRequired,metadatas:a().object.isRequired,layouts:a().shape({list:a().array.isRequired}).isRequired,options:a().object.isRequired,settings:a().object.isRequired,pluginOptions:a().object}).isRequired}).isRequired,slug:a().string.isRequired};const uC=ic,dC=(e,t)=>fe.be.put(ye(`content-types/${t}/configuration`),e),pC=(0,x.default)(U.Flex)`
  gap: ${({theme:e})=>e.spaces[4]};
`,ao=({modifiedData:e,onChange:t,sortOptions:n})=>{const{formatMessage:o}=(0,W.useIntl)(),{settings:s,metadatas:l}=e;return r.createElement(r.Fragment,null,r.createElement(I.Box,{paddingBottom:4},r.createElement(B.Typography,{variant:"delta",as:"h2"},o({id:O("containers.SettingPage.settings"),defaultMessage:"Settings"}))),r.createElement(pC,{justifyContent:"space-between",wrap:"wrap",paddingBottom:6},r.createElement(jt.ToggleInput,{label:o({id:O("form.Input.search"),defaultMessage:"Enable search"}),onChange:i=>{t({target:{name:"settings.searchable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:s.searchable}),r.createElement(jt.ToggleInput,{label:o({id:O("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:i=>{t({target:{name:"settings.filterable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:s.filterable}),r.createElement(jt.ToggleInput,{label:o({id:O("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:i=>{t({target:{name:"settings.bulkable",value:i.target.checked}})},onLabel:o({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:o({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:s.bulkable})),r.createElement(de.Grid,{gap:4},r.createElement(de.GridItem,{s:12,col:6},r.createElement(pe.Select,{label:o({id:O("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:o({id:O("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:i=>t({target:{name:"settings.pageSize",value:i}}),name:"settings.pageSize",value:e.settings.pageSize||""},[10,20,50,100].map(i=>r.createElement(pe.Option,{key:i,value:i},i)))),r.createElement(de.GridItem,{s:12,col:3},r.createElement(pe.Select,{label:o({id:O("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:i=>t({target:{name:"settings.defaultSortBy",value:i}}),name:"settings.defaultSortBy",value:e.settings.defaultSortBy||""},n.map(i=>r.createElement(pe.Option,{key:i,value:i},l[i].list.label||i)))),r.createElement(de.GridItem,{s:12,col:3},r.createElement(pe.Select,{label:o({id:O("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:i=>t({target:{name:"settings.defaultSortOrder",value:i}}),name:"settings.defaultSortOrder",value:e.settings.defaultSortOrder||""},["ASC","DESC"].map(i=>r.createElement(pe.Option,{key:i,value:i},i))))))};ao.defaultProps={modifiedData:{},sortOptions:[]},ao.propTypes={modifiedData:a().object,onChange:a().func.isRequired,sortOptions:a().array};const mC=ao,so=x.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,lc=(0,x.default)(so)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,fC=(0,x.default)(U.Flex)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${B.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${lc} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,gC=(0,x.default)(I.Box)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,cc=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:o,onMoveField:s,onRemoveField:l,name:i,setIsDraggingSibling:c})=>{const{formatMessage:u}=(0,W.useIntl)(),d=(0,r.useRef)(null),f=(0,r.useRef)(null),[,y]=(0,r.useState)(!1),m=(0,r.useRef)(),h=go(n),b=()=>{m.current&&m.current.click()},[,E]=(0,Fe.useDrop)({accept:Re.FIELD,hover(v,R){if(!f.current)return;const L=v.index,T=e;if(L===T)return;const Q=f.current.getBoundingClientRect(),H=(Q.right-Q.left)/2,Z=R.getClientOffset().x-Q.left;L>T&&Z>H||L<T&&Z<H||(s(L,T),v.index=T)}}),[{isDragging:S},P,C]=(0,Fe.useDrag)({type:Re.FIELD,item(){return{index:e,labelField:n,name:i}},collect:v=>({isDragging:v.isDragging()}),end(){c(!1)}});(0,r.useEffect)(()=>{C((0,hr.rX)(),{captureDraggingState:!1})},[C]),(0,r.useEffect)(()=>{S&&c(!0)},[S,c]),(0,r.useEffect)(()=>{t||y(v=>!v)},[t]);const F={dragRef:P(d),dropRef:E(f)};return r.createElement(gC,{ref:F?F.dropRef:null},S&&r.createElement(In,{transparent:!0,labelField:h}),!S&&t&&r.createElement(In,{isSibling:!0,labelField:h}),!S&&!t&&r.createElement(fC,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:b,isDragging:S},r.createElement(ue.Stack,{horizontal:!0,spacing:3},r.createElement(lc,{as:"span","aria-label":u({id:O("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:n}),onClick:v=>v.stopPropagation(),ref:F.dragRef,type:"button"},r.createElement(mt(),null)),r.createElement(B.Typography,{fontWeight:"bold"},h)),r.createElement(U.Flex,{paddingLeft:3},r.createElement(so,{ref:m,onClick:v=>{v.stopPropagation(),o(i)},"aria-label":u({id:O("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:n}),type:"button"},r.createElement(ft(),null)),r.createElement(so,{onClick:l,"data-testid":`delete-${i}`,"aria-label":u({id:O("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:n}),type:"button"},r.createElement(Tn(),null)))))};cc.propTypes={index:a().number.isRequired,isDraggingSibling:a().bool.isRequired,labelField:a().string.isRequired,name:a().string.isRequired,onClickEditField:a().func.isRequired,onMoveField:a().func.isRequired,onRemoveField:a().func.isRequired,setIsDraggingSibling:a().func.isRequired};const yC=cc,uc=(0,x.default)(I.Box)`
  flex: ${({size:e})=>e};
`,hC=(0,x.default)(uc)`
  overflow-x: scroll;
  overflow-y: hidden;
`,bC=(0,x.default)(uc)`
  max-width: ${32/16}rem;
`,dc=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:o,onClickEditField:s,onMoveField:l,onRemoveField:i})=>{const{formatMessage:c}=(0,W.useIntl)(),[u,d]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),m=(0,r.useRef)();function h(...E){y("add"),o(...E)}function b(...E){y("remove"),i(...E)}return(0,r.useEffect)(()=>{f==="add"&&(m==null?void 0:m.current)&&(m.current.scrollLeft=m.current.scrollWidth)},[e,f]),r.createElement(r.Fragment,null,r.createElement(I.Box,{paddingBottom:4},r.createElement(B.Typography,{variant:"delta",as:"h2"},c({id:O("containers.SettingPage.view"),defaultMessage:"View"}))),r.createElement(U.Flex,{paddingTop:4,paddingLeft:4,paddingRight:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0},r.createElement(hC,{size:"1",paddingBottom:4,ref:m},r.createElement(ue.Stack,{horizontal:!0,spacing:3},e.map((E,S)=>r.createElement(yC,{key:E,index:S,isDraggingSibling:u,onMoveField:l,onClickEditField:s,onRemoveField:P=>b(P,S),name:E,labelField:n[E].list.label||E,setIsDraggingSibling:d})))),r.createElement(bC,{size:"auto",paddingBottom:4},r.createElement(Ue.SimpleMenu,{label:c({id:O("components.FieldSelect.label"),defaultMessage:"Add a field"}),as:Te.IconButton,icon:r.createElement(St(),null),disabled:t.length<=0,"data-testid":"add-field"},t.map(E=>r.createElement(Ue.MenuItem,{key:E,onClick:()=>h(E)},n[E].list.label||E))))))};dc.propTypes={displayedFields:xe.PropTypes.array.isRequired,listRemainingFields:xe.PropTypes.array.isRequired,metadatas:xe.PropTypes.objectOf(xe.PropTypes.shape({list:xe.PropTypes.shape({label:xe.PropTypes.string})})).isRequired,onAddField:xe.PropTypes.func.isRequired,onClickEditField:xe.PropTypes.func.isRequired,onMoveField:xe.PropTypes.func.isRequired,onRemoveField:xe.PropTypes.func.isRequired};const vC=dc,EC=(0,x.default)(U.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,pc=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:o,onChangeEditLabel:s,onSubmit:l,type:i})=>{const{formatMessage:c}=(0,W.useIntl)(),u=e[n].relationType;let d=!["media","relation"].includes(i);return["oneWay","oneToOne","manyToOne"].includes(u)&&(d=!0),r.createElement(et.ModalLayout,{onClose:o,labelledBy:"title"},r.createElement("form",{onSubmit:l},r.createElement(et.ModalHeader,null,r.createElement(EC,null,r.createElement(ol,{type:i}),r.createElement(B.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},c({id:O("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:At()(n)})))),r.createElement(et.ModalBody,null,r.createElement(de.Grid,{gap:4},r.createElement(de.GridItem,{s:12,col:6},r.createElement(Jn.TextInput,{id:"label-input",label:c({id:O("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:f=>s(f),value:t.label,hint:c({id:O("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})),d&&r.createElement(de.GridItem,{s:12,col:6},r.createElement(jt.ToggleInput,{"data-testid":"Enable sort on this field",checked:t.sortable,label:c({id:O("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:f=>s({target:{name:"sortable",value:f.target.checked}}),onLabel:c({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:c({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})))),r.createElement(et.ModalFooter,{startActions:r.createElement(ve.Button,{onClick:o,variant:"tertiary"},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ve.Button,{type:"submit"},c({id:"global.finish",defaultMessage:"Finish"}))})))};pc.propTypes={attributes:a().objectOf(a().shape({relationType:a().string})).isRequired,fieldForm:a().shape({label:a().string,sortable:a().bool}).isRequired,fieldToEdit:a().string.isRequired,onChangeEditLabel:a().func.isRequired,onCloseModal:a().func.isRequired,onSubmit:a().func.isRequired,type:a().string.isRequired};const CC=pc;var OC=Object.defineProperty,PC=Object.defineProperties,RC=Object.getOwnPropertyDescriptors,mc=Object.getOwnPropertySymbols,TC=Object.prototype.hasOwnProperty,MC=Object.prototype.propertyIsEnumerable,fc=(e,t,n)=>t in e?OC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wC=(e,t)=>{for(var n in t||(t={}))TC.call(t,n)&&fc(e,n,t[n]);if(mc)for(var n of mc(t))MC.call(t,n)&&fc(e,n,t[n]);return e},IC=(e,t)=>PC(e,RC(t));const DC=(e,t)=>IC(wC({},e),{initialData:t,modifiedData:t}),io={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},LC=(e=io,t)=>(0,Zt.default)(e,n=>{const o=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const s=M()(e,o,[]);te()(n,o,[...s,t.item]);break}case"MOVE_FIELD":{const s=M()(e,o,[]),{originalIndex:l,atIndex:i}=t;te()(n,o,zt(s,l,i));break}case"ON_CHANGE":{te()(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{te()(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const s=M()(e,o,[]);te()(n,o,s.filter((l,i)=>t.index!==i));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:s}=t;n.fieldToEdit=s,n.fieldForm.label=M()(n,["modifiedData","metadatas",s,"list","label"],""),n.fieldForm.sortable=M()(n,["modifiedData","metadatas",s,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const s=["modifiedData","metadatas",e.fieldToEdit,"list"];te()(n,[...s,"label"],e.fieldForm.label),te()(n,[...s,"sortable"],e.fieldForm.sortable);break}default:return n}}),SC=["media","richtext","dynamiczone","relation","component","json"];var xC=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const gc=({layout:e,slug:t})=>{const{formatMessage:n}=(0,W.useIntl)(),{trackUsage:o}=(0,g.useTracking)(),s=ea(),l=(0,g.useNotification)(),{refetchData:i}=(0,r.useContext)(ho),[c,u]=(0,r.useState)(!1),d=()=>u(k=>!k),[f,y]=(0,r.useState)(!1),m=()=>y(k=>!k),[h,b]=(0,r.useReducer)(LC,io,()=>DC(io,e)),{fieldToEdit:E,fieldForm:S,initialData:P,modifiedData:C}=h,{attributes:F}=e,v=C.layouts.list,R=()=>{const{settings:{pageSize:k,defaultSortBy:D,defaultSortOrder:V},kind:_,uid:ne}=P,re=`${D}:${V}`,q=`${(0,He.stringify)({page:1,pageSize:k,sort:re},{encode:!1})}${s?`&${s}`:""}`;return`/content-manager/${_}/${ne}?${q}`},L=({target:{name:k,value:D}})=>{b({type:"ON_CHANGE",keys:k,value:k==="settings.pageSize"?parseInt(D,10):D})},T=()=>xC(void 0,null,function*(){const k=nr()(C,["layouts","settings","metadatas"]);w.mutate(k)}),Q=k=>{b({type:"ADD_FIELD",item:k})},H=(k,D)=>{k.stopPropagation(),v.length===1?l({type:"info",message:{id:O("notification.info.minimumFields")}}):b({type:"REMOVE_FIELD",index:D})},j=k=>{k.preventDefault(),d(),o("willSaveContentTypeLayout")},Z=k=>{b({type:"SET_FIELD_TO_EDIT",fieldToEdit:k}),m()},Y=()=>{b({type:"UNSET_FIELD_TO_EDIT"}),m()},A=k=>{k.preventDefault(),m(),b({type:"SUBMIT_FIELD_FORM"})},w=(0,it.useMutation)(k=>dC(k,t),{onSuccess(){o("didEditListSettings"),i()},onError(){l({type:"warning",message:{id:"notification.error"}})}}),{isLoading:K}=w,N=({target:{name:k,value:D}})=>{b({type:"ON_CHANGE_FIELD_METAS",name:k,value:D})},G=Object.entries(F).reduce((k,D)=>{const[V,_]=D,ne=Oo(_),re=v.includes(V);return ne&&!re&&k.push(V),k},[]).sort(),z=Object.entries(F).reduce((k,D)=>{const[V,{type:_}]=D;return SC.includes(_)||k.push(V),k},[]),$=(k,D)=>{b({type:"MOVE_FIELD",originalIndex:k,atIndex:D})};return r.createElement(X.Layout,null,r.createElement(ie.Main,{"aria-busy":K},r.createElement("form",{onSubmit:j},r.createElement(X.HeaderLayout,{navigationAction:r.createElement(g.Link,{startIcon:r.createElement(fn(),null),to:R,id:"go-back"},n({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ve.Button,{size:"S",startIcon:r.createElement(ht(),null),disabled:cn()(C,P),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:O("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:n({id:O("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:At()(C.info.displayName)})}),r.createElement(X.ContentLayout,null,r.createElement(I.Box,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(mC,{modifiedData:C,onChange:L,sortOptions:z}),r.createElement(I.Box,{paddingTop:6,paddingBottom:6},r.createElement(Fr.Divider,null)),r.createElement(vC,{listRemainingFields:G,displayedFields:v,onAddField:Q,onClickEditField:Z,onMoveField:$,onRemoveField:H,metadatas:C.metadatas}))),r.createElement(g.ConfirmDialog,{bodyText:{id:O("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ht(),null),isConfirmButtonLoading:K,isOpen:c,onToggleDialog:d,onConfirm:T,variantRightButton:"success-light"})),f&&r.createElement(CC,{attributes:F,fieldForm:S,fieldToEdit:E,onChangeEditLabel:N,onCloseModal:Y,onSubmit:A,type:M()(F,[E,"type"],"text")})))};gc.propTypes={layout:a().shape({uid:a().string.isRequired,settings:a().shape({bulkable:a().bool,defaultSortBy:a().string,defaultSortOrder:a().string,filterable:a().bool,pageSize:a().number,searchable:a().bool}).isRequired,metadatas:a().object.isRequired,options:a().object.isRequired,attributes:a().objectOf(a().shape({type:a().string})).isRequired}).isRequired,slug:a().string.isRequired};const FC=(0,r.memo)(gc),yc=Se.Z.contentManager,hc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:o,updateLayout:s}=Go(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let f={},y={};return o.contentType&&(f=_t(o.contentType)),o.components&&(y=Object.keys(o.components).reduce((m,h)=>(m[h]=_t(o.components[h]),m),{})),{rawContentTypeLayout:f,rawComponentsLayouts:y}},[o]);if((0,J.get)(o,["contentType","uid"],null)!==e||n)return r.createElement(g.LoadingIndicatorPage,null);const u=({location:{state:f},history:{goBack:y},match:{params:{id:m,origin:h}}},b)=>r.createElement(b,{slug:e,layout:o,state:f,goBack:y,id:m,origin:h}),d=[{path:"create/clone/:origin",comp:yn},{path:"create",comp:yn},{path:":id",comp:yn},{path:"",comp:uC}].map(({path:f,comp:y})=>r.createElement(ee.Route,{key:f,path:`${t}/${f}`,render:m=>u(m,y)}));return r.createElement(Uc.SV,{FallbackComponent:g.ErrorFallback},r.createElement(bo.Provider,{value:o},r.createElement(ee.Switch,null,r.createElement(ee.Route,{path:`${t}/configurations/list`},r.createElement(g.CheckPagePermissions,{permissions:yc.collectionTypesConfigurations},r.createElement(FC,{layout:l,slug:e,updateLayout:s}))),r.createElement(ee.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:yc.collectionTypesConfigurations},r.createElement(Qr,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:s}))),d)))};hc.propTypes={match:a().shape({url:a().string.isRequired,params:a().shape({slug:a().string.isRequired}).isRequired}).isRequired};const AC=(0,r.memo)(hc);var bc=p(57678),kC=p(98399),jC=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const $C=Se.Z.contentManager,BC=()=>{const[{isLoading:e,data:t},n]=(0,r.useReducer)(bc.Z,bc.q),o=(0,r.useMemo)(xn,[]),{schemas:s}=(0,he.useSelector)(i=>o(i),he.shallowEqual),{uid:l}=(0,ee.useParams)();return(0,r.useEffect)(()=>{const c=$e().CancelToken.source();return(d=>jC(void 0,null,function*(){try{n(ln());const{data:{data:f}}=yield fe.be.get(ye(`components/${l}/configuration`),{cancelToken:d.token});n(Mr(Ao(f,s,"component")))}catch(f){if($e().isCancel(f))return;kC.error(f)}}))(c),()=>{c.cancel("Operation canceled by the user.")}},[l,s]),e?r.createElement(g.LoadingIndicatorPage,null):r.createElement(g.CheckPagePermissions,{permissions:$C.componentsConfigurations},r.createElement(Qr,{components:t.components,mainLayout:t.component,slug:l}))},NC=(0,r.memo)(BC);var VC=p(64354),qC=p(97042),zC=p.n(qC);const WC=()=>{const{formatMessage:e}=(0,W.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(ie.Main,null,r.createElement(X.HeaderLayout,{title:e({id:O("header.name"),defaultMessage:"Content"})}),r.createElement(X.ContentLayout,null,r.createElement(VC.EmptyStateLayout,{action:r.createElement(g.LinkButton,{variant:"secondary",startIcon:r.createElement(St(),null),to:"/plugins/content-type-builder/content-types/create-content-type"},e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:r.createElement(zC(),{width:"10rem"}),shadow:"tableShadow"})))},UC=()=>{const{formatMessage:e}=(0,W.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(ie.Main,null,r.createElement(X.HeaderLayout,{title:e({id:O("header.name"),defaultMessage:"Content"})}),r.createElement(X.ContentLayout,null,r.createElement(g.NoPermissions,null)))},_C=Se.Z.contentManager,vc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:o,updateLayout:s}=Go(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let c={},u={};return o.contentType&&(u=_t(o.contentType)),o.components&&(c=Object.keys(o.components).reduce((d,f)=>(d[f]=_t(o.components[f]),d),{})),{rawContentTypeLayout:u,rawComponentsLayouts:c}},[o]);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(bo.Provider,{value:o},r.createElement(ee.Switch,null,r.createElement(ee.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:_C.singleTypesConfigurations},r.createElement(Qr,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:s}))),r.createElement(ee.Route,{path:t,render:({location:{state:c},history:{goBack:u}})=>r.createElement(yn,{layout:o,slug:e,isSingleType:!0,state:c,goBack:u})})))};vc.propTypes={match:a().shape({url:a().string.isRequired,params:a().shape({slug:a().string.isRequired}).isRequired}).isRequired};const HC=(0,r.memo)(vc);var ZC=p(58469),GC=p(59578),Ec=p.n(GC),Nt=p(89420),QC=Object.defineProperty,YC=Object.defineProperties,KC=Object.getOwnPropertyDescriptors,Cc=Object.getOwnPropertySymbols,JC=Object.prototype.hasOwnProperty,XC=Object.prototype.propertyIsEnumerable,Oc=(e,t,n)=>t in e?QC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eO=(e,t)=>{for(var n in t||(t={}))JC.call(t,n)&&Oc(e,n,t[n]);if(Cc)for(var n of Cc(t))XC.call(t,n)&&Oc(e,n,t[n]);return e},tO=(e,t)=>YC(e,KC(t));const Pc=(e,t)=>(0,ZC.ZP)(e,Ec()(t),{keys:[n=>Ec()(n.title)]}),nO=()=>{const[e,t]=(0,r.useState)(""),{formatMessage:n}=(0,W.useIntl)(),o=(0,r.useMemo)(Nu,[]),{collectionTypeLinks:s,singleTypeLinks:l}=(0,he.useSelector)(h=>o(h),he.shallowEqual),i=h=>h.map(b=>tO(eO({},b),{title:n({id:b.title,defaultMessage:b.title})})),c=i(s),u=i(l),d=[{id:"collectionTypes",title:{id:O("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:ce()(Pc(c,e),h=>h.title.toLowerCase())},{id:"singleTypes",title:{id:O("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:ce()(Pc(u,e),h=>h.title.toLowerCase())}],f=()=>{t("")},y=({target:{value:h}})=>{t(h)},m=n({id:O("header.name"),defaultMessage:"Content"});return r.createElement(Nt.SubNav,{ariaLabel:m},r.createElement(Nt.SubNavHeader,{label:m,searchable:!0,value:e,onChange:y,onClear:f,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),r.createElement(Nt.SubNavSections,null,d.map(h=>{const b=n({id:h.title.id,defaultMessage:h.title.defaultMessage},h.title.values);return r.createElement(Nt.SubNavSection,{key:h.id,label:b,badgeLabel:h.links.length.toString()},h.links.map(E=>{const S=E.search?`?${E.search}`:"";return r.createElement(Nt.SubNavLink,{as:ee.NavLink,key:E.uid,to:`${E.to}${S}`},E.title)}))})))};var lo=p(92886);const rO=()=>({type:lo.ZA}),oO=()=>({type:lo.c2}),aO=(e,t,n,o)=>({type:lo.ix,data:{authorizedCtLinks:e,authorizedStLinks:t,components:o,contentTypeSchemas:n}}),Rc=(e,t,n=[])=>e.filter(o=>o.isDisplayed).map(o=>{const s=[{action:"plugin::content-manager.explorer.create",subject:o.uid},{action:"plugin::content-manager.explorer.read",subject:o.uid}],l=[{action:"plugin::content-manager.explorer.read",subject:o.uid}],i=t==="collectionTypes"?s:l,c=n.find(({uid:d})=>d===o.uid);let u=null;if(c){const d={page:1,pageSize:c.settings.pageSize,sort:`${c.settings.defaultSortBy}:${c.settings.defaultSortOrder}`};u=(0,He.stringify)(d,{encode:!1})}return{permissions:i,search:u,kind:o.kind,title:o.info.displayName,to:`/content-manager/${o.kind}/${o.uid}`,uid:o.uid,name:o.uid,isDisplayed:o.isDisplayed}}),sO=(e,t)=>{const[n,o]=(0,J.chain)(e).groupBy("kind").map((s,l)=>({name:l,links:s})).sortBy("name").value();return{collectionTypesSectionLinks:Rc((0,J.get)(n,"links",[]),"collectionTypes",t),singleTypesSectionLinks:Rc((0,J.get)(o,"links",[]),"singleTypes")}},Tc=(e,t)=>t.map(({permissions:n})=>(0,g.hasPermissions)(e,n));var iO=p(98399),lO=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const cO=(e,t,n)=>lO(void 0,null,function*(){try{const{data:{data:o}}=yield fe.be.get(ye("content-types-settings")),{collectionTypesSectionLinks:s,singleTypesSectionLinks:l}=sO(e,o),i=Tc(t,s),c=yield Promise.all(i),u=s.filter((m,h)=>c[h]),d=Tc(t,l),f=yield Promise.all(d),y=l.filter((m,h)=>f[h]);return{authorizedCtLinks:u,authorizedStLinks:y}}catch(o){return iO.error(o),n({type:"warning",message:{id:"notification.error"}}),{authorizedCtLinks:[],authorizedStLinks:[],contentTypes:[]}}});var uO=p(98399),dO=Object.defineProperty,pO=Object.defineProperties,mO=Object.getOwnPropertyDescriptors,Mc=Object.getOwnPropertySymbols,fO=Object.prototype.hasOwnProperty,gO=Object.prototype.propertyIsEnumerable,wc=(e,t,n)=>t in e?dO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yO=(e,t)=>{for(var n in t||(t={}))fO.call(t,n)&&wc(e,n,t[n]);if(Mc)for(var n of Mc(t))gO.call(t,n)&&wc(e,n,t[n]);return e},hO=(e,t)=>pO(e,mO(t)),bO=(e,t,n)=>new Promise((o,s)=>{var l=u=>{try{c(n.next(u))}catch(d){s(d)}},i=u=>{try{c(n.throw(u))}catch(d){s(d)}},c=u=>u.done?o(u.value):Promise.resolve(u.value).then(l,i);c((n=n.apply(e,t)).next())});const vO=()=>{const e=(0,he.useDispatch)(),t=(0,g.useNotification)(),n=(0,he.useSelector)(wt()),o=(0,r.useRef)(),{allPermissions:s}=(0,g.useRBACProvider)(),{runHookWaterfall:l}=(0,g.useStrapiApp)(),c=$e().CancelToken.source(),{notifyStatus:u}=(0,Kr.useNotifyAT)(),{formatMessage:d}=(0,W.useIntl)(),f=()=>bO(void 0,null,function*(){e(rO());try{const[{data:{data:y}},{data:{data:m}}]=yield Promise.all(["components","content-types"].map(C=>fe.be.get(ye(C),{cancelToken:c.token})));u(d({id:O("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const{authorizedCtLinks:h,authorizedStLinks:b}=yield cO(m,s,t),{ctLinks:E}=l(Qt.LK,{ctLinks:h,models:m}),{stLinks:S}=l(Qt.dV,{stLinks:b,models:m}),P=aO(E,S,m,y);e(P)}catch(y){if($e().isCancel(y))return;uO.error(y),t({type:"warning",message:{id:"notification.error"}})}});return o.current=f,(0,r.useEffect)(()=>(o.current(),()=>{c.cancel("Operation canceled by the user."),e(oO())}),[e,t]),hO(yO({},n),{refetchData:o.current})},EO=Se.Z.contentManager,Ic=()=>{const e=(0,ee.useRouteMatch)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:o,models:s,refetchData:l}=vO(),i=ce()([...n,...o],m=>m.title.toLowerCase()),{pathname:c}=(0,ee.useLocation)(),{formatMessage:u}=(0,W.useIntl)(),{startSection:d}=(0,g.useGuidedTour)(),f=(0,r.useRef)(d);if((0,r.useEffect)(()=>{f.current&&f.current("contentManager")},[]),t==="loading")return r.createElement(ie.Main,{"aria-busy":"true"},r.createElement(X.HeaderLayout,{title:u({id:O("header.name"),defaultMessage:"Content"})}),r.createElement(g.LoadingIndicatorPage,null));const y=s.filter(({isDisplayed:m})=>m);return i.length===0&&y.length>0&&c!=="/content-manager/403"?r.createElement(ee.Redirect,{to:"/content-manager/403"}):y.length===0&&c!=="/content-manager/no-content-types"?r.createElement(ee.Redirect,{to:"/content-manager/no-content-types"}):!e&&i.length>0?r.createElement(ee.Redirect,{to:`${i[0].to}${i[0].search?`?${i[0].search}`:""}`}):r.createElement(X.Layout,{sideNav:r.createElement(nO,null)},r.createElement(Wc,null),r.createElement(ho.Provider,{value:{refetchData:l}},r.createElement(ee.Switch,null,r.createElement(ee.Route,{path:"/content-manager/components/:uid/configurations/edit"},r.createElement(g.CheckPagePermissions,{permissions:EO.componentsConfigurations},r.createElement(NC,null))),r.createElement(ee.Route,{path:"/content-manager/collectionType/:slug",component:AC}),r.createElement(ee.Route,{path:"/content-manager/singleType/:slug",component:HC}),r.createElement(ee.Route,{path:"/content-manager/403"},r.createElement(UC,null)),r.createElement(ee.Route,{path:"/content-manager/no-content-types"},r.createElement(WC,null)),r.createElement(ee.Route,{path:"",component:g.NotFound}))))};function CO(){const{formatMessage:e}=(0,W.useIntl)();return r.createElement(r.Fragment,null,r.createElement(pt.Helmet,{title:e({id:O("plugin.name"),defaultMessage:"Content Manager"})}),r.createElement(Ic,null))}},57544:()=>{},59599:()=>{},42310:()=>{},33842:()=>{},85695:()=>{}}]);
